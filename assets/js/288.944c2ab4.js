(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{476:function(t,a,s){"use strict";s.r(a);var n=s(3),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ignite配置入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ignite配置入门"}},[t._v("#")]),t._v(" Ignite配置入门")]),t._v(" "),s("h2",{attrs:{id:"_1-配置方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置方式"}},[t._v("#")]),t._v(" 1.配置方式")]),t._v(" "),s("p",[t._v("本章节会介绍在Ignite集群中设定配置参数的不同方式。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v(".NET、Python、Node.js等其他语言的配置")]),t._v(" "),s("ul",[s("li",[t._v(".NET开发者：请参见"),s("RouterLink",{attrs:{to:"/doc/java/DotnetSpecific.html"}},[t._v(".NET配置")]),t._v("相关章节的介绍；")],1),t._v(" "),s("li",[t._v("Python、Node.js等其他语言开发者：请参见"),s("RouterLink",{attrs:{to:"/doc/java/ThinClients.html"}},[t._v("瘦客户端")]),t._v("中相关章节的内容。")],1)])]),t._v(" "),s("h3",{attrs:{id:"_1-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-概述"}},[t._v("#")]),t._v(" 1.1.概述")]),t._v(" "),s("p",[t._v("可以通过在启动节点时向Ignite提供"),s("a",{attrs:{href:"https://ignite.apache.org/releases/2.9.0/javadoc/org/apache/ignite/configuration/IgniteConfiguration.html",target:"_self",rel:"noopener noreferrer"}},[t._v("IgniteConfiguration")]),t._v("类的实例来指定自定义配置参数。使用编程方式或通过XML配置文件都可以，这两种方式是完全可以互换的。")]),t._v(" "),s("p",[t._v("XML配置文件是必须包含"),s("code",[t._v("IgniteConfiguration")]),t._v("bean的Spring Bean定义文件。从命令行启动节点时，可以将配置文件作为参数传递给"),s("code",[t._v("ignite.sh|bat")]),t._v("脚本，如下所示：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("ignite.sh ignite-config.xml\n")])])]),s("p",[t._v("如果未指定配置文件，会使用默认文件"),s("code",[t._v("{IGNITE_HOME}/config/default-config.xml")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_1-2-基于spring的xml配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-基于spring的xml配置"}},[t._v("#")]),t._v(" 1.2.基于Spring的XML配置")]),t._v(" "),s("p",[t._v("要创建一个Spring XML格式的配置文件，需要定义一个"),s("code",[t._v("IgniteConfiguration")]),t._v("bean，然后配置不同于默认值的参数，关于如何使用基于XML模式的配置的更多信息，可以看官方的"),s("a",{attrs:{href:"https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html",target:"_self",rel:"noopener noreferrer"}},[t._v("Spring文档")]),t._v("。")]),t._v(" "),s("p",[t._v("在下面的示例中，创建了"),s("code",[t._v("IgniteConfiguration")]),t._v("bean，配置了"),s("code",[t._v("workDirectory")]),t._v("属性，然后配置了一个"),s("RouterLink",{attrs:{to:"/doc/java/DataModeling.html#_2-2-1-partitioned"}},[t._v("分区模式的缓存")]),t._v("。")],1),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("beans")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.springframework.org/schema/beans"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("workDirectory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/path/to/work/directory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cacheConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.CacheConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Set the cache name. --\x3e")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myCache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Set the cache mode. --\x3e")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cacheMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("PARTITIONED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Other cache parameters. --\x3e")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-3-编程式配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-编程式配置"}},[t._v("#")]),t._v(" 1.3.编程式配置")]),t._v(" "),s("p",[t._v("创建一个"),s("code",[t._v("IgniteConfiguration")]),t._v("类的实例，然后配置必要的参数，如下所示：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" igniteCfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//setting a work directory")]),t._v("\nigniteCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWorkDirectory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//defining a partitioned cache")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheConfiguration")]),t._v(" cacheCfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myCache"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncacheCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCacheMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PARTITIONED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nigniteCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCacheConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cacheCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C#/.NET"}},[s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" igniteCfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    WorkDirectory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    CacheConfiguration "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheConfiguration")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            Name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myCache"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            CacheMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CacheMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Partitioned\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C++"}},[s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("IgniteConfiguration cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("igniteHome "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("完整参数的列表，可以参见"),s("a",{attrs:{href:"https://ignite.apache.org/releases/2.9.0/javadoc/org/apache/ignite/configuration/IgniteConfiguration.html",target:"_self",rel:"noopener noreferrer"}},[t._v("IgniteConfiguration")]),t._v("的javadoc。")]),t._v(" "),s("h2",{attrs:{id:"_2-ignite-java配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-ignite-java配置"}},[t._v("#")]),t._v(" 2.Ignite Java配置")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v(".NET、Python、Node.js等其他语言的配置")]),t._v(" "),s("ul",[s("li",[t._v(".NET开发者：请参见"),s("RouterLink",{attrs:{to:"/doc/java/DotnetSpecific.html"}},[t._v(".NET配置")]),t._v("相关章节的介绍；")],1),t._v(" "),s("li",[t._v("Python、Node.js等其他语言开发者：请参见"),s("RouterLink",{attrs:{to:"/doc/java/ThinClients.html"}},[t._v("瘦客户端")]),t._v("中相关章节的内容。")],1)])]),t._v(" "),s("h3",{attrs:{id:"_2-1-环境要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-环境要求"}},[t._v("#")]),t._v(" 2.1.环境要求")]),t._v(" "),s("p",[t._v("Apache Ignite官方在如下环境中进行了测试：")]),t._v(" "),s("ul",[s("li",[t._v("JDK：Oracle JDK8及以上，Open JDK8及以上，IBM JDK8及以上；")]),t._v(" "),s("li",[t._v("OS：Linux（任何版本），Mac OS X（10.6及以上），Windows(XP及以上)，Windows Server（2008及以上），Oracle Solaris；")]),t._v(" "),s("li",[t._v("网络：没有限制（建议10G甚至更快的网络带宽）；")]),t._v(" "),s("li",[t._v("架构：x86，x64，SPARC，PowerPC。")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-在java11及以后的版本中使用ignite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-在java11及以后的版本中使用ignite"}},[t._v("#")]),t._v(" 2.2.在Java11及以后的版本中使用Ignite")]),t._v(" "),s("p",[t._v("要在Java11及以后的版本中运行Ignite，需按照如下步骤操作：")]),t._v(" "),s("ol",[s("li",[t._v("配置"),s("code",[t._v("JAVA_HOME")]),t._v("环境变量，指向Java的安装目录；")]),t._v(" "),s("li",[t._v("Ignite使用了专有的SDK API，这些API默认并未开启，因此需要向JVM传递额外的专有标志来让这些API可用。如果使用的是"),s("code",[t._v("ignite.sh")]),t._v("或者"),s("code",[t._v("ignite.bat")]),t._v("，那么什么都不需要做，因为脚本已经提前配置好了。否则就需要向应用的JVM添加下面的参数；")])]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--add-exports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("java.base/jdk.internal.misc=ALL-UNNAMED")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--add-exports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("java.base/sun.nio.ch=ALL-UNNAMED")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--add-exports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--add-exports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--add-exports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--add-opens")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("jdk.management/com.sun.management.internal=ALL-UNNAMED")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("--illegal-access")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("permit")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("TLSv1.3，Java11中已经可以使用，目前还不支持，如果节点间使用了SSL，可以考虑添加"),s("code",[t._v("-Djdk.tls.client.protocols=TLSv1.2")]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"_2-3-使用二进制包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-使用二进制包"}},[t._v("#")]),t._v(" 2.3.使用二进制包")]),t._v(" "),s("ul",[s("li",[t._v("下载最新版本的"),s("a",{attrs:{href:"https://ignite.apache.org/download.cgi#binaries",target:"_self",rel:"noopener noreferrer"}},[t._v("Ignite压缩包")]),t._v("；")]),t._v(" "),s("li",[t._v("将该包解压到操作系统的一个文件夹；")]),t._v(" "),s("li",[t._v("（可选）配置"),s("code",[t._v("IGNITE_HOME")]),t._v("环境变量或者Windows的"),s("code",[t._v("PATH")]),t._v("指向Ignite的安装文件夹，路径不要以"),s("code",[t._v("/")]),t._v("（Windows为"),s("code",[t._v("\\")]),t._v("）结尾。")])]),t._v(" "),s("h3",{attrs:{id:"_2-4-使用maven"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-使用maven"}},[t._v("#")]),t._v(" 2.4.使用Maven")]),t._v(" "),s("p",[t._v("使用Ignite的最简单的方式是将其加入项目的pom.xml文件。")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ignite.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.9.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ignite.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-core"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("code",[t._v("ignite-core")]),t._v("模块包含了Ignite的核心功能，其他的功能都是由各种Ignite模块提供的。")]),t._v(" "),s("p",[t._v("下面两个是最常用的模块：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ignite-spring")]),t._v("：支持"),s("a",{attrs:{href:"#_1-2-%E5%9F%BA%E4%BA%8Espring%E7%9A%84xml%E9%85%8D%E7%BD%AE"}},[t._v("基于XML的配置")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v("ignite-indexing")]),t._v("：支持SQL索引。")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-spring"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-indexing"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-5-使用docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-使用docker"}},[t._v("#")]),t._v(" 2.5.使用Docker")]),t._v(" "),s("p",[t._v("如果希望在Docker环境中运行Ignite，请参见"),s("RouterLink",{attrs:{to:"/doc/java/Installation.html#_2-使用docker安装"}},[t._v("Docker部署")]),t._v("章节的内容。")],1),t._v(" "),s("h3",{attrs:{id:"_2-6-配置工作目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-配置工作目录"}},[t._v("#")]),t._v(" 2.6.配置工作目录")]),t._v(" "),s("p",[t._v("Ignite会使用一个工作目录来保存应用的数据（如果使用了"),s("RouterLink",{attrs:{to:"/doc/java/Persistence.html"}},[t._v("原生持久化")]),t._v("功能）、索引文件、元数据信息、日志以及其他文件，默认的工作目录为：")],1),t._v(" "),s("ul",[s("li",[s("code",[t._v("$IGNITE_HOME/work")]),t._v("：如果定义了"),s("code",[t._v("IGNITE_HOME")]),t._v("系统属性，如果使用二进制包的"),s("code",[t._v("bin/ignite.sh")]),t._v("脚本启动，就是这种情况；")]),t._v(" "),s("li",[s("code",[t._v("./ignite/work")]),t._v("：这个路径相对于应用启动时的目录。")])]),t._v(" "),s("p",[t._v("修改默认的工作目录有几种方式：")]),t._v(" "),s("ul",[s("li",[t._v("环境变量方式：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IGNITE_WORK_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/path/to/work/directory\n")])])]),s("ul",[s("li",[t._v("在节点的配置中：")])]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"XML"}},[s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("workDirectory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/path/to/work/directory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other properties --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" igniteCfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nigniteCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWorkDirectory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C#/.NET"}},[s("div",{staticClass:"language-csharp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-csharp"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    WorkDirectory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C++"}},[s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("IgniteConfiguration cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("igniteHome "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_2-7-启用模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-启用模块"}},[t._v("#")]),t._v(" 2.7.启用模块")]),t._v(" "),s("p",[t._v("Ignite包含了很多的模块，提供了各种各样的功能，开发者可以根据需要，一个个引入。")]),t._v(" "),s("p",[t._v("Ignite的二进制包里面包含了所有的模块，但是默认都是禁用的（除了"),s("code",[t._v("ignite-core")]),t._v("、"),s("code",[t._v("ignite-spring")]),t._v("、"),s("code",[t._v("ignite-indexing")]),t._v("模块），可选库位于二进制包的"),s("code",[t._v("lib/optional")]),t._v("文件夹，每个模块是一个单独的子目录。")]),t._v(" "),s("p",[t._v("根据使用Ignite的方式，可以使用下述方式之一启用模块：")]),t._v(" "),s("ul",[s("li",[t._v("如果使用的是二进制包，那么可以在启动节点之前将"),s("code",[t._v("libs/optional/{module-dir}")]),t._v("移动到"),s("code",[t._v("libs")]),t._v("目录；")]),t._v(" "),s("li",[t._v("将"),s("code",[t._v("libs/optional/{module-dir}")]),t._v("中的库文件加入应用的类路径；")]),t._v(" "),s("li",[t._v("将一个模块添加到工程的依赖中：")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-log4j2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("下面的模块有LGPL依赖，因此无法部署在Maven中央仓库中：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ignite-hibernate")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v("ignite-geospatial")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v("ignite-schedule")]),t._v("。")])]),t._v(" "),s("p",[t._v("要使用这些模块，可以从源代码进行构建然后添加到工程中，比如要将"),s("code",[t._v("ignite-hibernate")]),t._v("模块安装到本地仓库，可以在Ignite的源代码包中执行下面的命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("mvn clean "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -DskipTests -Plgpl -pl modules/hibernate -am\n")])])]),s("p",[t._v("下面的模块都是可用的：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("模块的构件")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("ignite-aop")])]),t._v(" "),s("td",[t._v("Ignite AOP模块通过添加"),s("code",[t._v("@Gridify")]),t._v("注解，可以将任何Java方法转换为分布式闭包。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-aws")])]),t._v(" "),s("td",[t._v("AWS S3上的集群发现，具体请参见"),s("RouterLink",{attrs:{to:"/doc/java/Clustering.html#_4-2-amazon-s3-ip探测器"}},[t._v("Amazon S3 IP探测器")]),t._v("。")],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-cassandra-serializers")])]),t._v(" "),s("td",[t._v("该模块提供了在Cassandra中将对象保存为BLOB格式的附加序列化器，该模块可以和Ignite的Cassandra存储模块一起使用。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-cassandra-store")])]),t._v(" "),s("td",[t._v("该模块提供了一个基于Cassandra数据库的CacheStore实现。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-cloud")])]),t._v(" "),s("td",[t._v("该模块提供了TCP发现中IP探测器的Apache Jclouds实现。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-direct-io")])]),t._v(" "),s("td",[t._v("该模块提供了一个以"),s("code",[t._v("O_DIRECT")]),t._v("模式进行缓存分区读写的页面存储。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-gce")])]),t._v(" "),s("td",[t._v("该模块提供了TCP发现中IP探测器的Google Cloud Storage实现。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-indexing")])]),t._v(" "),s("td",[s("RouterLink",{attrs:{to:"/doc/java/WorkingwithSQL.html#_3-定义索引"}},[t._v("SQL查询和索引")]),t._v("。")],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-jcl")])]),t._v(" "),s("td",[t._v("支持Jakarta Common Logging (JCL)框架。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-jta")])]),t._v(" "),s("td",[t._v("Ignite事务与JTA的集成。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-kafka")])]),t._v(" "),s("td",[t._v("Ignite的Kafka流处理器，提供了从Kafka到Ignite缓存的流式数据处理能力。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-kubernetes")])]),t._v(" "),s("td",[t._v("Ignite Kubernetes模块提供了一个基于TCP发现的IP探测器，其使用专用的Kubernetes服务来查找由Kubernetes容器化的Ignite配置组的IP地址。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-log4j")])]),t._v(" "),s("td",[t._v("支持log4j。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-log4j2")])]),t._v(" "),s("td",[t._v("支持log4j2。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-ml")])]),t._v(" "),s("td",[t._v("Ignite的机器学习模块，其提供了机器学习功能以及线性代数的相关数据结构和方法，包括堆内和堆外，密集和稀疏，本地和分布式实现。详细信息请参见"),s("RouterLink",{attrs:{to:"/doc/java/MachineLearning.html"}},[t._v("机器学习")]),t._v("文档。")],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-osgi")])]),t._v(" "),s("td",[t._v("该模块提供了桥接组件，以使Ignite可以在OSGi容器（例如Apache Karaf）内无缝运行。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-osgi-karaf")])]),t._v(" "),s("td",[t._v("该模块包含功能特性库，以方便将Ignite安装到Apache Karaf容器中。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-rest-http")])]),t._v(" "),s("td",[t._v("该模块在节点内启动了一个基于Jetty的服务器，该服务器可用于在集群中使用基于HTTP的RESTful API执行任务和/或缓存命令。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-scalar")])]),t._v(" "),s("td",[t._v("该模块为基于Scala的DSL提供Ignite API的扩展和快捷方式。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-scalar_2.10")])]),t._v(" "),s("td",[t._v("Ignite支持Scalar2.10的模块。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-schedule")])]),t._v(" "),s("td",[t._v("该模块提供了在本地节点使用基于UNIX CRON表达式语法的作业调度能力。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-slf4j")])]),t._v(" "),s("td",[t._v("支持"),s("RouterLink",{attrs:{to:"/doc/java/ConfiguringLogging.html#_6-使用slf4j"}},[t._v("SLF4J日志")]),t._v("框架。")],1)]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-spark")])]),t._v(" "),s("td",[t._v("该模块提供了SparkRDD抽象的实现，可轻松访问Ignite缓存。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-spring-data")])]),t._v(" "),s("td",[t._v("提供了与Spring Data框架的集成。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-spring-data_2.0")])]),t._v(" "),s("td",[t._v("提供了与Spring Data框架2.0的集成。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-ssh")])]),t._v(" "),s("td",[t._v("该模块提供了通过SSH在远程主机上启动Ignite节点的功能。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-urideploy")])]),t._v(" "),s("td",[t._v("提供了从不同来源（例如文件系统、HTTP甚至电子邮件）部署任务的功能。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-visor-console")])]),t._v(" "),s("td",[t._v("开源的命令行管理和监控工具。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-web")])]),t._v(" "),s("td",[t._v("该模块允许基于Servlet和Servlet上下文监听器在任何Web容器内启动节点。此外该模块还提供了将Web会话缓存在Ignite缓存中的功能。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ignite-zookeeper")])]),t._v(" "),s("td",[t._v("该模块提供了一个基于TCP发现的IP探测器，它会使用一个ZooKeeper目录来发现其他的Ignite节点。")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-8-配置jvm选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-配置jvm选项"}},[t._v("#")]),t._v(" 2.8.配置JVM选项")]),t._v(" "),s("p",[t._v("当通过"),s("code",[t._v("ignite.sh")]),t._v("脚本启动节点时，设置JVM参数有几个方法，这些方法下面的章节会介绍。")]),t._v(" "),s("h4",{attrs:{id:"_2-8-1-jvm-opts系统变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-1-jvm-opts系统变量"}},[t._v("#")]),t._v(" 2.8.1.JVM_OPTS系统变量")]),t._v(" "),s("p",[t._v("可以配置"),s("code",[t._v("JVM_OPTS")]),t._v("环境变量：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JVM_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JVM_OPTS")]),t._v(' -Xmx6G -DIGNITE_TO_STRING_INCLUDE_SENSITIVE=false"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$IGNITE_HOME")]),t._v("/bin/ignite.sh\n")])])]),s("h4",{attrs:{id:"_2-8-2-命令行参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-2-命令行参数"}},[t._v("#")]),t._v(" 2.8.2.命令行参数")]),t._v(" "),s("p",[t._v("还可以通过"),s("code",[t._v("-J")]),t._v("前缀传递JVM参数：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("./ignite.sh -J-Xmx6G -J-DIGNITE_TO_STRING_INCLUDE_SENSITIVE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[t._v(".\\ignite.bat -J-Xmx6G -J-DIGNITE_TO_STRING_INCLUDE_SENSITIVE=false\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_2-9-配置ignite系统属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-配置ignite系统属性"}},[t._v("#")]),t._v(" 2.9.配置Ignite系统属性")]),t._v(" "),s("p",[t._v("除了公开的配置参数，还可以使用内部系统属性来调整特定的（通常是底层的）Ignite行为。可以使用以下命令找到所有属性及其说明和默认值：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("./ignite.sh -systemProps\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[t._v(".\\ignite.bat -systemProps\n")])])])])],1),t._v(" "),s("p",[t._v("输出示例：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ignite.sh -systemProps\nIGNITE_AFFINITY_HISTORY_SIZE                                    - [Integer] Maximum size for affinity assignment history. Default is 25.\nIGNITE_ALLOW_ATOMIC_OPS_IN_TX                                   - [Boolean] Allows atomic operations inside transactions. Default is true.\nIGNITE_ALLOW_DML_INSIDE_TRANSACTION                             - [Boolean] When set to true, Ignite will allow executing DML operation (MERGE|INSERT|UPDATE|DELETE) within transactions for non MVCC mode. Default is false.\nIGNITE_ALLOW_START_CACHES_IN_PARALLEL                           - [Boolean] Allows to start multiple caches in parallel. Default is true.\n...\n")])])]),s("h3",{attrs:{id:"_2-10-配置建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-配置建议"}},[t._v("#")]),t._v(" 2.10.配置建议")]),t._v(" "),s("p",[t._v("以下是一些推荐的配置技巧，旨在使开发者更轻松地操作Ignite集群或使用Ignite开发应用。")]),t._v(" "),s("p",[s("strong",[t._v("配置工作目录")])]),t._v(" "),s("p",[t._v("如果要使用二进制包或Maven，建议为Ignite设置工作目录。工作目录用于存储元数据信息、索引文件、应用程序数据（如果使用"),s("RouterLink",{attrs:{to:"/doc/java/Persistence.html"}},[t._v("原生持久化")]),t._v("功能）、日志和其他文件。建议一定要设置工作目录。")],1),t._v(" "),s("p",[s("strong",[t._v("建议的日志配置")])]),t._v(" "),s("p",[t._v("日志在故障排除和查找错误方面起着重要作用，以下是有关如何管理日志文件的一些一般提示：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("以"),s("code",[t._v("verbose")]),t._v("模式启动Ignite；")]),t._v(" "),s("ul",[s("li",[t._v("如果使用"),s("code",[t._v("ignite.sh")]),t._v("，请指定"),s("code",[t._v("-v")]),t._v("选项；")]),t._v(" "),s("li",[t._v("如果从Java代码启动Ignite，请设置"),s("code",[t._v("IGNITE_QUIET=false")]),t._v("系统变量；")])])]),t._v(" "),s("li",[s("p",[t._v("不要将日志文件存储在"),s("code",[t._v("/tmp")]),t._v("文件夹中，每次重启服务器时都会清除此文件夹；")])]),t._v(" "),s("li",[s("p",[t._v("确保在存储日志文件的磁盘上有足够的可用空间；")])]),t._v(" "),s("li",[s("p",[t._v("定期归档旧的日志文件以节省存储空间。")])])]),t._v(" "),s("h2",{attrs:{id:"_3-配置日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置日志"}},[t._v("#")]),t._v(" 3.配置日志")]),t._v(" "),s("h3",{attrs:{id:"_3-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-概述"}},[t._v("#")]),t._v(" 3.1.概述")]),t._v(" "),s("p",[t._v("Ignite支持各种常见的日志库和框架：")]),t._v(" "),s("ul",[s("li",[t._v("JUL (默认)；")]),t._v(" "),s("li",[t._v("Log4j；")]),t._v(" "),s("li",[t._v("Log4j2；")]),t._v(" "),s("li",[t._v("JCL；")]),t._v(" "),s("li",[t._v("SLF4J。")])]),t._v(" "),s("p",[t._v("本章节会介绍如何使用它们。")]),t._v(" "),s("p",[t._v("Ignite节点启动之后，会在控制台中输出启动信息，包括了配置的日志库信息。每个日志库都有自己的配置参数，需要分别进行配置。除了库特有的配置，还有一些系统属性可以对日志进行调整，如下表所示：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("系统属性")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("IGNITE_LOG_INSTANCE_NAME")])]),t._v(" "),s("td",[t._v("如果该属性存在，Ignite会在日志消息中包含实例名")]),t._v(" "),s("td",[t._v("未配置")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_QUIET")])]),t._v(" "),s("td",[t._v("配置为"),s("code",[t._v("false")]),t._v("可以禁用静默模式，启用详细模式，其会输出更多的信息")]),t._v(" "),s("td",[t._v("true")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_LOG_DIR")])]),t._v(" "),s("td",[t._v("该属性会指定Ignite日志的输出目录")]),t._v(" "),s("td",[s("code",[t._v("$IGNITE_HOME/work/log")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_DUMP_THREADS_ON_FAILURE")])]),t._v(" "),s("td",[t._v("如果配置为"),s("code",[t._v("true")]),t._v("，在捕获严重错误时会在日志中输出线程堆栈信息")]),t._v(" "),s("td",[t._v("true")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-默认日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-默认日志"}},[t._v("#")]),t._v(" 3.2.默认日志")]),t._v(" "),s("p",[t._v("Ignite默认会使用"),s("code",[t._v("java.util.logging")]),t._v("（JUL框架），如果节点是通过二进制包的"),s("code",[t._v("ignite.sh|bat")]),t._v("脚本启动，Ignite会使用"),s("code",[t._v("$IGNITE_HOME/config/java.util.logging.properties")]),t._v("作为默认的配置文件，然后将日志写入"),s("code",[t._v("$IGNITE_HOME/work/log")]),t._v("文件夹中的日志文件，要修改这个日志目录，可以使用"),s("code",[t._v("IGNITE_LOG_DIR")]),t._v("系统属性。")]),t._v(" "),s("p",[t._v("如果将Ignite作为应用中的库文件引入，默认的日志配置只包括控制台日志处理器，级别为"),s("code",[t._v("INFO")]),t._v("，可以通过"),s("code",[t._v("java.util.logging.config.file")]),t._v("系统属性提供一个自定义的配置文件。")]),t._v(" "),s("h3",{attrs:{id:"_3-3-使用log4j"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-使用log4j"}},[t._v("#")]),t._v(" 3.3.使用Log4j")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在使用Log4j之前，需要先启用"),s("RouterLink",{attrs:{to:"/doc/java/SettingUp.html#_2-7-启用模块"}},[t._v("ignite-log4j")]),t._v("模块。")],1)]),t._v(" "),s("p",[t._v("要使用Log4j进行日志记录，需要配置"),s("code",[t._v("IgniteConfiguration")]),t._v("的"),s("code",[t._v("gridLogger")]),t._v("属性，如下所示：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"XML"}},[s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ignite.cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("gridLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.logger.log4j.Log4JLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- log4j configuration file --\x3e")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constructor-arg")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("log4j-config.xml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other properties --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" cfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteLogger")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log4JLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log4j-config.xml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGridLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start a node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Info Message Logged!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C#/.NET"}},[s("p",[t._v(".NET目前还不支持这个API，需要使用基于XML的配置。")])]),t._v(" "),s("Tab",{attrs:{title:"C++"}},[s("p",[t._v("C++目前还不支持这个API，需要使用基于XML的配置。")])])],1),t._v(" "),s("p",[t._v("在上面的配置中，"),s("code",[t._v("log4j-config.xml")]),t._v("的路径要么是绝对路径，要么是相对路径，可以相对于"),s("code",[t._v("META-INF")]),t._v("，也可以相对于"),s("code",[t._v("IGNITE_HOME")]),t._v("。在Ignite的二进制包中有一个log4j配置文件的示例（"),s("code",[t._v("$IGNITE_HOME/config/ignite-log4j.xml")]),t._v("）。")]),t._v(" "),s("h3",{attrs:{id:"_3-4-使用log4j2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-使用log4j2"}},[t._v("#")]),t._v(" 3.4.使用Log4j2")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在使用Log4j之前，需要先启用"),s("RouterLink",{attrs:{to:"/doc/java/SettingUp.html#_2-7-启用模块"}},[t._v("ignite-log4j2")]),t._v("模块。")],1)]),t._v(" "),s("p",[t._v("要使用Log4j2进行日志记录，需要配置"),s("code",[t._v("IgniteConfiguration")]),t._v("的"),s("code",[t._v("gridLogger")]),t._v("属性，如下所示：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"XML"}},[s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ignite.cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("gridLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.logger.log4j2.Log4J2Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- log4j2 configuration file --\x3e")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("constructor-arg")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("log4j2-config.xml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other properties --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" cfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteLogger")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log4J2Logger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log4j2-config.xml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGridLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start a node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Info Message Logged!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C#/.NET"}},[s("p",[t._v(".NET目前还不支持这个API，需要使用基于XML的配置。")])]),t._v(" "),s("Tab",{attrs:{title:"C++"}},[s("p",[t._v("C++目前还不支持这个API，需要使用基于XML的配置。")])])],1),t._v(" "),s("p",[t._v("在上面的配置中，"),s("code",[t._v("log4j2-config.xml")]),t._v("的路径要么是绝对路径，要么是相对路径，可以相对于"),s("code",[t._v("META-INF")]),t._v("，也可以相对于"),s("code",[t._v("IGNITE_HOME")]),t._v("。在Ignite的二进制包中有一个log4j2配置文件的示例（"),s("code",[t._v("$IGNITE_HOME/config/ignite-log4j2.xml")]),t._v("）。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("Log4j2的配置支持运行时调整，即配置文件的变更会即时生效而不需要重启应用。")])]),t._v(" "),s("h3",{attrs:{id:"_3-5-使用jcl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-使用jcl"}},[t._v("#")]),t._v(" 3.5.使用JCL")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在使用Log4j之前，需要先启用"),s("RouterLink",{attrs:{to:"/doc/java/SettingUp.html#_2-7-启用模块"}},[t._v("ignite-jcl")]),t._v("模块。")],1)]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("注意JCL只是简单地将日志消息转发给底层的日志系统，该日志系统是需要正确配置的，更多的信息，请参见"),s("a",{attrs:{href:"https://commons.apache.org/proper/commons-logging/guide.html#Configuration",target:"_self",rel:"noopener noreferrer"}},[t._v("JCL官方文档")]),t._v("。比如，如果要使用Log4j，就需要把必要的库文件加入类路径中。")])]),t._v(" "),s("p",[t._v("要使用JCL进行日志记录，需要配置"),s("code",[t._v("IgniteConfiguration")]),t._v("的"),s("code",[t._v("gridLogger")]),t._v("属性，如下所示：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"XML"}},[s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ignite.cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("gridLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.logger.jcl.JclLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other properties --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" cfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGridLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JclLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start a node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Info Message Logged!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C#/.NET"}},[s("p",[t._v(".NET目前还不支持这个API，需要使用基于XML的配置。")])]),t._v(" "),s("Tab",{attrs:{title:"C++"}},[s("p",[t._v("C++目前还不支持这个API，需要使用基于XML的配置。")])])],1),t._v(" "),s("h3",{attrs:{id:"_3-6-使用slf4j"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-使用slf4j"}},[t._v("#")]),t._v(" 3.6.使用SLF4J")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("在使用Log4j之前，需要先启用"),s("RouterLink",{attrs:{to:"/doc/java/SettingUp.html#_2-7-启用模块"}},[t._v("ignite-slf4j")]),t._v("模块。")],1)]),t._v(" "),s("p",[t._v("要使用SLF4J进行日志记录，需要配置"),s("code",[t._v("IgniteConfiguration")]),t._v("的"),s("code",[t._v("gridLogger")]),t._v("属性，如下所示：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"XML"}},[s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ignite.cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("gridLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.logger.slf4j.Slf4jLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other properties --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" cfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGridLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Slf4jLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Start a node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Info Message Logged!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"C#/.NET"}},[s("p",[t._v(".NET目前还不支持这个API，需要使用基于XML的配置。")])]),t._v(" "),s("Tab",{attrs:{title:"C++"}},[s("p",[t._v("C++目前还不支持这个API，需要使用基于XML的配置。")])])],1),t._v(" "),s("p",[t._v("更多的信息，请参见"),s("a",{attrs:{href:"https://www.slf4j.org/docs.html",target:"_self",rel:"noopener noreferrer"}},[t._v("SLF4J用户手册")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_3-7-限制敏感信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-限制敏感信息"}},[t._v("#")]),t._v(" 3.7.限制敏感信息")]),t._v(" "),s("p",[t._v("日志可以包括缓存数据、系统属性、启动选项等内容。在某些情况下，这些日志可能包含敏感信息。可以通过将"),s("code",[t._v("IGNITE_TO_STRING_INCLUDE_SENSITIVE")]),t._v("系统属性设置为"),s("code",[t._v("false")]),t._v("来阻止将此类信息写入日志。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("./ignite.sh -J-DIGNITE_TO_STRING_INCLUDE_SENSITIVE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false\n")])])]),s("p",[t._v("请参见"),s("a",{attrs:{href:"#_2-8-%E9%85%8D%E7%BD%AEjvm%E9%80%89%E9%A1%B9"}},[t._v("配置JVM选项")]),t._v("以了解设置系统属性的不同方式。")]),t._v(" "),s("h3",{attrs:{id:"_3-8-日志配置示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-日志配置示例"}},[t._v("#")]),t._v(" 3.8.日志配置示例")]),t._v(" "),s("p",[t._v("下面的步骤可以指导开发者配置日志的过程，这个过程会适用大多数场景。")]),t._v(" "),s("ol",[s("li",[t._v("使用Log4j或者Log4j2作为日志框架，使用方式见前述的说明；")]),t._v(" "),s("li",[t._v("如果使用了默认的配置文件（"),s("code",[t._v("ignite-log4j.xml")]),t._v("或者"),s("code",[t._v("ignite-log4j2.xml")]),t._v("），需要取消"),s("code",[t._v("CONSOLE")]),t._v("appender的注释；")]),t._v(" "),s("li",[t._v("在log4j配置文件中，需要配置日志文件的路径，默认位置为"),s("code",[t._v("${IGNITE_HOME}/work/log/ignite.log")]),t._v("；")]),t._v(" "),s("li",[t._v("使用"),s("code",[t._v("verbose")]),t._v("模式启动节点：\n"),s("ul",[s("li",[t._v("如果使用"),s("code",[t._v("ignite.sh")]),t._v("启动节点，加上"),s("code",[t._v("-v")]),t._v("选项；")]),t._v(" "),s("li",[t._v("如果从Java代码启动节点，需要使用"),s("code",[t._v("IGNITE_QUIET=false")]),t._v("系统变量。")])])])]),t._v(" "),s("h2",{attrs:{id:"_4-资源注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-资源注入"}},[t._v("#")]),t._v(" 4.资源注入")]),t._v(" "),s("h3",{attrs:{id:"_4-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-概述"}},[t._v("#")]),t._v(" 4.1.概述")]),t._v(" "),s("p",[t._v("Ignite中，预定义的资源都是可以进行依赖注入的，同时支持基于属性和基于方法的注入。任何加注正确注解的资源都会在初始化之前注入相对应的任务、作业、闭包或者SPI。")]),t._v(" "),s("h3",{attrs:{id:"_4-2-基于属性和基于方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-基于属性和基于方法"}},[t._v("#")]),t._v(" 4.2.基于属性和基于方法")]),t._v(" "),s("p",[t._v("可以通过在一个属性或者方法上加注注解来注入资源。当加注在属性上时，Ignite只是在注入阶段简单地设置属性的值（不会理会该属性的访问修饰符）。如果在一个方法上加注了资源注解，它会访问一个与注入资源相对应的输入参数的类型，如果匹配，那么在注入阶段，就会将适当的资源作为输入参数，然后调用该方法。")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"基于属性"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ignite")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collection")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("broadcast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteCallable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Inject Ignite instance.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@IgniteInstanceResource")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteCache")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" cache "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrCreateCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CACHE_NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do some stuff with cache.")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"基于方法"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClusterJob")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ComputeJob")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Inject Ignite instance.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@IgniteInstanceResource")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIgnite")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ignite")]),t._v(" ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ignite "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ignite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_4-3-预定义的资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-预定义的资源"}},[t._v("#")]),t._v(" 4.3.预定义的资源")]),t._v(" "),s("p",[t._v("有很多的预定义资源可供注入：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("资源")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("CacheNameResource")])]),t._v(" "),s("td",[t._v("由"),s("code",[t._v("CacheConfiguration.getName()")]),t._v("提供，注入缓存名")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("CacheStoreSessionResource")])]),t._v(" "),s("td",[t._v("注入当前的"),s("code",[t._v("CacheStoreSession")]),t._v("实例")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IgniteInstanceResource")])]),t._v(" "),s("td",[t._v("注入当前的Ignite实例")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("JobContextResource")])]),t._v(" "),s("td",[t._v("注入"),s("code",[t._v("ComputeJobContext")]),t._v("的实例。作业的上下文持有关于一个作业执行的有用的信息。比如，可以获得包含与作业并置的条目的缓存的名字。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("LoadBalancerResource")])]),t._v(" "),s("td",[t._v("注入"),s("code",[t._v("ComputeLoadBalancer")]),t._v("的实例，注入后可以用于任务的负载平衡。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ServiceResource")])]),t._v(" "),s("td",[t._v("通过指定服务名注入Ignite的服务。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("SpringApplicationContextResource")])]),t._v(" "),s("td",[t._v("注入Spring的"),s("code",[t._v("ApplicationContext")]),t._v("资源。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("SpringResource")])]),t._v(" "),s("td",[t._v("从Spring的"),s("code",[t._v("ApplicationContext")]),t._v("注入资源，当希望访问在Spring的ApplicationContext XML配置中指定的一个Bean时，可以用它。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("TaskContinuousMapperResource")])]),t._v(" "),s("td",[t._v("注入一个"),s("code",[t._v("ComputeTaskContinuousMapper")]),t._v("的实例，持续映射可以在任何时点从任务中发布作业，即使过了"),s("em",[t._v("map")]),t._v("的初始化阶段。")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("TaskSessionResource")])]),t._v(" "),s("td",[t._v("注入"),s("code",[t._v("ComputeTaskSession")]),t._v("资源的实例，它为一个特定的任务执行定义了一个分布式的会话。")])])])]),t._v(" "),s("RightPane")],1)}),[],!1,null,null,null);a.default=e.exports}}]);