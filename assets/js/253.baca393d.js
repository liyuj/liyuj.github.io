(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{440:function(t,a,s){"use strict";s.r(a);var e=s(3),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[t._v("#")]),t._v(" 工具")]),t._v(" "),s("h2",{attrs:{id:"_1-控制脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-控制脚本"}},[t._v("#")]),t._v(" 1.控制脚本")]),t._v(" "),s("p",[t._v("Ignite提供了一个命令行脚本"),s("code",[t._v("control.sh|bat")]),t._v("，可以用它来对集群进行监控和管理，该脚本位于安装目录的"),s("code",[t._v("/bin/")]),t._v("文件夹。")]),t._v(" "),s("p",[t._v("控制脚本的语法如下：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("connection parameters"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("arguments"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat <connection parameters> <command> <arguments>")]),t._v("\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_1-1-接入集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-接入集群"}},[t._v("#")]),t._v(" 1.1.接入集群")]),t._v(" "),s("p",[t._v("如果执行脚本时没有连接参数，控制脚本会尝试连接运行在本机的节点（"),s("code",[t._v("localhost:11211")]),t._v("），如果希望接入运行在远程主机上的节点，需要指定连接参数：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("--host HOST_OR_IP")]),t._v(" "),s("td",[t._v("节点的主机名或者IP地址")]),t._v(" "),s("td",[s("code",[t._v("localhost")])])]),t._v(" "),s("tr",[s("td",[t._v("--port PORT")]),t._v(" "),s("td",[t._v("连接端口")]),t._v(" "),s("td",[s("code",[t._v("11211")])])]),t._v(" "),s("tr",[s("td",[t._v("--user USER")]),t._v(" "),s("td",[t._v("用户名")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("--password PASSWORD")]),t._v(" "),s("td",[t._v("密码")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("--ping-interval PING_INTERVAL")]),t._v(" "),s("td",[t._v("ping操作间隔")]),t._v(" "),s("td",[s("code",[t._v("5000")])])]),t._v(" "),s("tr",[s("td",[t._v("--ping-timeout PING_TIMEOUT")]),t._v(" "),s("td",[t._v("ping操作响应超时")]),t._v(" "),s("td",[s("code",[t._v("30000")])])]),t._v(" "),s("tr",[s("td",[t._v("--ssl-protocol PROTOCOL1, PROTOCOL2…​")]),t._v(" "),s("td",[t._v("接入集群时尝试的SSL协议列表，支持的协议在"),s("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSE_Protocols",target:"_self",rel:"noopener noreferrer"}},[t._v("这里")]),t._v("。")]),t._v(" "),s("td",[s("code",[t._v("TLS")])])]),t._v(" "),s("tr",[s("td",[t._v("--ssl-cipher-suites CIPHER1,CIPHER2…​")]),t._v(" "),s("td",[t._v("SSL密码列表，支持的密码在"),s("a",{attrs:{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SupportedCipherSuites",target:"_self",rel:"noopener noreferrer"}},[t._v("这里")]),t._v("。")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("--ssl-key-algorithm ALG")]),t._v(" "),s("td",[t._v("SSL密钥算法")]),t._v(" "),s("td",[s("code",[t._v("SunX509")])])]),t._v(" "),s("tr",[s("td",[t._v("--keystore-type KEYSTORE_TYPE")]),t._v(" "),s("td",[t._v("密钥库类型")]),t._v(" "),s("td",[s("code",[t._v("JKS")])])]),t._v(" "),s("tr",[s("td",[t._v("--keystore KEYSTORE_PATH")]),t._v(" "),s("td",[t._v("密钥库路径，为控制脚本指定密钥库来开启SSL")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("--keystore-password KEYSTORE_PWD")]),t._v(" "),s("td",[t._v("密钥库密码")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("--truststore-type TRUSTSTORE_TYPE")]),t._v(" "),s("td",[t._v("信任库类型")]),t._v(" "),s("td",[s("code",[t._v("JKS")])])]),t._v(" "),s("tr",[s("td",[t._v("--truststore TRUSTSTORE_PATH")]),t._v(" "),s("td",[t._v("信任库路径")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("--truststore-password TRUSTSTORE_PWD")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("信任库密码")])])])]),t._v(" "),s("h3",{attrs:{id:"_1-2-激活、冻结和拓扑管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-激活、冻结和拓扑管理"}},[t._v("#")]),t._v(" 1.2.激活、冻结和拓扑管理")]),t._v(" "),s("p",[t._v("可以使用控制脚本来激活/冻结集群，以及管理"),s("RouterLink",{attrs:{to:"/doc/java/Clustering.html#_7-基线拓扑"}},[t._v("基线拓扑")]),t._v("。")],1),t._v(" "),s("h4",{attrs:{id:"_1-2-1-获取集群状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-获取集群状态"}},[t._v("#")]),t._v(" 1.2.1.获取集群状态")]),t._v(" "),s("p",[t._v("集群可以有3个状态：激活、只读和非激活，具体可以参见"),s("RouterLink",{attrs:{to:"/doc/java/Monitoring.html#_3-集群状态"}},[t._v("集群状态")]),t._v("章节的介绍。")],1),t._v(" "),s("p",[t._v("执行下面的命令，可以获得集群的状态：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --state\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--state")])]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"_1-2-2-激活集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-激活集群"}},[t._v("#")]),t._v(" 1.2.2.激活集群")]),t._v(" "),s("p",[t._v("激活是将当前可用的服务端节点集配置为基线拓扑，只有使用"),s("RouterLink",{attrs:{to:"/doc/java/Persistence.html#_1-ignite持久化"}},[t._v("原生持久化")]),t._v("时才需要激活。")],1),t._v(" "),s("p",[t._v("使用下面的命令可以激活集群。")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --set-state ACTIVE\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--set-state")]),t._v(" ACTIVE")]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"_1-2-3-冻结集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-冻结集群"}},[t._v("#")]),t._v(" 1.2.3.冻结集群")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("冻结会释放所有节点的内存资源，包括应用的数据，并禁用公开的集群API。如果内存中的缓存没有备份到持久化存储（不管是"),s("RouterLink",{attrs:{to:"/doc/java/Persistence.html#_1-ignite持久化"}},[t._v("原生持久化")]),t._v("还是"),s("RouterLink",{attrs:{to:"/doc/java/Persistence.html#_2-外部存储"}},[t._v("外部存储")]),t._v("），会丢失所有的数据，然后需要重新注入缓存数据。")],1)]),t._v(" "),s("p",[t._v("执行下面的命令可以冻结集群：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --set-state INACTIVE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--set-state")]),t._v(" INACTIVE ["),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--yes")]),t._v("]")]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"_1-2-4-获取基线中注册的节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4-获取基线中注册的节点"}},[t._v("#")]),t._v(" 1.2.4.获取基线中注册的节点")]),t._v(" "),s("p",[t._v("执行下面的命令可以获得基线中注册的节点列表：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")])]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("输出中包含了当前的拓扑版本，基线中节点的唯一性ID列表，以及加入集群但是还没有添加到基线的节点列表。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Command [BASELINE] started\nArguments: --baseline\n--------------------------------------------------------------------------------\nCluster state: active\nCurrent topology version: 3\n\nCurrent topology version: 3 (Coordinator: ConsistentId=dd3d3959-4fd6-4dc2-8199-bee213b34ff1, Order=1)\n\nBaseline nodes:\n    ConsistentId=7d79a1b5-cbbd-4ab5-9665-e8af0454f178, State=ONLINE, Order=2\n    ConsistentId=dd3d3959-4fd6-4dc2-8199-bee213b34ff1, State=ONLINE, Order=1\n--------------------------------------------------------------------------------\nNumber of baseline nodes: 2\n\nOther nodes:\n    ConsistentId=30e16660-49f8-4225-9122-c1b684723e97, Order=3\nNumber of other nodes: 1\nCommand [BASELINE] finished with code: 0\nControl utility has completed execution at: 2019-12-24T16:53:08.392865\nExecution time: 333 ms\n")])])]),s("h4",{attrs:{id:"_1-2-5-往基线拓扑中添加节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-5-往基线拓扑中添加节点"}},[t._v("#")]),t._v(" 1.2.5.往基线拓扑中添加节点")]),t._v(" "),s("p",[t._v("使用下面的命令可以往基线拓扑中添加节点。节点加入之后，会开启"),s("RouterLink",{attrs:{to:"/doc/java/DataRebalancing.html"}},[t._v("再平衡过程")]),t._v("。")],1),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" consistentId1,consistentId2,"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")]),t._v(" add consistentId1,consistentId2,... ["),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--yes")]),t._v("]")]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"_1-2-6-从基线拓扑中删除节点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-6-从基线拓扑中删除节点"}},[t._v("#")]),t._v(" 1.2.6.从基线拓扑中删除节点")]),t._v(" "),s("p",[t._v("使用下面的命令可以从基线拓扑中删除节点。只有离线的节点才能从基线拓扑中删除，需要先停止该节点然后才能执行"),s("code",[t._v("remove")]),t._v("命令。这个操作会开启再平衡过程，会在基线拓扑的剩余节点中重新分布数据。")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline remove consistentId1,consistentId2,"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")]),t._v(" remove consistentId1,consistentId2,... ["),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--yes")]),t._v("]")]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"_1-2-7-配置基线拓扑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-7-配置基线拓扑"}},[t._v("#")]),t._v(" 1.2.7.配置基线拓扑")]),t._v(" "),s("p",[t._v("可以通过提供节点的唯一性ID列表，或者通过指定基线拓扑版本来配置基线拓扑。")]),t._v(" "),s("p",[t._v("要将一组节点配置为基线，可以使用下面的命令：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" consistentId1,consistentId2,"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")]),t._v(" set consistentId1,consistentId2,... ["),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--yes")]),t._v("]")]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("要恢复指定版本的基线，可以使用下面的命令：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline version topologyVersion "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")]),t._v(" version topologyVersion ["),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--yes")]),t._v("]")]),t._v("\n")])])])])],1),t._v(" "),s("h4",{attrs:{id:"_1-2-8-启用基线拓扑自动调整"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-8-启用基线拓扑自动调整"}},[t._v("#")]),t._v(" 1.2.8.启用基线拓扑自动调整")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/doc/java/Clustering.html#_7-3-基线拓扑自动调整"}},[t._v("基线拓扑自动调整")]),t._v("是指在拓扑稳定特定时间后自动更新基线拓扑。")],1),t._v(" "),s("p",[t._v("对于纯内存集群，自动调整是默认启用的，并且超时设置为0。这意味着基线拓扑在服务端节点加入或离开集群后立即更改。对于开启持久化的集群，自动调整默认是警用的，使用以下命令可以开启：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline auto_adjust "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30000")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")]),t._v(" auto_adjust enable timeout "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30000")])]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("超时时间以毫秒计，在上一次JOIN/LEFT/FAIL事件之后经过给定的毫秒数时，会将基线设置为当前拓扑。每个新的JOIN/LEFT/FAIL事件都会重新启动超时倒计时。")]),t._v(" "),s("p",[t._v("使用以下命令可以禁用基线自动调整：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --baseline auto_adjust disable\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--baseline")]),t._v(" auto_adjust disable")]),t._v("\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_1-3-事务管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-事务管理"}},[t._v("#")]),t._v(" 1.3.事务管理")]),t._v(" "),s("p",[t._v("控制脚本可以拿到集群中正在执行的事务的信息，也可以取消特定的事务。")]),t._v(" "),s("p",[t._v("下面的命令可以返回匹配过滤条件的事务列表（或者没有过滤条件返回所有的事务）：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("transaction filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --info\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--tx")]),t._v(" <transaction filter> "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--info")])]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("事务过滤器参数在下表列出：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("--xid XID")]),t._v(" "),s("td",[t._v("事务ID")])]),t._v(" "),s("tr",[s("td",[t._v("--min-duration SECONDS")]),t._v(" "),s("td",[t._v("事务已执行的最小秒数")])]),t._v(" "),s("tr",[s("td",[t._v("--min-size SIZE")]),t._v(" "),s("td",[t._v("事务大小最小值")])]),t._v(" "),s("tr",[s("td",[t._v("--label LABEL")]),t._v(" "),s("td",[t._v("事务的标签，可以使用正则表达式")])]),t._v(" "),s("tr",[s("td",[t._v("--servers")]),t._v(" "),s("td",[t._v("--clients")])]),t._v(" "),s("tr",[s("td",[t._v("--nodes nodeId1,nodeId2…​")]),t._v(" "),s("td",[t._v("希望获得事务信息的节点唯一性ID列表")])]),t._v(" "),s("tr",[s("td",[t._v("--limit NUMBER")]),t._v(" "),s("td",[t._v("将事务数限制为指定值")])]),t._v(" "),s("tr",[s("td",[t._v("--order DURATION")]),t._v(" "),s("td",[t._v("SIZE")])])])]),t._v(" "),s("p",[t._v("使用下面的命令可以取消事务：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("transaction filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --kill\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--tx")]),t._v(" <transaction filter> "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--kill")])]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("要取消已运行超过100秒的事务，请执行以下命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tx --min-duration "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" --kill\n")])])]),s("h3",{attrs:{id:"_1-4-事务竞争检测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-事务竞争检测"}},[t._v("#")]),t._v(" 1.4.事务竞争检测")]),t._v(" "),s("p",[s("code",[t._v("contention")]),t._v("命令可用于检测多个事务在相同键上竞争创建锁的情况，当有事务长期运行或者挂起时，该命令很有用。")]),t._v(" "),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reports all keys that are point of contention for at least 5 transactions on all cluster nodes.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache contention "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reports all keys that are point of contention for at least 5 transactions on specific server node.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache contention "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" f2ea-5f56-11e8-9c2d-fa7a\n")])])]),s("p",[t._v("如果存在任何竞争激烈的键，该工具将转储大量信息，包括发生争用的键、事务和节点。")]),t._v(" "),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("TcpDiscoveryNode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("d9620450-eefa-4ab6-a821-644098f00001, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("addrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sockAddrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/127.0.0.1:47501"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("discPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("47501")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("intOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("lastExchangeTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169443913")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("loc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ver")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.5")]),t._v(".0"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#20180518-sha1:02c9b2de, isClient=false]]")]),t._v("\n\n// No contention on node d9620450-eefa-4ab6-a821-644098f00001.\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("TcpDiscoveryNode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("03379796-df31-4dbd-80e5-09cef5000000, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("addrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sockAddrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/127.0.0.1:47500"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("discPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("47500")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("intOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("lastExchangeTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169443913")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("loc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ver")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.5")]),t._v(".0"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#20180518-sha1:02c9b2de, isClient=false]]")]),t._v("\n    TxEntry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cacheId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1544803905")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("KeyCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("part"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("op")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("CREATE, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("UserCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridNearTxLocal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("e9754629361-00000000-0843-9f61-0000-000000000001, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("xidVersion")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridCacheVersion "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topVer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("138649441")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169439646")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("concurrency")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PESSIMISTIC, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("isolation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("REPEATABLE_READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ACTIVE, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("invalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rollbackOnly")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("03379796-df31-4dbd-80e5-09cef5000000, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1247")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("other")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    TxEntry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cacheId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1544803905")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("KeyCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("part"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("op")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("null, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridNearTxLocal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("8a754629361-00000000-0843-9f61-0000-000000000001, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("xidVersion")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridCacheVersion "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topVer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("138649441")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169439656")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("concurrency")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PESSIMISTIC, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("isolation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("REPEATABLE_READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ACTIVE, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("invalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rollbackOnly")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("03379796-df31-4dbd-80e5-09cef5000000, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1175")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("other")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    TxEntry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cacheId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1544803905")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("KeyCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("part"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("op")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("null, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridNearTxLocal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("6a754629361-00000000-0843-9f61-0000-000000000001, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("xidVersion")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridCacheVersion "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topVer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("138649441")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169439654")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("concurrency")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PESSIMISTIC, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("isolation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("REPEATABLE_READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ACTIVE, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("invalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rollbackOnly")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("03379796-df31-4dbd-80e5-09cef5000000, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1175")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("other")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    TxEntry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cacheId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1544803905")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("KeyCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("part"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("op")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("null, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridNearTxLocal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("7a754629361-00000000-0843-9f61-0000-000000000001, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("xidVersion")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridCacheVersion "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topVer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("138649441")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169439655")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("concurrency")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PESSIMISTIC, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("isolation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("REPEATABLE_READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ACTIVE, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("invalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rollbackOnly")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("03379796-df31-4dbd-80e5-09cef5000000, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1175")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("other")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    TxEntry "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cacheId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1544803905")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("KeyCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("part"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("queue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("op")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("null, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridNearTxLocal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("4a754629361-00000000-0843-9f61-0000-000000000001, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("xidVersion")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GridCacheVersion "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("topVer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("138649441")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1527169439652")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeOrder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("concurrency")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PESSIMISTIC, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("isolation")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("REPEATABLE_READ, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ACTIVE, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("invalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rollbackOnly")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("nodeId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("03379796-df31-4dbd-80e5-09cef5000000, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("duration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1175")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("other")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n// Node 03379796-df31-4dbd-80e5-09cef5000000 is place "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" contention on key KeyCacheObjectImpl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("part"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("hasValBytes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".\n")])])]),s("h3",{attrs:{id:"_1-5-缓存状态监控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-缓存状态监控"}},[t._v("#")]),t._v(" 1.5.缓存状态监控")]),t._v(" "),s("p",[t._v("控制脚本的另一个重要命令是"),s("code",[t._v("--cache list")]),t._v("，其用于缓存的监控。该命令可以提供已部署缓存的列表及其关联/分布参数，还有在缓存组内的分布，另外还有一个命令用于查看已有的原子序列。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Displays a list of all caches")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache list "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Displays a list of caches whose names start with "account-".')]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache list account-.*\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Displays info about cache group distribution for all caches.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache list "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" --groups\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Displays info about cache group distribution for the caches whose names start with "account-".')]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache list account-.* --groups\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Displays info about all atomic sequences.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache list "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" --seq\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Displays info about the atomic sequnces whose names start with "counter-".')]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache list counter-.* --seq\n")])])]),s("h3",{attrs:{id:"_1-6-丢失分区重置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-丢失分区重置"}},[t._v("#")]),t._v(" 1.6.丢失分区重置")]),t._v(" "),s("p",[t._v("可以使用控制脚本重置某个缓存丢失的分区，具体请参见"),s("RouterLink",{attrs:{to:"/doc/java/ConfiguringCaches.html#_3-分区丢失策略"}},[t._v("分区丢失策略")]),t._v("。")],1),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --cache reset_lost_partitions cacheName1,cacheName2,"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),s("h3",{attrs:{id:"_1-7-一致性检查命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-一致性检查命令"}},[t._v("#")]),t._v(" 1.7.一致性检查命令")]),t._v(" "),s("p",[s("code",[t._v("control.sh|bat")]),t._v("包括一组一致性检查命令，可用于验证内部数据的一致性。")]),t._v(" "),s("p",[t._v("首先，这些命令可用于调试和故障排除场景，尤其是在开发高峰期。")]),t._v(" "),s("p",[t._v("其次，如果怀疑查询（例如SQL查询等）返回的结果集不完整或错误，则这些命令可以验证数据中是否存在不一致。")]),t._v(" "),s("p",[t._v("最后，一致性检查命令可以用作常规集群运行状况检测的一部分。")]),t._v(" "),s("p",[t._v("下面看下更具体的使用场景：")]),t._v(" "),s("h4",{attrs:{id:"_1-7-1-验证分区校验和"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-1-验证分区校验和"}},[t._v("#")]),t._v(" 1.7.1.验证分区校验和")]),t._v(" "),s("p",[s("code",[t._v("idle_verify")]),t._v("命令将主分区的哈希与备份分区的哈希进行比较，并报告差异。差异可能是更新操作期间节点故障或非正常关闭导致。如果检测到任何不一致之处，建议删除不正确的分区。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Checks partitions of all caches that their partitions actually contain same data.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache idle_verify\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Checks partitions of specific caches that their partitions actually contain same data.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache idle_verify cache1,cache2,cache3\n")])])]),s("p",[t._v("如果有分区出现偏离，则会输出冲突的分区列表，如下所示：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("idle_verify check has finished, found 2 conflict partitions.\n\nConflict partition: PartitionKey [grpId=1544803905, grpName=default, partId=5]\nPartition instances: [PartitionHashRecord [isPrimary=true, partHash=97506054, updateCntr=3, size=3, consistentId=bltTest1], PartitionHashRecord [isPrimary=false, partHash=65957380, updateCntr=3, size=2, consistentId=bltTest0]]\nConflict partition: PartitionKey [grpId=1544803905, grpName=default, partId=6]\nPartition instances: [PartitionHashRecord [isPrimary=true, partHash=97595430, updateCntr=3, size=3, consistentId=bltTest1], PartitionHashRecord [isPrimary=false, partHash=66016964, updateCntr=3, size=2, consistentId=bltTest0]]\n")])])]),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("idle_verify检查期间集群应处于空闲状态")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("idle_verify")]),t._v("计算哈希时，所有的更新应停止，否则可能显示错误的结果。如果正在不停地更新，比较一个分布式系统的大规模数据集是不可能的。")])]),t._v(" "),s("h4",{attrs:{id:"_1-7-2-验证sql索引一致性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-2-验证sql索引一致性"}},[t._v("#")]),t._v(" 1.7.2.验证SQL索引一致性")]),t._v(" "),s("p",[s("code",[t._v("validate_indexes")]),t._v("命令将验证所有集群节点上给定缓存的索引。")]),t._v(" "),s("p",[t._v("验证过程将检查以下内容：")]),t._v(" "),s("ol",[s("li",[t._v("二级SQL索引可以访问主索引引用的所有键-值条目；")]),t._v(" "),s("li",[t._v("主索引引用的所有键-值条目都必须是可访问的，主索引的引用不应指向空值；")]),t._v(" "),s("li",[t._v("主索引可以访问二级SQL索引引用的所有键-值条目。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Checks indexes of all caches on all cluster nodes.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache validate_indexes\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Checks indexes of specific caches on all cluster nodes.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache validate_indexes cache1,cache2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Checks indexes of specific caches on node with given node ID.")]),t._v("\ncontrol.sh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bat --cache validate_indexes cache1,cache2 f2ea-5f56-11e8-9c2d-fa7a\n")])])]),s("p",[t._v("如果索引引用了不存在的条目（或部分条目未被索引），会输出错误，如下所示：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("PartitionKey [grpId=-528791027, grpName=persons-cache-vi, partId=0] ValidateIndexesPartitionResult [updateCntr=313, size=313, isPrimary=true, consistentId=bltTest0]\nIndexValidationIssue [key=0, cacheName=persons-cache-vi, idxName=_key_PK], class org.apache.ignite.IgniteCheckedException: Key is present in CacheDataTree, but can't be found in SQL index.\nIndexValidationIssue [key=0, cacheName=persons-cache-vi, idxName=PERSON_ORGID_ASC_IDX], class org.apache.ignite.IgniteCheckedException: Key is present in CacheDataTree, but can't be found in SQL index.\nvalidate_indexes has finished with errors (listed above).\n")])])]),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("validate_indexes检查期间集群应处于空闲状态")]),t._v(" "),s("p",[t._v("与"),s("code",[t._v("idle_verify")]),t._v("一样，索引验证工具仅在停止更新后才能正常工作。否则检查程序线程与更新条目/索引的线程之间可能会出现竞争，这可能导致错误的检测结果。")])]),t._v(" "),s("h3",{attrs:{id:"_1-8-追踪配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-追踪配置"}},[t._v("#")]),t._v(" 1.8.追踪配置")]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("--tracing-configuration")]),t._v("命令可以启用/禁用某个API的追踪采样，具体请参见"),s("RouterLink",{attrs:{to:"/doc/java/Monitoring.html#_7-追踪"}},[t._v("追踪")]),t._v("章节的介绍。")],1),t._v(" "),s("p",[t._v("使用该命令之前，需要开启控制脚本的试验性功能：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IGNITE_ENABLE_EXPERIMENTAL_COMMAND")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),s("p",[t._v("执行下面的命令可以查看当前的追踪配置：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tracing-configuration\n")])])]),s("p",[t._v("要启用某个API的追踪采样：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tracing-configuration "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" --scope "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --sampling-rate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("rate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --label "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("label"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("参数：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("--scope")])]),t._v(" "),s("td",[t._v("要追踪的API："),s("br"),t._v("1."),s("code",[t._v("DISCOVERY")]),t._v("：发现事件；"),s("br"),t._v("2."),s("code",[t._v("EXCHANGE")]),t._v("：交换事件；"),s("br"),t._v("3."),s("code",[t._v("COMMUNICATION")]),t._v("：通信事件；"),s("br"),t._v("4."),s("code",[t._v("TX")]),t._v("：事务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("--sampling-rate")])]),t._v(" "),s("td",[t._v("概率采样率，介于"),s("code",[t._v("0.0")]),t._v("和"),s("code",[t._v("1.0")]),t._v("之间的数字（包含），"),s("code",[t._v("0")]),t._v("表示不采样（默认），"),s("code",[t._v("1")]),t._v("表示始终采样。例如"),s("code",[t._v("0.5")]),t._v("表示每条追踪都以50％的概率采样")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("--label")])]),t._v(" "),s("td",[t._v("仅适用于"),s("code",[t._v("TX")]),t._v("API范围。该参数定义具有给定标签的事务的采样率。当指定"),s("code",[t._v("--label")]),t._v("参数时，则Ignite将追踪指定标签的事务。可以为不同的标签配置不同的采样率。没有标签的事务追踪将以默认采样率采样，"),s("code",[t._v("TX")]),t._v("范围的默认采样率可以通过不带"),s("code",[t._v("--label")]),t._v("参数的命令进行配置")])])])]),t._v(" "),s("p",[t._v("示例：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("追踪所有的发现事件：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tracing-configuration "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" --scope DISCOVER --sampling-rate "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("追踪所有的事务：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tracing-configuration "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" --scope TX --sampling-rate "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("配置标签为"),s("code",[t._v("report")]),t._v("的事务的采样率为50%：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --tracing-configuration "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" --scope TX --sampling-rate "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"_1-9-集群id和标签"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-集群id和标签"}},[t._v("#")]),t._v(" 1.9.集群ID和标签")]),t._v(" "),s("p",[t._v("集群ID可以唯一标识一个集群，其是在集群第一次启动时自动生成的，具体请参见"),s("RouterLink",{attrs:{to:"/doc/java/Monitoring.html#_2-集群id和标签"}},[t._v("集群ID和标签")]),t._v("章节的内容。")],1),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("--state")]),t._v("命令可查看当前集群的ID：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --state\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--state")])]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("然后检查输出：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Command [STATE] started\nArguments: --state\n--------------------------------------------------------------------------------\nCluster  ID: bf9764ea-995e-4ea9-b35d-8c6d078b0234\nCluster tag: competent_black\n--------------------------------------------------------------------------------\nCluster is active\nCommand [STATE] finished with code: 0\n")])])]),s("p",[t._v("集群标签是可以分配给集群的用户友好名称，使用以下命令可以修改标签（标签不得超过280个字符）：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("control.sh --change-tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("new-tag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("control")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--change-tag")]),t._v(" <new-tag>")]),t._v("\n")])])])])],1),t._v(" "),s("h2",{attrs:{id:"_2-visor终端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-visor终端"}},[t._v("#")]),t._v(" 2.Visor终端")]),t._v(" "),s("h3",{attrs:{id:"_2-1-摘要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-摘要"}},[t._v("#")]),t._v(" 2.1.摘要")]),t._v(" "),s("p",[t._v("Visor命令行接口（CMD）是一个用于Ignite集群监控的命令行工具，它提供有关集群节点、缓存和计算任务的基本统计信息，还可以通过启动或停止节点来管理集群的大小。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/visor-cmd.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2-2-使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用"}},[t._v("#")]),t._v(" 2.2.使用")]),t._v(" "),s("p",[t._v("Ignite通过"),s("code",[t._v("IGNITE_HOME/bin/ignitevisorcmd.{sh|bat}")]),t._v("脚本来启动Visor终端，要将Visor接入集群，需要使用"),s("code",[t._v("open")]),t._v("命令。")]),t._v(" "),s("p",[t._v("Visor支持下面的命令，要获得某个命令完整的信息，可以输入"),s("code",[t._v('help "cmd"')]),t._v("或者"),s("code",[t._v('? "cmd"')]),t._v("。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("别名")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ack")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("所有远程节点的Ack参数")])]),t._v(" "),s("tr",[s("td",[t._v("alert")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("提示用户定义的事件")])]),t._v(" "),s("tr",[s("td",[t._v("cache")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出缓存的统计数据，清理缓存，从缓存输出所有条目的列表")])]),t._v(" "),s("tr",[s("td",[t._v("close")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("将visor从网格断开")])]),t._v(" "),s("tr",[s("td",[t._v("config")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出节点的配置")])]),t._v(" "),s("tr",[s("td",[t._v("deploy")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("将文件或者文件夹复制到远程主机")])]),t._v(" "),s("tr",[s("td",[t._v("disco")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出拓扑变更日志")])]),t._v(" "),s("tr",[s("td",[t._v("events")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("从一个节点输出事件")])]),t._v(" "),s("tr",[s("td",[t._v("gc")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("在远程节点运行GC")])]),t._v(" "),s("tr",[s("td",[t._v("help")]),t._v(" "),s("td",[t._v("?")]),t._v(" "),s("td",[t._v("输出Visor控制台帮助")])]),t._v(" "),s("tr",[s("td",[t._v("kill")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("杀掉或者重启节点")])]),t._v(" "),s("tr",[s("td",[t._v("log")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("启动或者停止网格范围的事件日志")])]),t._v(" "),s("tr",[s("td",[t._v("mclear")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("清除Visor控制台内存变量")])]),t._v(" "),s("tr",[s("td",[t._v("mget")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("获取Visor控制台内存变量")])]),t._v(" "),s("tr",[s("td",[t._v("mlist")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出Visor控制台内存变量")])]),t._v(" "),s("tr",[s("td",[t._v("node")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出节点统计数据")])]),t._v(" "),s("tr",[s("td",[t._v("open")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("将Visor接入网格")])]),t._v(" "),s("tr",[s("td",[t._v("ping")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("ping节点")])]),t._v(" "),s("tr",[s("td",[t._v("quit")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("退出Visor控制台")])]),t._v(" "),s("tr",[s("td",[t._v("start")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("在远程主机启动或者重启节点")])]),t._v(" "),s("tr",[s("td",[t._v("status")]),t._v(" "),s("td",[t._v("!")]),t._v(" "),s("td",[t._v("输出Visor控制台状态")])]),t._v(" "),s("tr",[s("td",[t._v("tasks")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出任务执行统计数据")])]),t._v(" "),s("tr",[s("td",[t._v("top")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("输出当前的拓扑")])]),t._v(" "),s("tr",[s("td",[t._v("vvm")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("打开节点的VisualVM")])])])]),t._v(" "),s("h2",{attrs:{id:"_3-sqlline"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-sqlline"}},[t._v("#")]),t._v(" 3.SQLLine")]),t._v(" "),s("h3",{attrs:{id:"_3-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-概述"}},[t._v("#")]),t._v(" 3.1.概述")]),t._v(" "),s("p",[t._v("Ignite提供了一个"),s("a",{attrs:{href:"http://sqlline.sourceforge.net/",target:"_self",rel:"noopener noreferrer"}},[t._v("SQLLine")]),t._v("工具，它是一个接入关系数据库然后执行SQL命令的基于命令行的工具，本章节会描述如何用SQLLine接入Ignite集群，以及Ignite支持的各种SQLLine命令。")]),t._v(" "),s("h3",{attrs:{id:"_3-2-接入集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-接入集群"}},[t._v("#")]),t._v(" 3.2.接入集群")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("IGNITE_HOME/bin")]),t._v("目录中，执行"),s("code",[t._v("sqlline.sh -u jdbc:ignite:thin:[host]")]),t._v("命令就可以使用SQLLine接入集群，注意要将"),s("code",[t._v("[host]")]),t._v("替换为实际的值，比如：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("./sqlline.sh --verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true -u jdbc:ignite:thin://127.0.0.1/\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sqlline")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--verbose")]),t._v("=true "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("-u")]),t._v(" jdbc:ignite:thin://"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127")]),t._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("."),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/")]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("输入"),s("code",[t._v("./sqlline.sh -h")]),t._v("或者"),s("code",[t._v("./sqlline.sh --help")]),t._v("可以看到可用的各种选项。")]),t._v(" "),s("h4",{attrs:{id:"_3-2-1-认证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-认证"}},[t._v("#")]),t._v(" 3.2.1.认证")]),t._v(" "),s("p",[t._v("如果集群打开了认证，那么在"),s("code",[t._v("IGNITE_HOME/bin")]),t._v("目录中，通过运行"),s("code",[t._v("jdbc:ignite:thin://[address]:[port];user=[username];password=[password]")]),t._v("命令SQLLine才可以接入集群。注意要将"),s("code",[t._v("[address]")]),t._v("，"),s("code",[t._v("[port]")]),t._v("，"),s("code",[t._v("[username]")]),t._v("和`[password]替换为实际值，比如：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"Linux"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("./sqlline.sh --verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true -u "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:ignite:thin://127.0.0.1:10800;user=ignite;password=ignite"')]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Windows"}},[s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sqlline")]),t._v(".bat "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("--verbose")]),t._v("=true "),s("span",{pre:!0,attrs:{class:"token parameter attr-name"}},[t._v("-u")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:ignite:thin://127.0.0.1:10800;user=ignite;password=ignite"')])]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("如果未开启认证，需要忽略"),s("code",[t._v("[username]")]),t._v("和"),s("code",[t._v("[password]")]),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("通过bash接入时JDBC URL要加引号")]),t._v(" "),s("p",[t._v("当在bash环境中接入时连接的URL一定要加"),s("code",[t._v('" "')]),t._v("，比如："),s("code",[t._v('"jdbc:ignite:thin://[address]:[port];user=[username];password=[password]"')]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"_3-3-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-命令"}},[t._v("#")]),t._v(" 3.3.命令")]),t._v(" "),s("p",[t._v("下面是Ignite支持的"),s("a",{attrs:{href:"http://sqlline.sourceforge.net/#commands",target:"_self",rel:"noopener noreferrer"}},[t._v("SQLLine命令")]),t._v("列表：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("!all")])]),t._v(" "),s("td",[t._v("在当前的所有连接中执行指定的SQL")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!batch")])]),t._v(" "),s("td",[t._v("开始执行一批SQL语句")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!brief")])]),t._v(" "),s("td",[t._v("启动简易输出模式")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!closeall")])]),t._v(" "),s("td",[t._v("关闭所有目前已打开的连接")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!columns")])]),t._v(" "),s("td",[t._v("显示表中的列")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!connect")])]),t._v(" "),s("td",[t._v("接入数据库")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!dbinfo")])]),t._v(" "),s("td",[t._v("列出当前连接的元数据信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!dropall")])]),t._v(" "),s("td",[t._v("删除数据库中的所有表")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!go")])]),t._v(" "),s("td",[t._v("转换到另一个活动连接")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!help")])]),t._v(" "),s("td",[t._v("显示帮助信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!history")])]),t._v(" "),s("td",[t._v("显示命令历史")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!indexes")])]),t._v(" "),s("td",[t._v("显示表的索引")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!list")])]),t._v(" "),s("td",[t._v("显示所有的活动连接")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!manual")])]),t._v(" "),s("td",[t._v("显示SQLLine手册")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!metadata")])]),t._v(" "),s("td",[t._v("调用任意的元数据命令")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!nickname")])]),t._v(" "),s("td",[t._v("为连接命名（更新命令提示）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!outputformat")])]),t._v(" "),s("td",[t._v("改变显示SQL结果的方法")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!primarykeys")])]),t._v(" "),s("td",[t._v("显示表的主键列")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!properties")])]),t._v(" "),s("td",[t._v("使用指定的属性文件接入数据库")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!quit")])]),t._v(" "),s("td",[t._v("退出SQLLine")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!reconnect")])]),t._v(" "),s("td",[t._v("重新连接当前的数据库")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!record")])]),t._v(" "),s("td",[t._v("开始记录SQL命令的所有输出")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!run")])]),t._v(" "),s("td",[t._v("执行一个命令脚本")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!script")])]),t._v(" "),s("td",[t._v("将已执行的命令保存到一个文件")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!sql")])]),t._v(" "),s("td",[t._v("在数据库上执行一个SQL")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!tables")])]),t._v(" "),s("td",[t._v("列出数据库中的所有表")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("!verbose")])]),t._v(" "),s("td",[t._v("启动详细输出模式")])])])]),t._v(" "),s("p",[t._v("上面的列表可能不完整，还可能添加支持其它的SQLLine命令。")]),t._v(" "),s("h3",{attrs:{id:"_3-4-示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-示例"}},[t._v("#")]),t._v(" 3.4.示例")]),t._v(" "),s("p",[t._v("接入集群后，就可以执行SQL语句和SQLLine命令，比如：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"创建表"}},[s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": jdbc:ignite:thin:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//127.0.0.1/> CREATE TABLE City (id LONG PRIMARY KEY, name VARCHAR) WITH "template=replicated";')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("No")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rows")]),t._v(" affected "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.301")]),t._v(" seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": jdbc:ignite:thin:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//127.0.0.1/> CREATE TABLE Person (id LONG, name VARCHAR, city_id LONG, PRIMARY KEY (id, city_id))WITH "backups=1, affinityKey=city_id";')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("No")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rows")]),t._v(" affected "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.078")]),t._v(" seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": jdbc:ignite:thin:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//127.0.0.1/> !tables")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------+--------------+--------------+-------------+-------------+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" TABLE_CAT "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" TABLE_SCHEM  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  TABLE_NAME  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" TABLE_TYPE  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" REMARKS     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------+--------------+--------------+-------------+-------------+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PUBLIC")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" CITY         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("             "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PUBLIC")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" PERSON       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("             "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------+--------------+--------------+-------------+-------------+")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"定义索引"}},[s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": jdbc:ignite:thin:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//127.0.0.1/> CREATE INDEX idx_city_name ON City (name);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("No")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rows")]),t._v(" affected "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.039")]),t._v(" seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": jdbc:ignite:thin:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//127.0.0.1/> CREATE INDEX idx_person_name ON Person (name);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("No")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rows")]),t._v(" affected "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.013")]),t._v(" seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(": jdbc:ignite:thin:"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//127.0.0.1/> !indexes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------+--------------+--------------+-------------+-----------------+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" TABLE_CAT "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" TABLE_SCHEM  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  TABLE_NAME  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" NON_UNIQUE  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" INDEX_QUALIFIER "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------+--------------+--------------+-------------+-----------------+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PUBLIC")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" CITY         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PUBLIC")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" PERSON       "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------+--------------+--------------+-------------+-----------------+")]),t._v("\n")])])])])],1),t._v(" "),s("h2",{attrs:{id:"_4-tableau"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-tableau"}},[t._v("#")]),t._v(" 4.Tableau")]),t._v(" "),s("h3",{attrs:{id:"_4-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-概述"}},[t._v("#")]),t._v(" 4.1.概述")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.tableau.com/",target:"_self",rel:"noopener noreferrer"}},[t._v("Tableau")]),t._v("是一个聚焦于商务智能领域的交互式数据可视化工具。它使用ODBC API接入各种数据库和数据平台，然后分析里面的数据。")]),t._v(" "),s("p",[t._v("Ignite有自己的ODBC实现，这样就使从Tableau端接入Ignite成为可能，并且可以分析存储于分布式Ignite集群中的数据。")]),t._v(" "),s("h3",{attrs:{id:"_4-2-安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-安装和配置"}},[t._v("#")]),t._v(" 4.2.安装和配置")]),t._v(" "),s("p",[t._v("要从Tableau接入Ignite，需要进行如下操作：")]),t._v(" "),s("ul",[s("li",[t._v("下载并且安转Tableau桌面版，可以在其"),s("a",{attrs:{href:"http://www.tableau.com/",target:"_self",rel:"noopener noreferrer"}},[t._v("产品主页")]),t._v("查看官方文档；")]),t._v(" "),s("li",[t._v("在Windows或者基于Unix的操作系统上安装Ignite的ODBC驱动；")]),t._v(" "),s("li",[t._v("最后，通过DSN配置驱动，Tableau会通过DSN配置接入；")]),t._v(" "),s("li",[t._v("ODBC驱动通过一个叫做"),s("code",[t._v("ODBC processor")]),t._v("的协议与Ignite集群通信，一定要确保这个组件在集群端已经启用。")])]),t._v(" "),s("p",[t._v("上述步骤完成后，就可以接入集群然后分析数据了。")]),t._v(" "),s("h3",{attrs:{id:"_4-3-接入集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-接入集群"}},[t._v("#")]),t._v(" 4.3.接入集群")]),t._v(" "),s("ol",[s("li",[t._v("启动Tableau应用，然后在"),s("code",[t._v("Connect")]),t._v(" ⇒ "),s("code",[t._v("To a Server")]),t._v(" ⇒ "),s("code",[t._v("More...")]),t._v("窗口中找到"),s("code",[t._v("Other Databases (ODBC)")]),t._v("配置；\n"),s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/tableau-choosing_driver_01.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("Edit connection")]),t._v("链接；\n"),s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/tableau-edit_connection.png",alt:""}})]),t._v(" "),s("li",[t._v("配置之前设定的"),s("code",[t._v("DSN")]),t._v("属性值，下面的示例中为："),s("code",[t._v("LocalApacheIgniteDSN")]),t._v("，做完之后，点击"),s("code",[t._v("Connect")]),t._v("按钮；\n"),s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/tableau-choose_dsn_01.png",alt:""}})]),t._v(" "),s("li",[t._v("Tableau会试图验证这个连接，如果验证通过，"),s("code",[t._v("Sign In")]),t._v("按钮以及其它的与连接有关的字段就会变为可用状态，点击"),s("code",[t._v("Sign In")]),t._v("就会完成连接过程；\n"),s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/tableau-choose_dsn_02.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"_4-4-数据查询和分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-数据查询和分析"}},[t._v("#")]),t._v(" 4.4.数据查询和分析")]),t._v(" "),s("p",[t._v("成功建立Ignite和Tableau之间的连接之后，就可以通过Tableau支持的各种方式对数据进行查询和分析，通过"),s("a",{attrs:{href:"http://www.tableau.com/learn/training",target:"_self",rel:"noopener noreferrer"}},[t._v("官方文档")]),t._v("可以了解更多的细节。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/tableau-creating_dataset.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/tableau-visualizing_data.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_5-informatica"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-informatica"}},[t._v("#")]),t._v(" 5.Informatica")]),t._v(" "),s("h3",{attrs:{id:"_5-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-概述"}},[t._v("#")]),t._v(" 5.1.概述")]),t._v(" "),s("p",[t._v("Informatica是一个云数据管理和集成工具，可以通过ODBC连接将Informatica接入Ignite。")]),t._v(" "),s("h3",{attrs:{id:"_5-2-从informatica-powercenter-designer接入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-从informatica-powercenter-designer接入"}},[t._v("#")]),t._v(" 5.2.从Informatica PowerCenter Designer接入")]),t._v(" "),s("p",[t._v("在PowerCenter Designer中，必须安装32位的Ignite ODBC驱动才能接入Ignite，可以按照下面链接的内容安装ODBC驱动并且创建DSN：")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/doc/java/WorkingwithSQL.html#_10-1-6-1-在windows上安装"}},[t._v("在Windows上安装")]),t._v("；")],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/doc/java/WorkingwithSQL.html#_10-2-4-配置dsn"}},[t._v("配置DSN")]),t._v("。")],1)]),t._v(" "),s("p",[t._v("然后：")]),t._v(" "),s("ol",[s("li",[t._v("如果要从Ignite中导入表，在"),s("code",[t._v("Sources")]),t._v("或者"),s("code",[t._v("Targets")]),t._v("菜单中选择"),s("code",[t._v("Import from Database...")]),t._v("；")]),t._v(" "),s("li",[t._v("通过选择"),s("code",[t._v("Apache Ignite DSN")]),t._v("作为ODBC数据源接入集群。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/informatica-import-tables.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_5-3-在informatica服务节点上安装ignite-odbc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-在informatica服务节点上安装ignite-odbc"}},[t._v("#")]),t._v(" 5.3.在Informatica服务节点上安装Ignite ODBC")]),t._v(" "),s("p",[t._v("在"),s("RouterLink",{attrs:{to:"/doc/java/WorkingwithSQL.html#_10-1-5-3-在linux上构建"}},[t._v("在Linux上构建")]),t._v("和"),s("RouterLink",{attrs:{to:"/doc/java/WorkingwithSQL.html#_10-1-6-2-在linux上安装"}},[t._v("在Linux上安装")]),t._v("文档中，描述了如何在Ignite服务端节点上安装Ignite ODBC。")],1),t._v(" "),s("p",[t._v("Informatica会使用"),s("code",[t._v("$ODBCINI")]),t._v("和"),s("code",[t._v("$ODBCISTINI")]),t._v("环境变量指定的配置文件（"),s("a",{attrs:{href:"https://kb.informatica.com/howto/6/Pages/19/499306.aspx",target:"_self",rel:"noopener noreferrer"}},[t._v("为ODBC配置UNIX环境变量")]),t._v("）。配置Ignite ODBC驱动和创建新的DSN，如下所示：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"odbc.ini"}},[s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[ApacheIgnite]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Driver")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" /usr/local/lib/libignite-odbc.so")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Description")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Apache Ignite ODBC")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Address")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 192.168.0.105")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("User")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" ignite")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Password")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" ignite")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Schema")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" PUBLIC")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"odbcinst.ini"}},[s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[ApacheIgnite]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Driver")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" /usr/local/lib/libignite-odbc.so")]),t._v("\n")])])])])],1),t._v(" "),s("p",[t._v("要验证ODBC连接，可以使用Informatica的"),s("code",[t._v("ssgodbc.linux64")]),t._v("工具，如下所示：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("INFORMATICA_HOME"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/tools/debugtools/ssgodbc/linux64/ssgodbc.linux64 -d ApacheIgnite -u ignite -p ignite -v\n")])])]),s("p",[t._v("如果"),s("code",[t._v("unixODBC")]),t._v("或者Ignite的ODBC库没有安装在默认的目录中-"),s("code",[t._v("/usr/local/lib")]),t._v("，则需要将其加入"),s("code",[t._v("LD_LIBRARY_PATH")]),t._v("然后再次测试，如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("UNIXODBC_LIB")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/unixodbc/lib/\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IGNITE_ODBC_LIB")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/igniteodbc/lib\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LD_LIBRARY_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UNIXODBC_LIB"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IGNITE_ODBC_LIB"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("INFORMATICA_HOME"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/tools/debugtools/ssgodbc/linux64/ssgodbc.linux64 -d ApacheIgnite -u ignite -p ignite -v\n")])])]),s("h3",{attrs:{id:"_5-4-配置相关的连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-配置相关的连接"}},[t._v("#")]),t._v(" 5.4.配置相关的连接")]),t._v(" "),s("p",[t._v("选择"),s("code",[t._v("Connections")]),t._v(">"),s("code",[t._v("Relational...")]),t._v("可以显示"),s("code",[t._v("Relational Connection Browser")]),t._v("。")]),t._v(" "),s("p",[t._v("选中ODBC类型然后创建一个新的连接。\n"),s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/informatica-rel-connection.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_5-5-在suse-11-4中安装ignite-odbc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-在suse-11-4中安装ignite-odbc"}},[t._v("#")]),t._v(" 5.5.在Suse 11.4中安装Ignite ODBC")]),t._v(" "),s("p",[t._v("下面是在Suse 11.4环境中构建Ignite和Ignite ODBC驱动的步骤。")]),t._v(" "),s("ol",[s("li",[t._v("添加仓库 - "),s("code",[t._v("oss")]),t._v("，"),s("code",[t._v("non-oss")]),t._v("，"),s("code",[t._v("openSUSE_Factory")]),t._v("，"),s("code",[t._v("devel_gcc")]),t._v("；")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" ar http://download.opensuse.org/distribution/11.4/repo/oss/ oss\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" ar http://download.opensuse.org/distribution/11.4/repo/non-oss/ non-oss\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" ar https://download.opensuse.org/repositories/devel:/tools:/building/openSUSE_Factory/ openSUSE_Factory\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" ar http://download.opensuse.org/repositories/devel:/gcc/SLE-11/  devel_gcc\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("安装"),s("code",[t._v("automake")]),t._v("和"),s("code",[t._v("autoconf")]),t._v("：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" autoconf automake\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("安装"),s("code",[t._v("libtool")]),t._v("：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libtool-2.4.6-7.1.x86_64\n\nLoading repository data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nReading installed packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nResolving package dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nProblem: nothing provides m4 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.4")]),t._v(".16 needed by libtool-2.4.6-7.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libtool-2.4.6-7.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" libtool-2.4.6-7.1.x86_64 by ignoring some of its dependencies\n\nChoose from above solutions by number or cancel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/2/c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("安装"),s("code",[t._v("OpenSSL")]),t._v("：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" openssl openssl-devel\n\nLoading repository data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nReading installed packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'openssl-devel'")]),t._v(" not found "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" package names. Trying capabilities.\nResolving package dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nProblem: libopenssl-devel-1.0.0c-17.1.x86_64 requires zlib-devel, but this requirement cannot be provided\n  uninstallable providers: zlib-devel-1.2.5-8.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("oss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   zlib-devel-1.2.5-8.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("oss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": downgrade of zlib-1.2.7-0.12.3.x86_64 to zlib-1.2.5-8.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not ask to "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" a solvable providing openssl-devel\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not ask to "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" a solvable providing openssl-devel\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" libopenssl-devel-1.0.0c-17.1.x86_64 by ignoring some of its dependencies\n\nChoose from above solutions by number or cancel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/2/3/4/c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("安装GCC编译器：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zypper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5 gcc5-c++\n\nLoading repository data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nReading installed packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nResolving package dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" Problems:\nProblem: gcc5-5.5.0+r253576-1.1.x86_64 requires libgcc_s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0+r253576-1.1, but this requirement cannot be provided\nProblem: gcc5-c++-5.5.0+r253576-1.1.x86_64 requires gcc5 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0+r253576-1.1, but this requirement cannot be provided\n\nProblem: gcc5-5.5.0+r253576-1.1.x86_64 requires libgcc_s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0+r253576-1.1, but this requirement cannot be provided\n  uninstallable providers: libgcc_s1-5.5.0+r253576-1.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-5.5.0+r253576-1.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-6.4.1+r251631-80.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-6.4.1+r251631-80.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-7.3.1+r258812-103.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-7.3.1+r258812-103.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-8.1.1+r260570-32.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libgcc_s1-8.1.1+r260570-32.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libgcc_s1-8.1.1+r260570-32.1.x86_64 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with vendor change"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  SUSE LINUX Products GmbH, Nuernberg, Germany  --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  obs://build.opensuse.org/devel:gcc\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5-5.5.0+r253576-1.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5-5.5.0+r253576-1.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" gcc5-5.5.0+r253576-1.1.x86_64 by ignoring some of its dependencies\n\nChoose from above solutions by number or skip, retry or cancel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/2/3/4/s/r/c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\nProblem: gcc5-c++-5.5.0+r253576-1.1.x86_64 requires gcc5 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0+r253576-1.1, but this requirement cannot be provided\n  uninstallable providers: gcc5-5.5.0+r253576-1.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   gcc5-5.5.0+r253576-1.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libgomp1-8.1.1+r260570-32.1.x86_64 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with vendor change"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  SUSE LINUX Products GmbH, Nuernberg, Germany  --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  obs://build.opensuse.org/devel:gcc\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5-c++-5.5.0+r253576-1.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5-c++-5.5.0+r253576-1.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" gcc5-c++-5.5.0+r253576-1.1.x86_64 by ignoring some of its dependencies\n\nChoose from above solutions by number or skip, retry or cancel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/2/3/4/s/r/c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nResolving dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nResolving package dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nProblem: gcc5-c++-5.5.0+r253576-1.1.x86_64 requires libstdc++6-devel-gcc5 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0+r253576-1.1, but this requirement cannot be provided\n  uninstallable providers: libstdc++6-devel-gcc5-5.5.0+r253576-1.1.i586"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                   libstdc++6-devel-gcc5-5.5.0+r253576-1.1.x86_64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devel_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libstdc++6-8.1.1+r260570-32.1.x86_64 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with vendor change"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  SUSE LINUX Products GmbH, Nuernberg, Germany  --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  obs://build.opensuse.org/devel:gcc\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5-c++-5.5.0+r253576-1.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc5-c++-5.5.0+r253576-1.1.x86_64\n Solution "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v(" gcc5-c++-5.5.0+r253576-1.1.x86_64 by ignoring some of its dependencies\n\nChoose from above solutions by number or cancel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/2/3/4/c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[t._v("创建编译器执行文件的符号链接：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /usr/bin/gcc\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /usr/bin/g++\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /usr/bin/g++-5 /usr/bin/g++\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /usr/bin/gcc-5 /usr/bin/gcc\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[t._v("通过源码安装unixODBC：从"),s("a",{attrs:{href:"http://www.unixodbc.org/",target:"_self",rel:"noopener noreferrer"}},[t._v("http://www.unixodbc.org/")]),t._v("下载并安装最新的unixODBC（2.3.6或更新的版本）；")]),t._v(" "),s("li",[t._v("检查指定版本的所有依赖库和工具都已经成功安装：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(". libtool --version\nlibtool "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GNU libtool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.4")]),t._v(".6\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(". m4 --version\nm4 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GNU M4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.4")]),t._v(".12\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(". autoconf --version\nautoconf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GNU Autoconf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.69")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(". automake --version\nautomake "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GNU automake"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.16")]),t._v(".1\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(". openssl version\nOpenSSL "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(".0c "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" Dec "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2010")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(". g++ --version\ng++ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SUSE Linux"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".0 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20171010")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("gcc-5-branch revision "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("253640")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(". JDK "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),t._v("\n")])])]),s("ol",{attrs:{start:"9"}},[s("li",[t._v("检查"),s("code",[t._v("JAVA_HOME")]),t._v("环境变量是否配置，然后执行下面的命令：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$IGNITE_HOME")]),t._v("/platforms/cpp\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LDFLAGS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-lrt\n\nlibtoolize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" aclocal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" autoheader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" automake --add-missing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" autoreconf\n./configure --enable-odbc\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("ol",{attrs:{start:"10"}},[s("li",[t._v("成功之后，重启系统；")]),t._v(" "),s("li",[t._v("安装ODBC驱动：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" odbcinst -i -d -f "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$IGNITE_HOME")]),t._v("/platforms/cpp/odbc/install/ignite-odbc-install.ini\n")])])]),s("h2",{attrs:{id:"_6-pentaho"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-pentaho"}},[t._v("#")]),t._v(" 6.Pentaho")]),t._v(" "),s("h3",{attrs:{id:"_6-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-概述"}},[t._v("#")]),t._v(" 6.1.概述")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.pentaho.com/",target:"_self",rel:"noopener noreferrer"}},[t._v("Pentaho")]),t._v("是一个全面的平台，它可以非常容易地对数据进行抽取、转换、可视化和分析。Pentaho数据集成采用Java数据库连接（JDBC）API接入数据库。")]),t._v(" "),s("p",[t._v("Ignite有自己的JDBC驱动，这样就使得通过Pentaho平台接入Ignite成为可能，然后就可以分析分布式Ignite集群中的数据了。")]),t._v(" "),s("h3",{attrs:{id:"_6-2-安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-安装和配置"}},[t._v("#")]),t._v(" 6.2.安装和配置")]),t._v(" "),s("ul",[s("li",[t._v("下载并安装Pentaho平台，具体可以参考官方的"),s("a",{attrs:{href:"https://help.pentaho.com/Documentation/7.1/Installation",target:"_self",rel:"noopener noreferrer"}},[t._v("Pentaho文档")]),t._v(";")]),t._v(" "),s("li",[t._v("安装完成之后，需要使用相关的工具安装Ignite的JDBC驱动，怎么做呢，下载Ignite然后找到"),s("code",[t._v("{apache-ignite}/libs/ignite-core-{version}.jar")]),t._v("，然后将其复制到"),s("code",[t._v("{pentaho}/jdbc-distribution")]),t._v("目录；")]),t._v(" "),s("li",[t._v("打开一个命令行工具，切换到"),s("code",[t._v("{pentaho}/jdbc-distribution")]),t._v("目录然后执行脚本："),s("code",[t._v("./distribute-files.sh ignite-core-{version}.jar")]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"_6-3-jdbc驱动配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-jdbc驱动配置"}},[t._v("#")]),t._v(" 6.3.JDBC驱动配置")]),t._v(" "),s("p",[t._v("下一步是配置JDBC驱动然后接入集群，下面做的都是必要的，"),s("RouterLink",{attrs:{to:"/doc/2.8.0/sql/JDBC.html#_1-1-jdbc-thin模式驱动"}},[t._v("JDBC Thin模式驱动")]),t._v("有更多的细节信息。")],1),t._v(" "),s("ul",[s("li",[t._v("打开命令行工具，切换到"),s("code",[t._v("{pentaho}/design-tools/data-integration")]),t._v("目录，然后使用"),s("code",[t._v("./spoon.sh")]),t._v("脚本启动Pentaho；")]),t._v(" "),s("li",[t._v("出现下面的界面之后，点击"),s("code",[t._v("File")]),t._v("菜单然后创建一个新的转换："),s("code",[t._v("New")]),t._v("->"),s("code",[t._v("Transformation")]),t._v("；")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/pentaho-new-transformation.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("在Pentaho的界面中，填入下面的参数就可以创建一个新的数据库连接：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Pentaho属性名")]),t._v(" "),s("th",[t._v("值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("Connection Name")])]),t._v(" "),s("td",[t._v("比如"),s("code",[t._v("IgniteConnection")]),t._v("这样的自定义名字")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Connection Type")])]),t._v(" "),s("td",[t._v("选择"),s("code",[t._v("Generic database")]),t._v("选项")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Access")])]),t._v(" "),s("td",[t._v("选择"),s("code",[t._v("Native (JDBC)")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Custom Connection URL")])]),t._v(" "),s("td",[s("code",[t._v("jdbc:ignite:thin://localhost:10800")]),t._v("，其中端口和地址可以根据实际进行调整")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("Custom Driver Class Name")])]),t._v(" "),s("td",[s("code",[t._v("org.apache.ignite.IgniteJdbcThinDriver")])])])])]),t._v(" "),s("ul",[s("li",[t._v("点击"),s("code",[t._v("Test")]),t._v("按钮，对连接进行测试")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/pentaho-ignite-connection.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_6-4-数据的查询和分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-数据的查询和分析"}},[t._v("#")]),t._v(" 6.4.数据的查询和分析")]),t._v(" "),s("p",[t._v("Ignite和Pentaho之间建立连接之后，就可以通过Pentaho支持的各种方式对数据进行查询、转换和分析了，更多的细节，可以查看Pentaho的官方文档。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://ignite.apache.org/docs/2.9.0/images/tools/pentaho-running-and-inspecting-data.png",alt:""}})]),t._v(" "),s("RightPane")],1)}),[],!1,null,null,null);a.default=r.exports}}]);