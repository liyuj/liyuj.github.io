(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{361:function(t,a,s){"use strict";s.r(a);var e=s(3),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"安装和部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装和部署"}},[t._v("#")]),t._v(" 安装和部署")]),t._v(" "),s("h2",{attrs:{id:"_1-安装和部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装和部署"}},[t._v("#")]),t._v(" 1.安装和部署")]),t._v(" "),s("p",[t._v("Ignite对部署没有要求，可以非常容易地部署到私有主机或者任意的云环境，比如，Ignite可以独立部署，也可以部署在Kubernetes或者Docker容器中，还有Apache Mesos以及Hadoop Yarn。它可以运行在物理主机中，也可以部署在虚拟机中。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://files.readme.io/8a65d4a-ignite-deploy.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_2-通过zip包安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-通过zip包安装"}},[t._v("#")]),t._v(" 2.通过ZIP包安装")]),t._v(" "),s("p",[t._v("安装Ignite的最通用方法是使用每个版本的二进制ZIP压缩文件。")]),t._v(" "),s("ul",[s("li",[t._v("下载Ignite的最新版本的"),s("a",{attrs:{href:"https://ignite.apache.org/download.cgi#binaries",target:"_self",rel:"noopener noreferrer"}},[t._v("ZIP压缩包")]),t._v("；")]),t._v(" "),s("li",[t._v("将压缩包解压到某个文件夹；")]),t._v(" "),s("li",[t._v("（可选）将"),s("code",[t._v("ignite-rest-http")]),t._v("文件夹从"),s("code",[t._v("{ignite}/libs/optional")]),t._v("移动到"),s("code",[t._v("{ignite}/libs")]),t._v("，以开启Ignite的REST服务，Ignite的Web控制台会使用REST服务进行集群的管理和监控；")]),t._v(" "),s("li",[t._v("（可选）配置"),s("code",[t._v("IGNITE_HOME")]),t._v("环境变量或者配置Windows的PATH，指向Ignite的安装文件夹，注意路径不能以"),s("code",[t._v("/")]),t._v("（Windows中为"),s("code",[t._v("\\")]),t._v("）结尾。")])]),t._v(" "),s("p",[t._v("配置Ignite的工作文件夹：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"XML"}},[s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("workDirectory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/path/to/work/directory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other properties --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"Java"}},[s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),t._v(" igniteCfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nigniteCfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWorkDirectory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/work/directory"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])],1),t._v(" "),s("h2",{attrs:{id:"_3-maven配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-maven配置"}},[t._v("#")]),t._v(" 3.Maven配置")]),t._v(" "),s("h3",{attrs:{id:"_3-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-概述"}},[t._v("#")]),t._v(" 3.1.概述")]),t._v(" "),s("p",[t._v("如果项目里用Maven管理依赖，可以单独地导入各个Ignite模块。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("在下面的例子中，要将"),s("code",[t._v("${ignite.version}")]),t._v("替换为实际使用的版本。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Java 9/10/11")]),t._v(" "),s("p",[t._v("如果使用的是Java 9/10/11，要确认更新了"),s("a",{attrs:{href:"#_3-2-%E5%9C%A8jdk9-10-11%E4%B8%AD%E8%BF%90%E8%A1%8Cignite"}},[t._v("这里")]),t._v("描述的JVM启动参数。")])]),t._v(" "),s("h3",{attrs:{id:"_3-2-常规依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-常规依赖"}},[t._v("#")]),t._v(" 3.2.常规依赖")]),t._v(" "),s("p",[t._v("Ignite强依赖于"),s("code",[t._v("ignite-core.jar")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-core"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("不过很多时候需要其它更多的依赖，比如，要使用Spring配置或者SQL查询等。")]),t._v(" "),s("p",[t._v("下面就是最常用的可选模块：")]),t._v(" "),s("ul",[s("li",[t._v("ignite-indexing（可选，如果需要SQL查询）")]),t._v(" "),s("li",[t._v("ignite-spring（可选，如果需要spring配置）")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-core"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-spring"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ignite-indexing"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${ignite.version}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-3-导入独立模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-导入独立模块"}},[t._v("#")]),t._v(" 3.3.导入独立模块")]),t._v(" "),s("p",[t._v("可以一个个地导入Ignite模块，唯一必须的就是"),s("code",[t._v("ignite-core")]),t._v("，其它的都是可选的，所有可选模块都可以像核心模块一样导入，只是构件Id不同。")]),t._v(" "),s("p",[t._v("现在提供如下模块：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ignite-spring")]),t._v("：基于Spring的配置支持")]),t._v(" "),s("li",[s("code",[t._v("ignite-indexing")]),t._v("：SQL查询和索引")]),t._v(" "),s("li",[s("code",[t._v("ignite-geospatial")]),t._v("：地理位置索引")]),t._v(" "),s("li",[s("code",[t._v("ignite-hibernate")]),t._v("：Hibernate集成")]),t._v(" "),s("li",[s("code",[t._v("ignite-web")]),t._v("：Web Session集群化")]),t._v(" "),s("li",[s("code",[t._v("ignite-schedule")]),t._v("：基于Cron的计划任务")]),t._v(" "),s("li",[s("code",[t._v("ignite-log4j")]),t._v("：Log4j日志")]),t._v(" "),s("li",[s("code",[t._v("ignite-jcl")]),t._v("：Apache Commons logging日志")]),t._v(" "),s("li",[s("code",[t._v("ignite-jta")]),t._v("：XA集成")]),t._v(" "),s("li",[s("code",[t._v("ignite-hadoop2-integration")]),t._v("：HDFS2.0集成")]),t._v(" "),s("li",[s("code",[t._v("ignite-rest-http")]),t._v("：HTTP REST请求")]),t._v(" "),s("li",[s("code",[t._v("ignite-scalar")]),t._v("：Ignite Scalar API")]),t._v(" "),s("li",[s("code",[t._v("ignite-slf4j")]),t._v("：SLF4J日志")]),t._v(" "),s("li",[s("code",[t._v("ignite-ssh")]),t._v("；SSH支持，远程机器上启动网格节点")]),t._v(" "),s("li",[s("code",[t._v("ignite-urideploy")]),t._v("：基于URI的部署")]),t._v(" "),s("li",[s("code",[t._v("ignite-aws")]),t._v("：AWS S3上的无缝集群发现")]),t._v(" "),s("li",[s("code",[t._v("ignite-aop")]),t._v("：网格支持AOP")]),t._v(" "),s("li",[s("code",[t._v("ignite-visor-console")]),t._v("：开源的命令行管理和监控工具")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("构件版本")]),t._v(" "),s("p",[t._v("注意，导入若干Ignite模块时，它们的版本号应该相同，比如，如果使用"),s("code",[t._v("ignite-core")]),t._v("1.8,所有其它的模块也必须导入1.8版本。")])]),t._v(" "),s("h3",{attrs:{id:"_3-4-lgpl依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-lgpl依赖"}},[t._v("#")]),t._v(" 3.4.LGPL依赖")]),t._v(" "),s("p",[t._v("下面的Ignite模块有LGPL依赖，因此无法部署到Maven中央仓库：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ignite-hibernate")])]),t._v(" "),s("li",[s("code",[t._v("ignite-geospatial")])]),t._v(" "),s("li",[s("code",[t._v("ignite-schedule")])])]),t._v(" "),s("p",[t._v("要使用这些模块，需要手工从源代码进行构建然后加入自己的项目，比如，要将"),s("code",[t._v("ignite-hibernate")]),t._v("安装到本地库，可以在Ignite的源代码包中运行如下的命令：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mvn clean "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -DskipTests -Plgpl -pl modules/hibernate -am\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("第三方仓库")]),t._v(" "),s("p",[t._v("GridGain提供自己的"),s("a",{attrs:{href:"http://www.gridgainsystems.com/nexus/content/repositories/external",target:"_self",rel:"noopener noreferrer"}},[t._v("Maven仓库")]),t._v("，包含了Ignite的LGPL构件，比如"),s("code",[t._v("ignite-hibernate")]),t._v("。"),s("br"),t._v("\n注意位于GridGain的Maven库中的构件仅仅为了方便使用，并不是官方的Ignite构件。")])]),t._v(" "),s("h2",{attrs:{id:"_4-rpm和deb包安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-rpm和deb包安装"}},[t._v("#")]),t._v(" 4.RPM和DEB包安装")]),t._v(" "),s("h3",{attrs:{id:"_4-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-概述"}},[t._v("#")]),t._v(" 4.1.概述")]),t._v(" "),s("p",[t._v("Ignite可以通过"),s("a",{attrs:{href:"https://www.apache.org/dist/ignite/rpm",target:"_self",rel:"noopener noreferrer"}},[t._v("RPM")]),t._v("或者"),s("a",{attrs:{href:"https://www.apache.org/dist/ignite/deb",target:"_self",rel:"noopener noreferrer"}},[t._v("DEB")]),t._v("仓库进行安装。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("确认Linux发行版")]),t._v(" "),s("p",[t._v("Ignite的RPM/DEB包，在如下的Linux发行版中进行了验证：")]),t._v(" "),s("ul",[s("li",[t._v("Ubuntu 14.10及以上的版本；")]),t._v(" "),s("li",[t._v("Debian 9.3及以上的版本；")]),t._v(" "),s("li",[t._v("CentOS 7.4.1708及以上的版本")])]),t._v(" "),s("p",[t._v("只要包可以安装，其它的发行版也是支持的。")])]),t._v(" "),s("h3",{attrs:{id:"_4-2-仓库的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-仓库的配置"}},[t._v("#")]),t._v(" 4.2.仓库的配置")]),t._v(" "),s("p",[t._v("配置Ignite的RPM或者DEB仓库，如下所示（如果必要，需要根据提示接受GPG密钥），其中包括了特定发行版的配置：")]),t._v(" "),s("p",[t._v("Debian：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Install dirmngr (if not already installed) for apt-key ability to retrieve remote GPG keys")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" dirmngr --no-install-recommends\n")])])]),s("Tabs",[s("Tab",{attrs:{title:"RPM"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" -c "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cat <<EOF > /etc/yum.repos.d/ignite.repo\n[ignite]\nname=Apache Ignite\nbaseurl=http://apache.org/dist/ignite/rpm/\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=http://apache.org/dist/ignite/KEYS\n       http://bintray.com/user/downloadSubjectPublicKey?username=bintray\nEOF'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum check-update\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"DEB"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" -c "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cat <<EOF > /etc/apt/sources.list.d/ignite.list\ndeb http://apache.org/dist/ignite/deb/ apache-ignite main\nEOF'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 379CE192D401AB61\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_4-3-ignite的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-ignite的安装"}},[t._v("#")]),t._v(" 4.3.Ignite的安装")]),t._v(" "),s("p",[t._v("安装Ignite的最新版：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"RPM"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" apache-ignite\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"DEB"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" apache-ignite --no-install-recommends\n")])])])])],1),t._v(" "),s("p",[t._v("安装后的结构如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("文件夹")]),t._v(" "),s("th",[t._v("映射至")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("/usr/share/apache-ignite")])]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("Ignite安装的根目录")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/usr/share/apache-ignite/bin")])]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("二进制文件文件夹（脚本以及可执行程序）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/etc/apache-ignite")])]),t._v(" "),s("td",[s("code",[t._v("/usr/share/apache-ignite/config")])]),t._v(" "),s("td",[t._v("默认配置文件")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/var/log/apache-ignite")])]),t._v(" "),s("td",[s("code",[t._v("/var/lib/apache-ignite/log")])]),t._v(" "),s("td",[t._v("日志目录")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/usr/lib/apache-ignite")])]),t._v(" "),s("td",[s("code",[t._v("/usr/share/apache-ignite/libs")])]),t._v(" "),s("td",[t._v("核心和可选库")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/var/lib/apache-ignite")])]),t._v(" "),s("td",[s("code",[t._v("/usr/share/apache-ignite/work")])]),t._v(" "),s("td",[t._v("Ignite的工作目录")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/usr/share/doc/2.8.0/apache-ignite")])]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("文档")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/usr/share/license/apache-ignite-<version>")])]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("协议")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("/etc/systemd/system")])]),t._v(" "),s("td"),t._v(" "),s("td",[s("code",[t._v("systemd")]),t._v("服务配置")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-4-将ignite作为服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-将ignite作为服务"}},[t._v("#")]),t._v(" 4.4.将Ignite作为服务")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("如果运行于Windows10 WSL或者Docker，那么需要将Ignite作为一个独立的进程（而不是一个服务），具体可以看下面的章节。")])]),t._v(" "),s("p",[t._v("用一个配置文件启动一个Ignite节点，可以这样做："),s("code",[t._v("sudo systemctl start apache-ignite@<config_name>")]),t._v("，注意这里的"),s("code",[t._v("<config_name>")]),t._v("参数是相对于"),s("code",[t._v("/etc/apache-ignite")]),t._v("文件夹的。")]),t._v(" "),s("p",[t._v("运行Ignite服务：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start apache-ignite@default-config.xml    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# start Ignite service")]),t._v("\njournalctl -fe                                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# check logs")]),t._v("\n")])])]),s("p",[t._v("如果要开启随着系统启动而节点自动重启，如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" apache-ignite@"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("config name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-5-将ignite作为独立进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-将ignite作为独立进程"}},[t._v("#")]),t._v(" 4.5.将Ignite作为独立进程")]),t._v(" "),s("p",[t._v("使用下面的命令可以将Ignite启动为一个独立的进程（先要切换到"),s("code",[t._v("/usr/share/apache-ignite")]),t._v("），如果要修改默认的配置，可以修改"),s("code",[t._v("/etc/apache-ignite/default-config.xml")]),t._v("文件。默认的配置会使用组播IP探测器，如果要使用静态IP探测器，需要修改默认的配置文件，具体参见"),s("RouterLink",{attrs:{to:"/doc/2.8.0/java/Clustering.html#_6-1-tcp-ip发现"}},[t._v("TCP/IP发现")]),t._v("。")],1),t._v(" "),s("p",[t._v("首先，切换到"),s("code",[t._v("ignite")]),t._v("用户，如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u ignite /usr/bin/env "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# switch to ignite user")]),t._v("\n")])])]),s("p",[t._v("然后切换到Ignite的bin文件夹，启动一个节点：")]),t._v(" "),s("Tabs",[s("Tab",{attrs:{title:"默认配置"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/apache-ignite         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# navigate to Ignite home folder")]),t._v("\nbin/ignite.sh                       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# run Ignite with default configuration")]),t._v("\n")])])])]),t._v(" "),s("Tab",{attrs:{title:"自定义配置"}},[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u ignite /usr/bin/env "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# switch to ignite user")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/apache-ignite/bin        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# navigate to Ignite bin folder")]),t._v("\n./ignite.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path_to_custom_config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# start Ignite with custom configuration")]),t._v("\n")])])])])],1),t._v(" "),s("h3",{attrs:{id:"_4-6-在windows10-wsl中运行ignite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-在windows10-wsl中运行ignite"}},[t._v("#")]),t._v(" 4.6.在Windows10 WSL中运行Ignite")]),t._v(" "),s("p",[s("strong",[t._v("网络配置")])]),t._v(" "),s("p",[t._v("在Windows 10 WSL环境下运行Ignite，需要对具有高级安全的Windows防御防火墙进行正确的配置：")]),t._v(" "),s("ul",[s("li",[t._v("运行"),s("code",[t._v("具有高级安全的Windows防御防火墙")]),t._v("；")]),t._v(" "),s("li",[t._v("选择左侧的"),s("code",[t._v("入站规则")]),t._v("菜单；")]),t._v(" "),s("li",[t._v("选择右侧的"),s("code",[t._v("新建规则")]),t._v("菜单；")]),t._v(" "),s("li",[t._v("选择"),s("code",[t._v("程序")]),t._v("复选框然后点击"),s("code",[t._v("下一步")]),t._v("；")]),t._v(" "),s("li",[t._v("在"),s("code",[t._v("程序路径")]),t._v("字段中输入"),s("code",[t._v("%SystemRoot%\\System32\\wsl.exe")]),t._v("，然后点击"),s("code",[t._v("下一步")]),t._v("；")]),t._v(" "),s("li",[t._v("选择"),s("code",[t._v("允许连接")]),t._v("复选框，然后点击"),s("code",[t._v("下一步")]),t._v("；")]),t._v(" "),s("li",[t._v("选择"),s("code",[t._v("域")]),t._v("、"),s("code",[t._v("私有")]),t._v("和"),s("code",[t._v("公开")]),t._v("复选框，然后点击"),s("code",[t._v("下一步")]),t._v("；")]),t._v(" "),s("li",[t._v("在"),s("code",[t._v("名字")]),t._v("字段中输入名字（在"),s("code",[t._v("描述")]),t._v("字段中，也可以可选地写一段描述），然后点击"),s("code",[t._v("完成")]),t._v("。")])]),t._v(" "),s("p",[t._v("这个配置好的规则将允许Windows 10 WSL环境中的Ignite节点暴露于局域网中。")]),t._v(" "),s("p",[s("strong",[t._v("启动Ignite集群")])]),t._v(" "),s("p",[t._v("由于特殊的网络堆栈实现，如果要在一个Windows10 WSL环境中运行多个节点，需要对配置进行自定义（可以看下面的"),s("code",[t._v("wsl-default-config")]),t._v("），启动命令如下："),s("code",[t._v("bin/ignite.sh config/wsl-default-config.xml -J-DNODE=<00..99>")]),t._v("。")]),t._v(" "),s("p",[t._v("wsl-default-config.xml：")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("beans")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("xmlns")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.springframework.org/schema/beans"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xmlns:")]),t._v("xsi")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://www.w3.org/2001/XMLSchema-instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("xsi:")]),t._v("schemaLocation")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("\n        http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("placeholderConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ignite.cfg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.configuration.IgniteConfiguration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("discoverySpi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("localPort"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("475${NODE}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ipFinder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.spi.discovery.tcp.ipfinder.multicast.TcpDiscoveryMulticastIpFinder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("addresses"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("127.0.0.1:47500..47599"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("communicationSpi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("localPort"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("481${NODE}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("beans")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("首先，以"),s("code",[t._v("ignite")]),t._v("用户登录，如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u ignite /usr/bin/env "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),s("p",[t._v("然后转到Ignite的主文件夹，然后在本地启动希望数量的节点（最多100）：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Navigate to Ignite home folder")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/apache-ignite\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run several local nodes")]),t._v("\nbin/ignite.sh config/wsl-default-config.xml -J-DNODE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("00 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\nbin/ignite.sh config/wsl-default-config.xml -J-DNODE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("01 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nbin/ignite.sh config/wsl-default-config.xml -J-DNODE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5-docker部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-docker部署"}},[t._v("#")]),t._v(" 5.Docker部署")]),t._v(" "),s("p",[t._v("Docker可以将Ignite应用及其所有的依赖打包进一个标准的容器，Docker会自动下载Ignite二进制包，将用户的库文件部署进Ignite以及配置节点，它还可以自动启动配置好的Ignite节点，这样的集成方式，使得通过简单地重启Ignite的Docker容器就可以部署新的代码。")]),t._v(" "),s("p",[t._v("要运行一个Docker容器，需要拉取和启动一个Docker镜像，默认会下载最新的版本，在"),s("a",{attrs:{href:"https://hub.docker.com/r/apacheignite/ignite/tags",target:"_self",rel:"noopener noreferrer"}},[t._v("这里")]),t._v("可以看到完整的标签列表。")]),t._v(" "),s("h3",{attrs:{id:"_5-1-下载ignite的docker镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-下载ignite的docker镜像"}},[t._v("#")]),t._v(" 5.1.下载Ignite的Docker镜像")]),t._v(" "),s("p",[t._v("使用下面的命令，可以拉取Ignite的Docker镜像：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pull latest version.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker pull apacheignite/ignite\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pull a specific Ignite version {ignite-version}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker pull apacheignite/ignite:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_5-2-以内存集群模式运行ignite的docker镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-以内存集群模式运行ignite的docker镜像"}},[t._v("#")]),t._v(" 5.2.以内存集群模式运行Ignite的Docker镜像")]),t._v(" "),s("p",[t._v("使用下面的命令可以运行Ignite的Docker镜像：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run latest version.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -it --net"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("host "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONFIG_URI='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CONFIG_URI")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OPTION_LIBS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$OPTION_LIBS")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JVM_OPTS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JVM_OPTS")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\napacheignite/ignite\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run a specific Ignite version")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -it --net"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("host "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONFIG_URI='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CONFIG_URI")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OPTION_LIBS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$OPTION_LIBS")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JVM_OPTS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JVM_OPTS")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\napacheignite/ignite:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("下面的配置参数在docker容器中可以通过环境变量进行传递：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("CONFIG_URI")])]),t._v(" "),s("td",[t._v("Ignite配置文件的URL（也可以相对于类路径的META-INF文件夹），下载的配置文件会保存于"),s("code",[t._v("./ignite-config.xml")])]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://raw.githubusercontent.com/apache/ignite/master/examples/config/example-cache.xml",target:"_self",rel:"noopener noreferrer"}},[t._v("https://raw.githubusercontent.com/apache/ignite/master/examples/config/example-cache.xml")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("OPTION_LIBS")])]),t._v(" "),s("td",[t._v("会被包含在类路径中的可选库")]),t._v(" "),s("td",[s("code",[t._v("ignite-log4j, ignite-spring,ignite-indexing")])]),t._v(" "),s("td",[s("code",[t._v("ignite-aws,ignite-aop")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("JVM_OPTS")])]),t._v(" "),s("td",[t._v("通过docker命令传递给ignite实例的环境变量。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("-Xms1g -Xmx1g -server -XX:+AggressiveOpts -XX:MaxPermSize=256m")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EXTERNAL_LIBS")])]),t._v(" "),s("td",[t._v("库文件URL列表")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("http://central.maven.org/maven2/io/undertow/undertow-servlet/1.3.10.Final/undertow-servlet-1.3.10.Final.jar,http://central.maven.org/maven2/io/undertow/undertow-build-config/1.0.0.Beta24/undertow-build-config-1.0.0.Beta24.jar")])])])])]),t._v(" "),s("h3",{attrs:{id:"_5-3-以持久化集群模式运行ignite的docker镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-以持久化集群模式运行ignite的docker镜像"}},[t._v("#")]),t._v(" 5.3.以持久化集群模式运行Ignite的Docker镜像")]),t._v(" "),s("p",[t._v("如果要使用Ignite的"),s("RouterLink",{attrs:{to:"/doc/2.8.0/java/Persistence.html"}},[t._v("持久化")]),t._v("，Ignite会将用户的数据保存在容器文件系统的默认工作目录（"),s("code",[t._v("{IGNITE_HOME}/work")]),t._v("）下，如果重启容器，该目录会被清空，要避免这个问题，可以这样做：")],1),t._v(" "),s("ul",[s("li",[t._v("使用一个持久化卷来保存数据；")]),t._v(" "),s("li",[t._v("加载一个本地目录。")])]),t._v(" "),s("p",[t._v("下面会详细描述这两个选项：")]),t._v(" "),s("p",[s("strong",[t._v("使用持久化卷")])]),t._v(" "),s("p",[t._v("使用下面的命令可以创建一个持久化卷：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker volume create persistence-volume\n")])])]),s("p",[t._v("在运行Ignite的Docker镜像时，可以将该卷加载到一个特定的目录中，这个目录需要传入Ignite，这可以通过两种方式实现：")]),t._v(" "),s("ul",[s("li",[t._v("使用"),s("code",[t._v("IGNITE_WORK_DIR")]),t._v("系统属性；")]),t._v(" "),s("li",[t._v("在节点的配置文件中。")])]),t._v(" "),s("p",[t._v("下面的命令会启动Ignite的Docker镜像，然后通过系统属性将工作目录传给Ignite：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("docker run -d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v persistence-volume:/persistence "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IGNITE_WORK_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/persistence "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  apacheignite/ignite\n\n")])])]),s("p",[t._v("如果希望通过XML配置文件或者编程的方式配置工作目录，可以通过配置"),s("code",[t._v("IgniteConfiguration.workDirectory")]),t._v("属性实现，一定要注意该属性的值要与上面的"),s("code",[t._v("docker run")]),t._v("命令的"),s("code",[t._v("-v")]),t._v("参数值相一致。")]),t._v(" "),s("p",[s("strong",[t._v("使用本地目录")])]),t._v(" "),s("p",[t._v("如果不创建卷，也可以将一个本地目录加载到运行Ignite镜像的容器中，然后使用这个目录存储持久化数据。当使用相同的命令重启容器时，Ignite会加载已有的数据。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" ignite_work_dir\ndocker run -d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -v "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PWD")]),t._v("}")]),t._v("/ignite_work_dir:/persistence "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -e "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IGNITE_WORK_DIR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/persistence "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  apacheignite/ignite\n")])])]),s("p",[s("code",[t._v("-v")]),t._v("参数会在容器的"),s("code",[t._v("/persistence")]),t._v("目录下加载一个本地目录，"),s("code",[t._v("-e IGNITE_WORK_DIR=/persistence")]),t._v("选项会通知Ignite将这个目录作为工作目录。")]),t._v(" "),s("h3",{attrs:{id:"_5-4-示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-示例"}},[t._v("#")]),t._v(" 5.4.示例")]),t._v(" "),s("p",[t._v("要启动Ignite的docker容器，可以使用如下的命令：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -it --net"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("host -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONFIG_URI=https://raw.githubusercontent.com/apache/ignite/master/examples/config/example-cache.xml"')]),t._v(" apacheignite/ignite\n")])])]),s("p",[t._v("之后应该看到如下的输出日志：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://files.readme.io/ryYtMcSCuGiyVcXN1GCw_dock_git_repo.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_6-aws部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-aws部署"}},[t._v("#")]),t._v(" 6.AWS部署")]),t._v(" "),s("p",[t._v("Ignite的AMI（Amazon机器镜像）可以通过AWS的EC2管理控制台快速配置和部署一个简单的Ignite集群。")]),t._v(" "),s("h3",{attrs:{id:"_6-1-amazon-ec2部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-amazon-ec2部署"}},[t._v("#")]),t._v(" 6.1.Amazon EC2部署")]),t._v(" "),s("ul",[s("li",[t._v("点击下表的链接选择必要的区域：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("区域")]),t._v(" "),s("th",[t._v("镜像")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("US-WEST")])]),t._v(" "),s("td",[s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/home?region=us-west-1#launchAmi=ami-9cdbb3fc",target:"_self",rel:"noopener noreferrer"}},[t._v("ami-9cdbb3fc")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("US-EAST")])]),t._v(" "),s("td",[s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/home?region=us-east-1#launchAmi=ami-ce82caa4",target:"_self",rel:"noopener noreferrer"}},[t._v("ami-ce82caa4")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EU-CENTRAL")])]),t._v(" "),s("td",[s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/home?region=eu-central-1#launchAmi=ami-191b0775",target:"_self",rel:"noopener noreferrer"}},[t._v("ami-191b0775")])])])])]),t._v(" "),s("p",[t._v("或者，也可以使用"),s("code",[t._v("Apache Ignite")]),t._v("关键字在"),s("code",[t._v("Community AMIs")]),t._v("中搜索镜像：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://files.readme.io/faf5b14-search.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("选择一个"),s("code",[t._v("Instance Type")]),t._v(";")]),t._v(" "),s("li",[t._v("打开"),s("code",[t._v("Configure Instance")]),t._v("并且展开"),s("code",[t._v("Advanced Details")]),t._v(";")]),t._v(" "),s("li",[t._v("添加下面的任意配置参数；")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("CONFIG_URI")])]),t._v(" "),s("td",[t._v("Ignite配置文件的URL（也可以相对于类路径的META-INF文件夹），下载的配置文件会保存于./ignite-config.xml")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://raw.githubusercontent.com/apache/ignite/ master/examples/config/example-cache.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("OPTION_LIBS")])]),t._v(" "),s("td",[t._v("会被包含在类路径中的可选库")]),t._v(" "),s("td",[s("code",[t._v("ignite-log4j, ignite-spring,ignite-indexing")])]),t._v(" "),s("td",[s("code",[t._v("ignite-aws,ignite-aop")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("JVM_OPTS")])]),t._v(" "),s("td",[t._v("通过docker命令传递给ignite实例的环境变量。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("-Xms1g -Xmx1g -server -XX:+AggressiveOpts -XX:MaxPermSize=256m")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EXTERNAL_LIBS")])]),t._v(" "),s("td",[t._v("库文件URL列表")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("http://central.maven.org/maven2/io/undertow/undertow-servlet/1.3.10.Final/undertow-servlet-1.3.10.Final.jar,http://central.maven.org/maven2/io/undertow/undertow-build-config/1.0.0.Beta24/undertow-build-config-1.0.0.Beta24.jar")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("Ignite的版本")]),t._v(" "),s("td",[s("code",[t._v("latest")])]),t._v(" "),s("td",[t._v("2.1.0")])])])]),t._v(" "),s("p",[t._v("如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://files.readme.io/0c08e64-advance_details.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("首选Ignite版本")]),t._v(" "),s("p",[t._v("IGNITE_VERSION属性可以视具体情况而定。")])]),t._v(" "),s("ul",[s("li",[t._v("在"),s("code",[t._v("Tag Instance")]),t._v("，设置"),s("code",[t._v("name")]),t._v("标签，比如"),s("code",[t._v("ignite-node")]),t._v(";")]),t._v(" "),s("li",[t._v("复查然后运行实例；")]),t._v(" "),s("li",[t._v("连接实例："),s("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html",target:"_self",rel:"noopener noreferrer"}},[t._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide")]),t._v(";")]),t._v(" "),s("li",[t._v("要查看执行的过程，需要知道容器的id，可以使用如下命令：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n")])])]),s("ul",[s("li",[t._v("显示日志：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker logs -f CONTAINER_ID\n")])])]),s("ul",[s("li",[t._v("进入docker容器：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it container_id /bin/bash\n")])])]),s("h2",{attrs:{id:"_7-google计算部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-google计算部署"}},[t._v("#")]),t._v(" 7.Google计算部署")]),t._v(" "),s("p",[t._v("Ignite的镜像可以通过Google计算控制台快速配置和部署一个简单的Ignite集群。")]),t._v(" "),s("h3",{attrs:{id:"_7-1-google计算部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-google计算部署"}},[t._v("#")]),t._v(" 7.1.Google计算部署")]),t._v(" "),s("ul",[s("li",[t._v("要导入"),s("a",{attrs:{href:"https://storage.googleapis.com/ignite-media/ignite-google-image.tar.gz",target:"_self",rel:"noopener noreferrer"}},[t._v("Ignite镜像")]),t._v("，执行如下的命令：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("gcloud compute images create ignite-image "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n   --source-uri gs://ignite-media/ignite-google-image.tar.gz\n")])])]),s("p",[t._v("要了解更多信息，可以参照"),s("a",{attrs:{href:"https://cloud.google.com/compute/docs/images#import_an_image",target:"_self",rel:"noopener noreferrer"}},[t._v("cloud.google.com")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("打开"),s("code",[t._v("Google Compute Console")]),t._v("；")]),t._v(" "),s("li",[t._v("打开"),s("code",[t._v("Compute->Compute Engine->VM")]),t._v("实例，然后点击"),s("code",[t._v("New instance")]),t._v("；")]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("Boot disk")]),t._v("的"),s("code",[t._v("Change")]),t._v("按钮；")]),t._v(" "),s("li",[t._v("打开"),s("code",[t._v("Custom images")]),t._v("，然后选择已导入的镜像，在下面的截图中，可以看到名为"),s("code",[t._v("ignite-name")]),t._v("的镜像；")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://files.readme.io/e02e235-choose_image.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("点击"),s("code",[t._v("Management, disk, networking, access & security options")]),t._v("，然后可以添加任意的配置参数：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("CONFIG_URI")])]),t._v(" "),s("td",[t._v("Ignite配置文件的URL（也可以相对于类路径的META-INF文件夹），下载的配置文件会保存于./ignite-config.xml")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://raw.githubusercontent.com/apache/ignite/ master/examples/config/example-cache.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("OPTION_LIBS")])]),t._v(" "),s("td",[t._v("会被包含在类路径中的可选库")]),t._v(" "),s("td",[s("code",[t._v("ignite-log4j, ignite-spring,ignite-indexing")])]),t._v(" "),s("td",[s("code",[t._v("ignite-aws,ignite-aop")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("JVM_OPTS")])]),t._v(" "),s("td",[t._v("通过docker命令传递给ignite实例的环境变量。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("-Xms1g -Xmx1g -server -XX:+AggressiveOpts -XX:MaxPermSize=256m")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EXTERNAL_LIBS")])]),t._v(" "),s("td",[t._v("库文件URL列表")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("http://central.maven.org/maven2/io/undertow/undertow-servlet/1.3.10.Final/undertow-servlet-1.3.10.Final.jar,http://central.maven.org/maven2/io/undertow/undertow-build-config/1.0.0.Beta24/undertow-build-config-1.0.0.Beta24.jar")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("Ignite的版本")]),t._v(" "),s("td",[s("code",[t._v("latest")])]),t._v(" "),s("td",[t._v("1.7.0")])])])]),t._v(" "),s("p",[t._v("如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://files.readme.io/1945104-metadata.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("首选Ignite版本")]),t._v(" "),s("p",[t._v("IGNITE_VERSION属性可以视具体情况而定。")])]),t._v(" "),s("ul",[s("li",[t._v("填写必要的属性然后运行实例；")]),t._v(" "),s("li",[t._v("连接实例;")]),t._v(" "),s("li",[t._v("要查看执行的过程，需要知道容器的id，可以使用如下命令：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n")])])]),s("ul",[s("li",[t._v("下面的命令会显示日志：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker logs -f CONTAINER_ID\n")])])]),s("ul",[s("li",[t._v("使用下面的命令可以进入docker容器：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it container_id /bin/bash\n")])])]),s("h2",{attrs:{id:"_8-mesos部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-mesos部署"}},[t._v("#")]),t._v(" 8.Mesos部署")]),t._v(" "),s("h3",{attrs:{id:"_8-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-概述"}},[t._v("#")]),t._v(" 8.1.概述")]),t._v(" "),s("p",[t._v("Apache Ignite支持在Mesos集群上调度和运行Ignite节点。")]),t._v(" "),s("p",[t._v("Apache Mesos是一个集群管理器，它提供了一个通用运行环境以及所有的必要资源来部署、运行和管理分布式应用。它对资源的管理和隔离有助于充分利用服务器资源。")]),t._v(" "),s("p",[t._v("要了解Apache Mesos的更多信息，请参照："),s("a",{attrs:{href:"http://mesos.apache.org/",target:"_self",rel:"noopener noreferrer"}},[t._v("http://mesos.apache.org/")])]),t._v(" "),s("h3",{attrs:{id:"_8-2-ignite-mesos框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-ignite-mesos框架"}},[t._v("#")]),t._v(" 8.2.Ignite Mesos框架")]),t._v(" "),s("p",[t._v("常规部署Apache Ignite集群需要下载Apache Ignite二进制包，修改配置参数以及启动节点。Apache Ignite Mesos框架由"),s("code",[t._v("调度器")]),t._v("和"),s("code",[t._v("任务")]),t._v("组成，可以极大地简化集群的部署。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("调度器")]),t._v("：调度器启动时将自己在Mesos主节点上注册，注册成功之后调度器就会开始处理从Mesos主节点到使用资源的Ignite节点的资源请求，调度器会维护Ignite集群所需（并且可用）的所有资源水平（CPU，内存等）；")]),t._v(" "),s("li",[s("code",[t._v("任务")]),t._v("：在Mesos从节点上启动Ignite节点。")])]),t._v(" "),s("h3",{attrs:{id:"_8-3-运行ignite-mesos框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-运行ignite-mesos框架"}},[t._v("#")]),t._v(" 8.3.运行Ignite Mesos框架")]),t._v(" "),s("p",[t._v("要运行Ignite Mesos框架需要配置好的正在运行的Apache Mesos集群，如果需要如何Apache Mesos集群的信息，请参照："),s("a",{attrs:{href:"https://docs.mesosphere.com/getting-started/datacenter/install/",target:"_self",rel:"noopener noreferrer"}},[t._v("https://docs.mesosphere.com/getting-started/datacenter/install/")]),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("确保主节点和从节点监听正确的IP地址，否则无法保证Mesos集群工作正常。")])]),t._v(" "),s("p",[s("strong",[t._v("通过Marathon运行框架")])]),t._v(" "),s("p",[t._v("目前，建议的做法是通过Marathon运行框架。")]),t._v(" "),s("ul",[s("li",[t._v("安装Marathon，参照："),s("a",{attrs:{href:"https://mesosphere.github.io/marathon/docs/",target:"_self",rel:"noopener noreferrer"}},[t._v("https://mesosphere.github.io/marathon/docs/")]),t._v("marathon章节；")]),t._v(" "),s("li",[t._v("下载Apache Ignite然后将"),s("code",[t._v("libs\\optional\\ignite-mesos\\ignite-mesos-<ignite-version>-jar-with-dependencies.jar")]),t._v("上传到任意一个云存储（比如Amazon S3yun）；")]),t._v(" "),s("li",[t._v("拷贝下面的应用定义（JSON格式）然后保存成"),s("code",[t._v("marathon.json")]),t._v("文件，然后对参数做必要的修改；")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ignition"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"instances"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cpus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mem"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ports"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uris"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://host/ignite-mesos-<ignite-version>.jar"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_NODE_COUNT"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"MESOS_MASTER_URL"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zk://localhost:2181/mesos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_RUN_CPU_PER_NODE"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_MEMORY_PER_NODE"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2048"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_VERSION"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"MESOS_USER"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userAAAAA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"MESOS_ROLE"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cmd"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java -jar ignite-mesos-<ignite-version>.jar"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("角色名必须是有效的目录名，因此如下的格式非法：")]),t._v(" "),s("p",[t._v("1.为空串；\n2.为.或者..;\n3.由"),s("code",[t._v("-")]),t._v("开始；\n4.包含斜杠、退格键以及空白符等。")]),t._v(" "),s("p",[t._v("如果集群没有额外的约束，框架会试图占用Mesos集群的所有资源。")]),t._v(" "),s("ul",[s("li",[t._v("通过curl等工具发送应用定义的POST请求给Marathon：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-type: application/json"')]),t._v(" --data-binary @marathon.json http://"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("marathon-ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":8080/v2/apps/\n")])])]),s("ul",[s("li",[t._v("为了确保Apache Mesos框架正确部署，可以这么做，打开Marathon界面"),s("code",[t._v("http://<marathon-ip>:8080")]),t._v("，确保有一个名为"),s("code",[t._v("ignition")]),t._v("的应用，而且状态是"),s("code",[t._v("Running")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/sTIbAfcdScKoDCSAJ6Q5_marathon.png",alt:""}})]),t._v(" "),s("li",[t._v("打开Mesos控制台"),s("code",[t._v("http://<master-ip>:5050")]),t._v("，如果一切正常那么任务的名字类似"),s("code",[t._v("Ignite node N")]),t._v("，状态是"),s("code",[t._v("RUNNING")]),t._v("。在本示例中，N=4，可以看示例中的"),s("code",[t._v("marathon.json")]),t._v('文件-"IGNITE_NODE_COUNT": "4"；\n'),s("img",{attrs:{src:"https://files.readme.io/WSZ5mvnqQzy0dsUeq9WQ_mesos.png",alt:""}})]),t._v(" "),s("li",[t._v("Mesos支持通过浏览器获得任务的日志，要查看Ignition的日志可以点击"),s("code",[t._v("Active Tasks")]),t._v("表格中的"),s("code",[t._v("Sandbox")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/qUqG485tRtKS50JCp7yn_mesos_sandbox.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("stdout")]),t._v("获取标准输出日志，"),s("code",[t._v("stderr")]),t._v("获取标准错误日志；\n"),s("img",{attrs:{src:"https://files.readme.io/Ch5VkVm1Q5qGvrGEYF4k_mesos_sandbox_stdout.png",alt:""}})])]),t._v(" "),s("p",[s("strong",[t._v("通过jar文件运行框架")])]),t._v(" "),s("ul",[s("li",[t._v("下载Ignite包然后打开"),s("code",[t._v("libs\\optional\\ignite-mesos\\")]),t._v("文件夹；")]),t._v(" "),s("li",[t._v("使用如下命令运行框架：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("java -jar ignite-mesos-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".jar\n")])])]),s("p",[t._v("或者：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("java -jar ignite-mesos-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".jar properties.prop\n")])])]),s("p",[t._v("其中"),s("code",[t._v("properties.prop")]),t._v("是一个属性文件，如果不提供配置文件那么框架会试图占用Mesos集群的所有资源，下面是一个例子：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of nodes in the cluster.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_NODE_COUNT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Mesos ZooKeeper URL to locate leading master.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("MESOS_MASTER_URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("zk://localhost:2181/mesos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of CPU Cores for each Apache Ignite node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_RUN_CPU_PER_NODE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of Megabytes of RAM for each Apache Ignite node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_MEMORY_PER_NODE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("4096")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The version ignite which will be run on nodes.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_VERSION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("1.7.0")]),t._v("\n")])])]),s("ul",[s("li",[t._v("为了确保Apache Mesos框架部署正确，可以打开Mesos控制台"),s("code",[t._v("http://<marathon-ip>:5050")]),t._v("，如果一切正常，名字类似"),s("code",[t._v("Ignite node N")]),t._v("的任务状态应该是"),s("code",[t._v("Running")]),t._v("。在本示例中N=1，可以看示例中的"),s("code",[t._v("properties.prop")]),t._v('文件-"IGNITE_NODE_COUNT": "1"；\n'),s("img",{attrs:{src:"https://files.readme.io/eEmfch9cQcSQiM27gSqT_Mesos_console.png",alt:""}})]),t._v(" "),s("li",[t._v("Mesos可以通过浏览器获得任务的日志，要查看Ignition的日志，可以点击"),s("code",[t._v("Sandbox")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/s6fvlxNcQz66nhq8e9zH_Sandbox.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("stdout")]),t._v("获取标准输出日志，"),s("code",[t._v("stderr")]),t._v("获取标准错误日志；\n"),s("img",{attrs:{src:"https://files.readme.io/MEksCWXBTRq5WpUyp4CJ_stdout.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"_8-4-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-配置"}},[t._v("#")]),t._v(" 8.4.配置")]),t._v(" "),s("p",[t._v("所有配置都是通过环境变量或者配置文件处理的（这非常适用于简化marathon的配置以运行框架），下面的配置参数可以根据需要进行配置：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认值")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("IGNITE_RUN_CPU_PER_NODE")])]),t._v(" "),s("td",[t._v("每个Ignite节点的CPU核数")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("2")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MEMORY_PER_NODE")])]),t._v(" "),s("td",[t._v("每个节点的内存数量（M）")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("1024")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_DISK_SPACE_PER_NODE")])]),t._v(" "),s("td",[t._v("每个节点占用的磁盘容量（M）")]),t._v(" "),s("td",[t._v("1024")]),t._v(" "),s("td",[t._v("2048")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_NODE_COUNT")])]),t._v(" "),s("td",[t._v("集群内的节点数量")]),t._v(" "),s("td",[t._v("5")]),t._v(" "),s("td",[t._v("10")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_TOTAL_CPU")])]),t._v(" "),s("td",[t._v("Ignite集群的CPU核数")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("5")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_TOTAL_MEMORY")])]),t._v(" "),s("td",[t._v("Ignite集群占用的内存（M）")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_TOTAL_DISK_SPACE")])]),t._v(" "),s("td",[t._v("Ignite集群占用的磁盘空间（M）")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("5120")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MIN_CPU_PER_NODE")])]),t._v(" "),s("td",[t._v("要运行Ignite节点所需的CPU核数的最小值")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("4")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MIN_MEMORY_PER_NODE")])]),t._v(" "),s("td",[t._v("要运行Ignite节点所需的内存的最小值（M）")]),t._v(" "),s("td",[t._v("256")]),t._v(" "),s("td",[t._v("1024")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("节点要运行的Ignite的版本")]),t._v(" "),s("td",[t._v("latest")]),t._v(" "),s("td",[t._v("1.6.0")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_WORK_DIR")])]),t._v(" "),s("td",[t._v("保存Ignite二进制包的目录")]),t._v(" "),s("td",[t._v("ignite-release")]),t._v(" "),s("td",[t._v("/opt/ignite/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_XML_CONFIG")])]),t._v(" "),s("td",[t._v("Apache Ignite配置文件的路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/ignite/ignite-config.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_CONFIG_XML_URL")])]),t._v(" "),s("td",[t._v("Apache Ignite配置文件的URL")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://example.com/default-config.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_USERS_LIBS")])]),t._v(" "),s("td",[t._v("要添加到类路径的库文件的路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/libs/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_USERS_LIBS_URL")])]),t._v(" "),s("td",[t._v("要添加到类路径的库文件的URL列表，逗号分割")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://example.com/lib.zip,https://example.com/lib1.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("MESOS_MASTER_URL")])]),t._v(" "),s("td",[t._v("要定位主节点的Mesos Zookeeper的URL")]),t._v(" "),s("td",[t._v("zk://localhost:2181/mesos")]),t._v(" "),s("td",[t._v("zk://176.0.1.45:2181/mesos or 176.0.1.45:2181")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_PACKAGE_URL")])]),t._v(" "),s("td",[t._v("Ignite的压缩包URL，这个参数可以用于替换IGNITE_VERSION参数。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("http://apache-mirror.rbc.ru/pub/apache//ignite/1.7.0/apache-ignite-1.7.0-src.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_PACKAGE_PATH")])]),t._v(" "),s("td",[t._v("Ignite的压缩包路径，这个参数在访问因特网受限时是有用的。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/ignite/apache-ignite-fabric-1.6.0-bin.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_HTTP_SERVER_IDLE_TIMEOUT")])]),t._v(" "),s("td",[t._v("设置一个HTTP连接的最大空闲时间（毫秒），jetty服务器会使用，服务器提供了ignite的mesos框架所需的资源，比如ignite压缩包，用户的库文件，配置等。")]),t._v(" "),s("td",[t._v("30000")]),t._v(" "),s("td",[t._v("30000")])])])]),t._v(" "),s("h2",{attrs:{id:"_9-yarn部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-yarn部署"}},[t._v("#")]),t._v(" 9.Yarn部署")]),t._v(" "),s("h3",{attrs:{id:"_9-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-概述"}},[t._v("#")]),t._v(" 9.1.概述")]),t._v(" "),s("p",[t._v("与Yarn的集成可以支持在Yarn集群上调度和运行Apache Ignite节点。")]),t._v(" "),s("p",[t._v("Yarn是一个资源管理器，它提供了一个包括所有必要资源的通用的运行环境来进行分布式应用的部署，运行和管理，它对资源的管理和隔离有助于充分利用服务器资源。")]),t._v(" "),s("p",[t._v("要了解Yarn的信息，请参照"),s("a",{attrs:{href:"http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html",target:"_self",rel:"noopener noreferrer"}},[t._v("http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_9-2-ignite-yarn应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-ignite-yarn应用"}},[t._v("#")]),t._v(" 9.2.Ignite Yarn应用")]),t._v(" "),s("p",[t._v("部署Apache Ignite集群的典型步骤是下载Ignite的二进制包，修改配置文件以及启动节点。与Yarn的集成可以避免这些操作，Ignite Yarn应用可以极大的简化集群的部署，它由如下组件组成：")]),t._v(" "),s("ul",[s("li",[t._v("下载Ignite二进制包，将必要的资源放入HDFS，创建启动任务的必要的上下文，启动"),s("code",[t._v("ApplicationMaster")]),t._v("进程；")]),t._v(" "),s("li",[s("code",[t._v("Application master")]),t._v("：注册成功之后组件就会开始处理从资源管理器到使用资源的Ignite节点的资源请求，"),s("code",[t._v("Application master")]),t._v("会维护Ignite集群所需的所有资源水平（CPU，内存等）；")]),t._v(" "),s("li",[s("code",[t._v("Container")]),t._v("：在从节点上运行Ignite节点的实体；")])]),t._v(" "),s("h3",{attrs:{id:"_9-3-运行ignite-yarn应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-运行ignite-yarn应用"}},[t._v("#")]),t._v(" 9.3.运行Ignite Yarn应用")]),t._v(" "),s("p",[t._v("要运行Ignite应用，需要配置和运行Yarn和Hadoop集群，要了解如何配置集群的信息，可以参照："),s("a",{attrs:{href:"http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html",target:"_self",rel:"noopener noreferrer"}},[t._v(" http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html")]),t._v(".")]),t._v(" "),s("ul",[s("li",[t._v("下载Ignite；")]),t._v(" "),s("li",[t._v("配置属性文件，修改必要的参数，可以参照下面的"),s("code",[t._v("配置")]),t._v("章节：")])]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of nodes in the cluster.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_NODE_COUNT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("2")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of CPU Cores for each Apache Ignite node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_RUN_CPU_PER_NODE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("1")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of Megabytes of RAM for each Apache Ignite node.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_MEMORY_PER_NODE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("2048")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The version of Ignite which will be run on nodes.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_VERSION")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("2.3.0")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# URL where Ignite distribution can be downloaded from")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("IGNITE_URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("http://mirror.linux-ia64.org/apache/ignite/2.7.0/apache-ignite-2.7.0-bin.zip")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You can also provide a path to unzipped Ignite distribution instead of the URL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# IGNITE_PATH=/ignite/apache-ignite-2.7.0-bin")]),t._v("\n")])])]),s("ul",[s("li",[t._v("运行应用；")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" jar ignite-yarn-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".jar ./ignite-yarn-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".jar cluster.properties\n")])])]),s("ul",[s("li",[t._v("为了确保应用正确部署，可以打开Yarn控制台"),s("code",[t._v("http://<hostname>:8088/cluster")]),t._v("，看名字为"),s("code",[t._v("Ignition")]),t._v("的应用是否工作正常；\n"),s("img",{attrs:{src:"https://files.readme.io/ISnxYZaaSyWC3Z6VP54H_AllApp.png",alt:""}})]),t._v(" "),s("li",[t._v("可以从浏览器获得日志，要查看日志可以点击任意容器的"),s("code",[t._v("Logs")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/y0U5GlGoTUeSl3qc8iMQ_ContainerLogs.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("stdout")]),t._v("获取标准输出日志，"),s("code",[t._v("stderr")]),t._v("获取标准错误日志；\n"),s("img",{attrs:{src:"https://files.readme.io/a3e8yeROWckIihHTWTwp_ContainerStdout.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"_9-4-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-配置"}},[t._v("#")]),t._v(" 9.4.配置")]),t._v(" "),s("p",[t._v("所有的配置都是通过环境变量和属性文件进行的，下面的配置参数可以根据需要进行配置：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认值")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("IGNITE_XML_CONFIG")])]),t._v(" "),s("td",[t._v("指向Apache Ignite配置文件的HDFS路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/ignite/ignite-config.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_WORKING_DIR")])]),t._v(" "),s("td",[t._v("用于保存Ignite二进制包的目录")]),t._v(" "),s("td",[t._v("./ignite-release")]),t._v(" "),s("td",[t._v("/opt/ignite/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_RELEASES_DIR")])]),t._v(" "),s("td",[t._v("保存Ignite二进制包的HDFS路径")]),t._v(" "),s("td",[t._v("/ignite/releases/")]),t._v(" "),s("td",[t._v("/ignite-rel/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_USERS_LIBS")])]),t._v(" "),s("td",[t._v("要添加到CLASSPATH的库文件的HDFS路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/libs/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MEMORY_PER_NODE")])]),t._v(" "),s("td",[t._v("每个Ignite节点占用的内存的大小（M），这个是Java堆的大小，包括了堆内缓存（如果使用了堆内缓存）。")]),t._v(" "),s("td",[t._v("2048")]),t._v(" "),s("td",[t._v("1024")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MEMORY_OVERHEAD_PER_NODE")])]),t._v(" "),s("td",[t._v("所有数据区必要的内存量，包括用于处理JVM本身的负载、用于存储数据的节点，都需要调整，不仅仅是计算。YARN用于容器运行Ignite节点的必要内存量是IGNITE_MEMORY_PER_NODE和IGNITE_MEMORY_OVERHEAD_PER_NODE之和。")]),t._v(" "),s("td",[t._v("IGNITE_MEMORY_PER_NODE * 0.10，最小值384")]),t._v(" "),s("td",[t._v("17408")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_HOSTNAME_CONSTRAINT")])]),t._v(" "),s("td",[t._v("从节点约束")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("192.168.0.[1-100]")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_NODE_COUNT")])]),t._v(" "),s("td",[t._v("集群节点的数量")]),t._v(" "),s("td",[t._v("3")]),t._v(" "),s("td",[t._v("10")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_RUN_CPU_PER_NODE")])]),t._v(" "),s("td",[t._v("每个Ignite节点的CPU核数")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("4")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("节点上运行的Ignite版本")]),t._v(" "),s("td",[t._v("latest")]),t._v(" "),s("td",[t._v("1.0.5")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_PATH")])]),t._v(" "),s("td",[t._v("到Ignite二进制包的HDFS路径，当YARN集群运行在内网无法访问互联网时，这个属性很有用。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/ignite/apache-ignite-fabric-1.7.0-bin.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_URL")])]),t._v(" "),s("td",[t._v("用于下载Ignite二进制包的地址，对于2.7版本，IGNITE_PATH或者IGNITE_URL是必须要有的")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("http://mirror.linux-ia64.org/apache/ignite/2.7.0/apache-ignite-2.7.0-bin.zip")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_JVM_OPTS")])]),t._v(" "),s("td",[t._v("JVM参数")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("-XX:+PrintGC")])])])]),t._v(" "),s("h2",{attrs:{id:"_10-vmware部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-vmware部署"}},[t._v("#")]),t._v(" 10.VMWare部署")]),t._v(" "),s("h3",{attrs:{id:"_10-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-概述"}},[t._v("#")]),t._v(" 10.1.概述")]),t._v(" "),s("p",[t._v("Ignite可以部署于VMWare管理的虚拟和云环境，没有什么和VMWare有关的特性，不过建议将Ignite实例绑定到一个单一专用的主机，这样可以：")]),t._v(" "),s("ul",[s("li",[t._v("避免当Ignite实例与其它应用程序争用主机资源时，导致Ignite集群的性能出现峰值；")]),t._v(" "),s("li",[t._v("确保高可用，如果一台主机宕机并且有两个或者多个Ignite服务端节点绑定到上面，那么可能导致数据丢失。")])]),t._v(" "),s("p",[t._v("下面的内容会说明和Ignite节点迁移有关的vMotion的使用。")]),t._v(" "),s("h3",{attrs:{id:"_10-2-使用vmotion进行节点迁移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-使用vmotion进行节点迁移"}},[t._v("#")]),t._v(" 10.2.使用vMotion进行节点迁移")]),t._v(" "),s("p",[t._v("vMotion可以将一个在线的实例从一台主机迁移到另一台，但是迁移之后Ignite依赖的一些基本要求要得到满足：")]),t._v(" "),s("ul",[s("li",[t._v("新主机有相同的内存状态；")]),t._v(" "),s("li",[t._v("新主机有相同的磁盘状态（或新主机使用相同的磁盘）；")]),t._v(" "),s("li",[t._v("IP地址、可用的端口以及其它的网络参数没有变化；")]),t._v(" "),s("li",[t._v("所有的网络资源可用，TCP连接没有中断。")])]),t._v(" "),s("p",[t._v("如果vMotion按照上述规则设置并工作，则Ignite节点将正常工作。")]),t._v(" "),s("p",[t._v("不过vMotion迁移将影响Ignite实例的性能。在传输过程中，许多资源（主要是CPU和网络）将服务于vMotion的需要。")]),t._v(" "),s("p",[t._v("为了避免集群一段时间内的性能下降甚至无响应，建议如下：")]),t._v(" "),s("ul",[s("li",[t._v("在Ignite集群的低活跃和负载期间执行迁移。这确保了更快的传输，同时对集群性能影响最小；")]),t._v(" "),s("li",[t._v("避免自动迁移（DRS的完全自动迁移），让IT专家决定迁移Ignite实例的最佳时机；")]),t._v(" "),s("li",[t._v("如果必须迁移多个节点，则需要一个个按顺序地执行节点的迁移；")]),t._v(" "),s("li",[t._v("将"),s("code",[t._v("IgniteConfiguration.failureDetectionTimeout")]),t._v("参数设置为高于Ignite实例的可能停机时间的值。这是因为当剩下一小块状态要传输时，vMotion将停止Ignite实例的CPU。假定传输该数据块需要"),s("code",[t._v("X")]),t._v("时间，那么"),s("code",[t._v("IgniteConfiguration.failureDetectionTimeout")]),t._v("必须大于"),s("code",[t._v("X")]),t._v("；否则节点将从集群中删除；")]),t._v(" "),s("li",[t._v("使用高吞吐量网络。最好vMotion迁移器和Ignite集群使用不同的网络来避免网络饱和；")]),t._v(" "),s("li",[t._v("优先选择内存较少的节点，较小内存的Ignite实例确保更快的vMotion迁移，更快的迁移确保Ignite集群更稳定的操作；")]),t._v(" "),s("li",[t._v("如果业务允许，甚至可以考虑在Ignite实例停机时进行迁移。假设集群中的其它节点上有数据的备份副本，则可以先将该节点关闭，然后在vMotion迁移结束后恢复该节点，这样和在线迁移相比，可能总体性能更好（集群的性能和vMotion传输时间）。")])]),t._v(" "),s("RightPane")],1)}),[],!1,null,null,null);a.default=n.exports}}]);