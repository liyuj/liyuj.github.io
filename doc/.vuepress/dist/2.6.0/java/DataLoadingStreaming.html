<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>5.数据注入和流处理</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.b473d3ab.css" as="style"><link rel="preload" href="/assets/js/app.53dd0248.js" as="script"><link rel="preload" href="/assets/js/15.eb64c1d5.js" as="script"><link rel="prefetch" href="/assets/js/10.629160f8.js"><link rel="prefetch" href="/assets/js/100.8dd41c82.js"><link rel="prefetch" href="/assets/js/11.3ae3899e.js"><link rel="prefetch" href="/assets/js/12.5eea5fa7.js"><link rel="prefetch" href="/assets/js/13.814cf144.js"><link rel="prefetch" href="/assets/js/14.27bf9273.js"><link rel="prefetch" href="/assets/js/16.b8fd3ac5.js"><link rel="prefetch" href="/assets/js/17.6d72ceaa.js"><link rel="prefetch" href="/assets/js/18.ded6af2d.js"><link rel="prefetch" href="/assets/js/19.7dc3ecdc.js"><link rel="prefetch" href="/assets/js/2.82c623fb.js"><link rel="prefetch" href="/assets/js/20.13a8ea33.js"><link rel="prefetch" href="/assets/js/21.2d8f264c.js"><link rel="prefetch" href="/assets/js/22.a3e293d9.js"><link rel="prefetch" href="/assets/js/23.bf9aba6e.js"><link rel="prefetch" href="/assets/js/24.26ebce5a.js"><link rel="prefetch" href="/assets/js/25.b41b81b0.js"><link rel="prefetch" href="/assets/js/26.45147931.js"><link rel="prefetch" href="/assets/js/27.e25bc550.js"><link rel="prefetch" href="/assets/js/28.29be7cc5.js"><link rel="prefetch" href="/assets/js/29.7db78037.js"><link rel="prefetch" href="/assets/js/3.16a62f01.js"><link rel="prefetch" href="/assets/js/30.3223c2eb.js"><link rel="prefetch" href="/assets/js/31.1d38e4bb.js"><link rel="prefetch" href="/assets/js/32.95bcb255.js"><link rel="prefetch" href="/assets/js/33.fe204e0d.js"><link rel="prefetch" href="/assets/js/34.6a081c8a.js"><link rel="prefetch" href="/assets/js/35.e3f2095e.js"><link rel="prefetch" href="/assets/js/36.b15e9b49.js"><link rel="prefetch" href="/assets/js/37.238f3eb8.js"><link rel="prefetch" href="/assets/js/38.0a5e78b8.js"><link rel="prefetch" href="/assets/js/39.0fcea5ab.js"><link rel="prefetch" href="/assets/js/4.09795317.js"><link rel="prefetch" href="/assets/js/40.9d3805de.js"><link rel="prefetch" href="/assets/js/41.241989d7.js"><link rel="prefetch" href="/assets/js/42.f81cd3e4.js"><link rel="prefetch" href="/assets/js/43.44b41407.js"><link rel="prefetch" href="/assets/js/44.d2b58ee5.js"><link rel="prefetch" href="/assets/js/45.84e6dc48.js"><link rel="prefetch" href="/assets/js/46.121b15a3.js"><link rel="prefetch" href="/assets/js/47.d26a7115.js"><link rel="prefetch" href="/assets/js/48.8e1168fc.js"><link rel="prefetch" href="/assets/js/49.99b7227e.js"><link rel="prefetch" href="/assets/js/5.83f9a4bc.js"><link rel="prefetch" href="/assets/js/50.3e4ea217.js"><link rel="prefetch" href="/assets/js/51.5b29294d.js"><link rel="prefetch" href="/assets/js/52.b88a3b5d.js"><link rel="prefetch" href="/assets/js/53.1b185c21.js"><link rel="prefetch" href="/assets/js/54.58426c6e.js"><link rel="prefetch" href="/assets/js/55.7ab1c65d.js"><link rel="prefetch" href="/assets/js/56.12afb1ea.js"><link rel="prefetch" href="/assets/js/57.c73d6313.js"><link rel="prefetch" href="/assets/js/58.60ff3bef.js"><link rel="prefetch" href="/assets/js/59.c0f33441.js"><link rel="prefetch" href="/assets/js/6.9557d6ac.js"><link rel="prefetch" href="/assets/js/60.c20ede71.js"><link rel="prefetch" href="/assets/js/61.87c33cdc.js"><link rel="prefetch" href="/assets/js/62.5bfe9f57.js"><link rel="prefetch" href="/assets/js/63.43ce1725.js"><link rel="prefetch" href="/assets/js/64.40e55d8a.js"><link rel="prefetch" href="/assets/js/65.0ef2261c.js"><link rel="prefetch" href="/assets/js/66.2d2385c6.js"><link rel="prefetch" href="/assets/js/67.ab14fb75.js"><link rel="prefetch" href="/assets/js/68.bfe208fb.js"><link rel="prefetch" href="/assets/js/69.84ea4b5c.js"><link rel="prefetch" href="/assets/js/7.f4c076d8.js"><link rel="prefetch" href="/assets/js/70.ce385281.js"><link rel="prefetch" href="/assets/js/71.15058880.js"><link rel="prefetch" href="/assets/js/72.362628d3.js"><link rel="prefetch" href="/assets/js/73.5049f712.js"><link rel="prefetch" href="/assets/js/74.0b17fabc.js"><link rel="prefetch" href="/assets/js/75.e80e5cd9.js"><link rel="prefetch" href="/assets/js/76.e55635e8.js"><link rel="prefetch" href="/assets/js/77.74e0006a.js"><link rel="prefetch" href="/assets/js/78.c45b8b13.js"><link rel="prefetch" href="/assets/js/79.3bac2928.js"><link rel="prefetch" href="/assets/js/8.ce6bd56a.js"><link rel="prefetch" href="/assets/js/80.54dc2d57.js"><link rel="prefetch" href="/assets/js/81.ae36540a.js"><link rel="prefetch" href="/assets/js/82.82b6f620.js"><link rel="prefetch" href="/assets/js/83.a48b249e.js"><link rel="prefetch" href="/assets/js/84.0db96720.js"><link rel="prefetch" href="/assets/js/85.d6c6f40e.js"><link rel="prefetch" href="/assets/js/86.ed566c04.js"><link rel="prefetch" href="/assets/js/87.ea8bb864.js"><link rel="prefetch" href="/assets/js/88.0002226c.js"><link rel="prefetch" href="/assets/js/89.ed9dd008.js"><link rel="prefetch" href="/assets/js/9.cf32c538.js"><link rel="prefetch" href="/assets/js/90.da0276d6.js"><link rel="prefetch" href="/assets/js/91.18376f61.js"><link rel="prefetch" href="/assets/js/92.bf23c8b6.js"><link rel="prefetch" href="/assets/js/93.a4737653.js"><link rel="prefetch" href="/assets/js/94.7127c03e.js"><link rel="prefetch" href="/assets/js/95.7eef57a8.js"><link rel="prefetch" href="/assets/js/96.3fa99fdb.js"><link rel="prefetch" href="/assets/js/97.968f6f05.js"><link rel="prefetch" href="/assets/js/98.52358adc.js"><link rel="prefetch" href="/assets/js/99.4ad86e2e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b473d3ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="_5-数据注入和流处理"><a href="#_5-数据注入和流处理" aria-hidden="true" class="header-anchor">#</a> 5.数据注入和流处理</h1> <h2 id="_5-1-数据注入和流处理"><a href="#_5-1-数据注入和流处理" aria-hidden="true" class="header-anchor">#</a> 5.1.数据注入和流处理</h2> <p>Ignite数据加载和流处理功能可以以可扩展以及容错的方式处理持续不断的数据流或者在集群中预加载初始数据。在一个中等规模的集群中，数据注入Ignite或者预加载数据的速度可以很高，甚至轻易地达到每秒处理百万级的事件。</p> <p><strong>数据加载</strong></p> <p>从像Ignite持久化存储或者第三方存储这样的数据源中进行数据的预加载，在下面的<code>5.2.数据加载</code>章节中有详细描述。</p> <p><strong>工作方式</strong></p> <ol><li>客户端节点通过Ignite数据流处理器向Ignite缓存中注入有限的或者持续的数据流；</li> <li>数据在Ignite数据节点间自动分区，每个节点持有均等的数据量；</li> <li>数据流可以在Ignite数据节点上以并置的方式直接并行处理；</li> <li>客户端也可以在数据流上执行并发的SQL查询。</li></ol> <p><img src="https://files.readme.io/2994b21-ignite-stream-query.png" alt></p> <p><strong>数据流处理器</strong>
数据流处理器是通过<code>IgniteDataStreamer</code>API定义的，他可以往Ignite数据流缓存中注入大量的持续不断的数据流，数据流处理器对于所有流入Ignite的数据以可扩展和容错的方式提供了<strong>至少一次保证</strong>。
<strong>查询数据</strong>
可以和Ignite的SQL、TEXT以及基于谓词的缓存查询一起使用Ignite数据索引能力的全部功能来在数据流中进行查询。
<strong>与已有的流处理技术集成</strong>
Ignite可以与各种主要的流处理技术和kuaig进行集成，比如Kafka、Camel、Storm或者JMS，从而为基于Ignite的架构带来更强大的流处理功能。</p> <h2 id="_5-2-数据加载"><a href="#_5-2-数据加载" aria-hidden="true" class="header-anchor">#</a> 5.2.数据加载</h2> <h3 id="_5-2-1-摘要"><a href="#_5-2-1-摘要" aria-hidden="true" class="header-anchor">#</a> 5.2.1.摘要</h3> <p>用标准的缓存<code>put(...)</code>和<code>putAll(...)</code>操作加载大量的数据通常是比较低效的。Ignite提供了<code>IgniteDataStreamer</code>API来与主要的流技术集成，还有<code>CacheStore</code>API，他们有助于以一个更高效的方式将大量数据注入Ignite缓存。</p> <h3 id="_5-2-2-ignitedatastreamer"><a href="#_5-2-2-ignitedatastreamer" aria-hidden="true" class="header-anchor">#</a> 5.2.2.IgniteDataStreamer</h3> <p>数据流处理器是通过<code>IgniteDataStreamer</code>API定义的，他可以将大量的连续数据注入Ignite缓存。数据流处理器以可扩展和容错的方式在数据被发送到集群节点之前通过把批量数据放在一起以获得高性能。</p> <blockquote><p>数据流处理器可以用于任何时候将大量数据载入缓存，包括启动时的预加载。</p></blockquote> <p>想了解更多信息请参照<code>5.3.数据流处理器</code>。</p> <h3 id="_5-2-3-ignitecache-loadcache"><a href="#_5-2-3-ignitecache-loadcache" aria-hidden="true" class="header-anchor">#</a> 5.2.3.IgniteCache.loadCache()</h3> <p>如果数据由第三方数据库持久化，Ignite需要将数据从磁盘上预加载到内存中，应用才能使用SQL等更高级的功能。</p> <blockquote><p><strong>Ignite原生持久化</strong>
Ignite的原生持久化不需要在重启时将数据预热到内存，因此，与IgniteCache.loadCache()有关的加载技术和这种类型的持久化存储没什么关系。</p></blockquote> <p>要从比如关系数据库这样的第三方存储中预加载大量的数据可以使用<code>CacheStore.loadCache()</code>方法，他可以在不传入要加载的所有键的情况下进行缓存的数据加载。
在所有保存该缓存的每一个集群节点上<code>IgniteCache.loadCache()</code>方法会委托给<code>CacheStore.loadCache()</code>方法，如果只想在本地节点上加载，可以用<code>IgniteCache.localLoadCache()</code>方法。</p> <blockquote><p>对于分区缓存以及像关系数据库这样的第三方存储，如果键没有映射到某个节点，不管是主节点还是备份节点，都会被自动忽略。
这与Ignite持久化存储无关，因为每个节点只会存储属于它的数据。</p></blockquote> <p>下面是一个第三方存储的<code>CacheStore.loadCache()</code>实现的例子，对于<code>CacheStore</code>的完整例子，可以参照<a href="/doc/2.6.0/java/Persistence.html#_16-4-第三方存储">第三方存储</a>章节。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CacheJdbcPersonStore</span> <span class="token keyword">extends</span> <span class="token class-name">CacheStoreAdapter</span><span class="token generics function"><span class="token punctuation">&lt;</span>Long<span class="token punctuation">,</span> Person<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// This method is called whenever &quot;IgniteCache.loadCache()&quot; or</span>
  <span class="token comment">// &quot;IgniteCache.localLoadCache()&quot; methods are called.</span>
  <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadCache</span><span class="token punctuation">(</span>IgniteBiInClosure<span class="token generics function"><span class="token punctuation">&lt;</span>Long<span class="token punctuation">,</span> Person<span class="token punctuation">&gt;</span></span> clo<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>args <span class="token operator">==</span> null <span class="token operator">||</span> args<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> null<span class="token punctuation">)</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CacheLoaderException</span><span class="token punctuation">(</span><span class="token string">&quot;Expected entry count parameter is not provided.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token keyword">int</span> entryCnt <span class="token operator">=</span> <span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    Connection conn <span class="token operator">=</span> null<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">(</span>Connection conn <span class="token operator">=</span> <span class="token function">connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">(</span>PreparedStatement st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;select * from PERSONS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>ResultSet rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

          <span class="token keyword">while</span> <span class="token punctuation">(</span>cnt <span class="token operator">&lt;</span> entryCnt <span class="token operator">&amp;&amp;</span> rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            clo<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>

            cnt<span class="token operator">++</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CacheLoaderException</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to load values from cache store.&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>分区感知的数据加载</strong>
在上面描述的<strong>第三方存储</strong>场景中同样的查询会在所有节点上执行，每个节点会迭代所有的结果集，忽略掉不属于该节点的所有键，效率不是很高。如果数据库中的每条记录都保存分区ID的话这个情况会有所改善。可以通过<code>org.apache.ignite.cache.affinity.Affinity</code>接口来获得要存储在缓存中的任何键的分区ID。
下面的代码片段可以获得每个要存储在缓存中的<code>Person</code>对象的分区ID。</p> <div class="language-java extra-class"><pre class="language-java"><code>IgniteCache cache <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span><span class="token punctuation">;</span>
Affinity aff <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">affinity</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> personId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> personId <span class="token operator">&lt;</span> PERSONS_CNT<span class="token punctuation">;</span> personId<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Get partition ID for the key under which person is stored in cache.</span>
    <span class="token keyword">int</span> partId <span class="token operator">=</span> aff<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>personId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
    Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>personId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    person<span class="token punctuation">.</span><span class="token function">setPartitionId</span><span class="token punctuation">(</span>partId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Fill other fields.</span>
  
    cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>personId<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当Person对象知道自己的分区ID，每个节点就可以只查询属于自己所属分区的数据。要做到这一点，可以将一个Ignite实例注入到自己的CacheStore，然后用它来确定本地节点所属的分区。
下面的代码片段演示了用<code>Affinity</code>来只加载本地分区的数据，注意例子代码是单线程的，然而它可以通过分区ID高效地并行化。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CacheJdbcPersonStore</span> <span class="token keyword">extends</span> <span class="token class-name">CacheStoreAdapter</span><span class="token generics function"><span class="token punctuation">&lt;</span>Long<span class="token punctuation">,</span> Person<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// Will be automatically injected.</span>
  <span class="token annotation punctuation">@IgniteInstanceResource</span>
  <span class="token keyword">private</span> Ignite ignite<span class="token punctuation">;</span>
  
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// This mehtod is called whenever &quot;IgniteCache.loadCache()&quot; or</span>
  <span class="token comment">// &quot;IgniteCache.localLoadCache()&quot; methods are called.</span>
  <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadCache</span><span class="token punctuation">(</span>IgniteBiInClosure<span class="token generics function"><span class="token punctuation">&lt;</span>Long<span class="token punctuation">,</span> Person<span class="token punctuation">&gt;</span></span> clo<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Affinity aff <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">affinity</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ClusterNode locNode <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">cluster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">localNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">try</span> <span class="token punctuation">(</span>Connection conn <span class="token operator">=</span> <span class="token function">connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> part <span class="token operator">:</span> aff<span class="token punctuation">.</span><span class="token function">primaryPartitions</span><span class="token punctuation">(</span>locNode<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">loadPartition</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> part<span class="token punctuation">,</span> clo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> part <span class="token operator">:</span> aff<span class="token punctuation">.</span><span class="token function">backupPartitions</span><span class="token punctuation">(</span>locNode<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">loadPartition</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span> part<span class="token punctuation">,</span> clo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">loadPartition</span><span class="token punctuation">(</span>Connection conn<span class="token punctuation">,</span> <span class="token keyword">int</span> part<span class="token punctuation">,</span> IgniteBiInClosure<span class="token generics function"><span class="token punctuation">&lt;</span>Long<span class="token punctuation">,</span> Person<span class="token punctuation">&gt;</span></span> clo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span>PreparedStatement st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;select * from PERSONS where partId=?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      st<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> part<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token keyword">try</span> <span class="token punctuation">(</span>ResultSet rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
          clo<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CacheLoaderException</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to load values from cache store.&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意键和分区的映射依赖于affinity函数中配置的分区数量(参照org.apache.ignite.cache.affinity.AffinityFunctio)。如果affinity函数配置改变，数据库中存储的分区ID必须相应地更新。</p></blockquote> <blockquote><p><strong>性能改进</strong>
为了保证一致性和持久性，Ignite的原生持久化支持<strong>预写日志</strong>，预写日志默认是开启的。但是这会影响数据预加载的性能，因此建议在数据预加载时禁用WAL，加载完成启用WAL，具体可以看WAL的Java API文档，以及SQL的ALTER TABLE文档。</p></blockquote> <h2 id="_5-3-数据流处理器"><a href="#_5-3-数据流处理器" aria-hidden="true" class="header-anchor">#</a> 5.3.数据流处理器</h2> <h3 id="_5-3-1-摘要"><a href="#_5-3-1-摘要" aria-hidden="true" class="header-anchor">#</a> 5.3.1.摘要</h3> <p>数据流处理器是通过<code>IgniteDataStreamer</code>API定义的，用于将大量的持续数据流注入Ignite缓存。数据流处理器以可扩展以及容错的方式，为将所有的数据流注入Ignite提供了<strong>至少一次保证</strong>。
数据流处理器不参与事务。</p> <h3 id="_5-3-2-ignitedatastreamer"><a href="#_5-3-2-ignitedatastreamer" aria-hidden="true" class="header-anchor">#</a> 5.3.2.IgniteDataStreamer</h3> <p>快速地将大量的数据流注入Ignite的主要抽象是<code>IgniteDataStreamer</code>，在内部他会适当地将数据整合成批次然后将这些批次与缓存这些数据的节点并置在一起。
高速加载是通过如下技术获得的：</p> <ul><li>映射到同一个集群节点上的数据条目会作为一个批次保存在缓冲区中；</li> <li>多个缓冲区可以同时共处；</li> <li>为了避免内存溢出，数据流处理器有一个缓冲区的最大数，他们可以并行的处理；</li></ul> <p>要将数据加入数据流处理器，调用<code>IgniteDataStreamer.addData(...)</code>方法即可。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Get the data streamer reference and stream data.</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span>IgniteDataStreamer<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> stmr <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">dataStreamer</span><span class="token punctuation">(</span><span class="token string">&quot;myStreamCache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token comment">// Stream entries.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        stmr<span class="token punctuation">.</span><span class="token function">addData</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> Integer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>允许覆写</strong>
默认的话，数据流处理器不会覆写已有的数据，这意味着如果遇到一个缓存内已有的条目，他会忽略这个条目。这是一个最有效的以及高性能的模式，因为数据流处理器不需要在后台考虑数据的版本。
如果预想到数据在数据流缓存中可能存在以及希望覆写它，设置<code>IgniteDataStreamer.allowOverwrite(true)</code>即可。</p> <blockquote><p><strong>流处理器，CacheStore以及AllowOverwrite</strong> <code>AllowOverwrite</code>属性如果是<code>false</code>（默认），第三方存储的更新会被忽略。
只有当<code>AllowOverwrite</code>为<code>true</code>时，第三方存储才会被更新。</p></blockquote> <h3 id="_5-3-3-streamreceiver"><a href="#_5-3-3-streamreceiver" aria-hidden="true" class="header-anchor">#</a> 5.3.3.StreamReceiver</h3> <p>对于希望执行一些自定义的逻辑而不仅仅是添加新数据的情况，可以利用一下<code>StreamReceiver</code>API。
流接收器可以以并置的方式直接在缓存该数据条目的节点上对数据流做出反应，可以在数据进入缓存之前修改数据或者在数据上添加任何的预处理逻辑。</p> <blockquote><p>注意<code>StreamReceiver</code>不会自动地将数据加入缓存，需要显式地调用任意的<code>cache.put(...)</code>方法。</p></blockquote> <h3 id="_5-3-4-streamtransformer"><a href="#_5-3-4-streamtransformer" aria-hidden="true" class="header-anchor">#</a> 5.3.4.StreamTransformer</h3> <p><code>StreamTransformer</code>是一个<code>StreamReceiver</code>的简单实现，他会基于之前的值来修改数据流缓存中的数据。更新是并置的，即他会明确地在数据缓存的集群节点上发生。
在下面的例子中，通过<code>StreamTransformer</code>在文本流中为每个发现的确切的单词增加一个计数。</p> <p>Java8：</p> <div class="language-java extra-class"><pre class="language-java"><code>CacheConfiguration cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CacheConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;wordCountCache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IgniteCache<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Long<span class="token punctuation">&gt;</span></span> stmCache <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">getOrCreateCache</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">(</span>IgniteDataStreamer<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Long<span class="token punctuation">&gt;</span></span> stmr <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">dataStreamer</span><span class="token punctuation">(</span>stmCache<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Allow data updates.</span>
  stmr<span class="token punctuation">.</span><span class="token function">allowOverwrite</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Configure data transformation to count instances of the same word.</span>
  stmr<span class="token punctuation">.</span><span class="token function">receiver</span><span class="token punctuation">(</span>StreamTransformer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> arg<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Get current count.</span>
    Long val <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Increment count by 1.</span>
    e<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>val <span class="token operator">==</span> null <span class="token operator">?</span> <span class="token number">1</span>L <span class="token operator">:</span> val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> null<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Stream words into the streamer cache.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>String word <span class="token operator">:</span> text<span class="token punctuation">)</span>
    stmr<span class="token punctuation">.</span><span class="token function">addData</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token number">1</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Java7:</p> <div class="language-java extra-class"><pre class="language-java"><code>CacheConfiguration cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CacheConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;wordCountCache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IgniteCache<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">,</span> Long<span class="token punctuation">&gt;</span></span> stmCache <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">getOrCreateCache</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">(</span>IgniteDataStreamer<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Long<span class="token punctuation">&gt;</span></span> stmr <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">dataStreamer</span><span class="token punctuation">(</span>stmCache<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Allow data updates.</span>
  stmr<span class="token punctuation">.</span><span class="token function">allowOverwrite</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Configure data transformation to count instances of the same word.</span>
  stmr<span class="token punctuation">.</span><span class="token function">receiver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StreamTransformer</span><span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Long<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> Object <span class="token function">process</span><span class="token punctuation">(</span>MutableEntry<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Long<span class="token punctuation">&gt;</span></span> e<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Get current count.</span>
      Long val <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Increment count by 1.</span>
      e<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>val <span class="token operator">==</span> null <span class="token operator">?</span> <span class="token number">1</span>L <span class="token operator">:</span> val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> null<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Stream words into the streamer cache.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>String word <span class="token operator">:</span> text<span class="token punctuation">)</span>
    stmr<span class="token punctuation">.</span><span class="token function">addData</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token number">1</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-3-5-streamvisitor"><a href="#_5-3-5-streamvisitor" aria-hidden="true" class="header-anchor">#</a> 5.3.5.StreamVisitor</h3> <p><code>StreamVisitor</code>也是<code>StreamReceiver</code>的一个方便实现，他会访问流中的每个键值组。注意，访问器不会更新缓存。如果键值组需要存储在缓存内，那么需要显式地调用任意的<code>cache.put(...)</code>方法。
在下面的示例中，有两个缓存:<code>marketData</code>和<code>instruments</code>,收到market数据的瞬间就会将他们放入<code>marketData</code>缓存的流处理器，映射到特定market数据的集群节点上的<code>marketData</code>的流处理器的<code>StreamVisitor</code>就会被调用，在分别收到market数据后就会用最新的市场价格更新<code>instrument</code>缓存。
注意，根本不会更新<code>marketData</code>缓存，它一直是空的，只是直接在数据将要存储的集群节点上简单利用了market数据的并置处理能力。</p> <div class="language-java extra-class"><pre class="language-java"><code>CacheConfiguration<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Double<span class="token punctuation">&gt;</span></span> mrktDataCfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CacheConfiguration</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;marketData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
CacheConfiguration<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Double<span class="token punctuation">&gt;</span></span> instCfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CacheConfiguration</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;instruments&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cache for market data ticks streamed into the system.</span>
IgniteCache<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Double<span class="token punctuation">&gt;</span></span> mrktData <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">getOrCreateCache</span><span class="token punctuation">(</span>mrktDataCfg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cache for financial instruments.</span>
IgniteCache<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Double<span class="token punctuation">&gt;</span></span> instCache <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">getOrCreateCache</span><span class="token punctuation">(</span>instCfg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">(</span>IgniteDataStreamer<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Integer<span class="token punctuation">&gt;</span></span> mktStmr <span class="token operator">=</span> ignite<span class="token punctuation">.</span><span class="token function">dataStreamer</span><span class="token punctuation">(</span><span class="token string">&quot;marketData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Note that we do not populate 'marketData' cache (it remains empty).</span>
  <span class="token comment">// Instead we update the 'instruments' cache based on the latest market price.</span>
  mktStmr<span class="token punctuation">.</span><span class="token function">receiver</span><span class="token punctuation">(</span>StreamVisitor<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cache<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    String symbol <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Double tick <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Instrument inst <span class="token operator">=</span> instCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>inst <span class="token operator">==</span> null<span class="token punctuation">)</span>
      inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Instrument</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Update instrument price based on the latest market tick.</span>
    inst<span class="token punctuation">.</span><span class="token function">setHigh</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span><span class="token function">getLatest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tick<span class="token punctuation">)</span><span class="token punctuation">;</span>
    inst<span class="token punctuation">.</span><span class="token function">setLow</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span><span class="token function">getLatest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tick<span class="token punctuation">)</span><span class="token punctuation">;</span>
    inst<span class="token punctuation">.</span><span class="token function">setLatest</span><span class="token punctuation">(</span>tick<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Update instrument cache.</span>
    instCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>symbol<span class="token punctuation">,</span> inst<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Stream market data into Ignite.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Double<span class="token punctuation">&gt;</span></span> tick <span class="token operator">:</span> marketData<span class="token punctuation">)</span>
      mktStmr<span class="token punctuation">.</span><span class="token function">addData</span><span class="token punctuation">(</span>tick<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.53dd0248.js" defer></script><script src="/assets/js/15.eb64c1d5.js" defer></script>
  </body>
</html>
