(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{203:function(t,a,n){"use strict";n.r(a);var s=n(0),e=Object(s.a)({},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("p",[n("a",{attrs:{href:"https://karaf.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache Karaf"),n("OutboundLink")],1),t._v("是一个轻量级、功能强大的企业级OSGi容器，他支持Eclipse Equinox和Apache Felix运行时。")]),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("为了方便不同Ignite模块的部署（包括他们的依赖），Ignite提供了一套打包进特性库的"),n("a",{attrs:{href:"https://karaf.apache.org/manual/latest/users-guide/provisioning.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Karaf特性"),n("OutboundLink")],1),t._v("，这使得借助于Karaf Shell的一个命令就可以快速地将Ignite部署进OSGi环境。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),n("p",[t._v("因为这是一个专有的包（并不是Java标准规范的一部分），Apache Kafka默认并没有从"),n("a",{attrs:{href:"http://wiki.osgi.org/wiki/System_Bundle",target:"_blank",rel:"noopener noreferrer"}},[t._v("System Bundle"),n("OutboundLink")],1),t._v("（bundle 0）中导出它，因此必须通过"),n("a",{attrs:{href:"https://karaf.apache.org/manual/latest-2.2.x/users-guide/jre-tuning.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("修改${KARAF_BASE}/etc/jre.properties文件"),n("OutboundLink")],1),t._v("通知Kafka导出它。")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),n("p",[t._v("使用Apache Karaf Shell中的如下命令来安装Ignite特性库，确保容器可以连接到互联网或者一个包含Ignite组件的备用Maven仓库。")]),t._v(" "),n("p",[t._v("将Ignite特性库加入Karaf：")]),t._v(" "),t._m(9),t._m(10),t._v(" "),n("p",[t._v("这时可以列出Ignite支持的所有特性：")]),t._v(" "),t._m(11),t._m(12),t._v(" "),n("p",[t._v("下面的特性是有点特别的：")]),t._v(" "),t._m(13),t._v(" "),n("p",[t._v("所有其他的特性包括对应的Ignite模块+依赖，可以通过如下方式安装他们：")]),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("当Karaf版本<=4.0.3时如果使用Pax Logging请仔细阅读这个注释")]),t._v("\n安装"),n("code",[t._v("ignite-log4j")]),t._v("这个特性时，Karaf Shell可能显示下面的消息：\nError executing command: Resource has no uri\n这不是一个严重的错误，已经汇报给Karaf社区，问题号是"),n("a",{attrs:{href:"https://issues.apache.org/jira/browse/KARAF-4129",target:"_blank",rel:"noopener noreferrer"}},[t._v("KARAF-4129"),n("OutboundLink")],1),t._v("。\n按照如下的说明可以忽略这个错误。")])]),t._v(" "),n("p",[t._v("Apache Karaf捆绑了"),n("a",{attrs:{href:"https://ops4j1.jira.com/wiki/display/paxlogging/Pax+Logging",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pax Logging"),n("OutboundLink")],1),t._v(",他是一个从其他组件收集和汇总日志输出（通过不同的框架输出，比如slf4j，log4j，JULI，commons-logging等）然后用一个典型的log4j配置处理的框架。")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),n("p",[t._v("以下的模块已OSGi化：")]),t._v(" "),t._m(21),t._v(" "),n("p",[t._v("下面的模块由于各种各样的原因目前还不支持OSGi：")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),n("p",[t._v("要在一个OSGi容器中启动Ignite，至少要安装如下的组件：")]),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),n("p",[t._v("可以随意地安装额外的Ignite模块来扩展平台的功能，就像在一个标准环境中将模块加入类路径一样。")]),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),n("p",[t._v("在OSGi中支持两个不同的类加载策略：")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),n("p",[t._v("包括Bundle-Activator的OSGi头")]),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"_4-osgi支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-osgi支持","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.OSGi支持")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"_4-1-在apache-karaf中安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-在apache-karaf中安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.1.在Apache Karaf中安装")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-1-1-摘要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-摘要","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.1.1.摘要")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[a("strong",[this._v("支持Apache Karaf4.0.0版本系列")]),this._v("\nIgnite在Karaf4.0.0版本系列上进行了测试，可能也可以工作于更老的版本上，但是未经过明确的测试。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-1-2-准备步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-准备步骤","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.1.2.准备步骤")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("首先，Ignite使用了Oracle/Sun JRE的底层包"),a("code",[this._v("sun.nio.ch")]),this._v("(OpenJDK也有效)。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("定位到使用的JRE版本的"),a("code",[this._v("jre-1.x")]),this._v("属性，然后在最后追加包名，比如：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v('jre-1.8= \\\n javax.accessibility, \\\n javax.activation;version="1.1", \\\n ...\n org.xml.sax.helpers, \\\n sun.nio.ch\n')])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-1-3-安装ignite特性库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-安装ignite特性库","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.1.3.安装Ignite特性库")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("karaf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" feature:repo-add mvn:org.apache.ignite/ignite-osgi-karaf/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${ignite.version}")]),t._v("/xml/features\nAdding feature url mvn:org.apache.ignite/ignite-osgi-karaf/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${ignite.version}")]),t._v("/xml/features\nkaraf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("将"),a("code",[this._v("${ignite.version}")]),this._v("替换为实际使用的版本号。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("karaf@root()> feature:list | grep ignite\nignite-all                    | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: All\nignite-core                   | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: Core\nignite-aop                    | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: AOP\nignite-aws                    | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: AWS\nignite-indexing               | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: Indexing\nignite-hibernate              | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: Hibernate\nignite-jcl                    | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: JCL\nignite-jms11                  | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: JMS 1.1\nignite-jta                    | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: JTA\nignite-kafka                  | 1.5.0.SNAPSHOT   |          | Uninstalled | ignite                   | Apache Ignite :: Kafka\n[...]\nkaraf@root()>\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-1-4-安装合适的ignite特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-4-安装合适的ignite特性","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.1.4.安装合适的Ignite特性")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[a("code",[this._v("ignite-core")]),this._v("：ignite-core模块，他是所有其他特性依赖的，因此不要忘了安装；")]),this._v(" "),a("li",[a("code",[this._v("ignite-all")]),this._v("：安装其他所有特性的一个汇总；")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("karaf@root()> feature:install ignite-core\nkaraf@root()> feature:install ignite-kafka\nkaraf@root()> feature:install ignite-aop ignite-urideploy\nkaraf@root()>\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("一些模块是OSGi片段而不是组件，当安装他们时，可能会注意到，Karaf Shell以及/或者"),a("code",[this._v("ignite-core")]),this._v("，其中一个或者两者，重新启动。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-1-5-ignite-log4j和pax-logging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-5-ignite-log4j和pax-logging","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.1.5.ignite-log4j和Pax Logging")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("ignite-log4j")]),this._v("模块依赖于log4j，Pax Logging默认不输出它，因此我们开发了一个OSGi片段，SymbolicName为"),a("code",[this._v("ignite-osgi-paxlogging")]),this._v("，他加入了"),a("code",[this._v("ignite-core")]),this._v("然后输出了缺失的包。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("ignite-log4j")]),this._v("特性也安装了这个片段，但是需要用"),a("code",[this._v("org.ops4j.pax.logging.pax-logging-api")]),this._v("这个名字强制刷新：")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("karaf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" feature:install ignite-log4j\nkaraf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" refresh org.ops4j.pax.logging.pax-logging-api\nkaraf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        __ __                  ____\n       / //_/____ __________ _/ __/\n      / ,"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("  / __ "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("/ ___/ __ "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("/ /_\n     / /"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/ /_/ / /  / /_/ / __/\n    /_/ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("_"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\\__,_/_/   \\__,_/_/\n\n  Apache Karaf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("4.0.2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nHit "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<tab>'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" a list of available commands\nand "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[cmd] --help'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("help")]),t._v(" on a specific command.\nHit "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<ctrl-d>'")]),t._v(" or "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'system:shutdown'")]),t._v(" or "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logout'")]),t._v(" to "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),t._v(" Karaf.\n\nkaraf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" la "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" ignite-osgi-paxlogging\n75 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Resolved  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   8 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" 1.5.0.SNAPSHOT                            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" ignite-osgi-paxlogging, Hosts: 1\nkaraf@root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"_4-2-支持的模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-支持的模块","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.2.支持的模块")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ul",[n("li",[t._v("ignite-core")]),t._v(" "),n("li",[t._v("ignite-aop")]),t._v(" "),n("li",[t._v("ignite-aws")]),t._v(" "),n("li",[t._v("ignite-camel")]),t._v(" "),n("li",[t._v("ignite-flume")]),t._v(" "),n("li",[t._v("ignite-indexing")]),t._v(" "),n("li",[t._v("ignite-hibernate")]),t._v(" "),n("li",[t._v("ignite-jcl")]),t._v(" "),n("li",[t._v("ignite-jms11")]),t._v(" "),n("li",[t._v("ignite-jta")]),t._v(" "),n("li",[t._v("ignite-kafka")]),t._v(" "),n("li",[t._v("ignite-mqtt")]),t._v(" "),n("li",[t._v("ignite-log4j")]),t._v(" "),n("li",[t._v("ignite-rest-http")]),t._v(" "),n("li",[t._v("ignite-scalar-2.11")]),t._v(" "),n("li",[t._v("ignite-scalar-2.10")]),t._v(" "),n("li",[t._v("ignite-schedule")]),t._v(" "),n("li",[t._v("ignite-slf4j")]),t._v(" "),n("li",[t._v("ignite-spring")]),t._v(" "),n("li",[t._v("ignite-ssh")]),t._v(" "),n("li",[t._v("ignite-twitter")]),t._v(" "),n("li",[t._v("ignite-urideploy")]),t._v(" "),n("li",[t._v("ignite-web")]),t._v(" "),n("li",[t._v("ignite-zookeeper")])])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ul",[n("li",[t._v("ignite-cloud")]),t._v(" "),n("li",[t._v("ignite-hadoop")]),t._v(" "),n("li",[t._v("ignite-gce")]),t._v(" "),n("li",[t._v("ignite-log4j2")]),t._v(" "),n("li",[t._v("ignite-mesos")]),t._v(" "),n("li",[t._v("ignite-visor-console[-2.10]")]),t._v(" "),n("li",[t._v("ignite-yarn")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"_4-3-在osgi容器中启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-在osgi容器中启动","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.3.在OSGi容器中启动")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-3-1-容器的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-容器的配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.3.1.容器的配置")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("ignite-core")]),this._v(" "),a("li",[this._v("ignite-osgi")]),this._v(" "),a("li",[this._v("javax cache API")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("当在Karaf中部署时，可以通过使用Ignite特性库来快速地安装"),a("code",[this._v("ignite-core")]),this._v("特性，可以参照"),a("a",{attrs:{href:"#_4-1-%E5%9C%A8apache-karaf%E4%B8%AD%E5%AE%89%E8%A3%85"}},[this._v("在Apache Karaf中安装")]),this._v("章节来了解更多的信息。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"_4-3-2-实现ignite组件activator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-实现ignite组件activator","aria-hidden":"true"}},[this._v("#")]),this._v(" 4.3.2.实现Ignite组件Activator")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("要启动Ignite，通过继承抽象类"),a("code",[this._v("org.apache.ignite.osgi.IgniteAbstractOsgiContextActivator")]),this._v("来实现一个OSGi组件Activator：")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ignite"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("osgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("examples"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ignite"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("configuration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IgniteConfiguration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ignite"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("osgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IgniteAbstractOsgiContextActivator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ignite"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("osgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classloaders"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OsgiClassLoadingStrategyType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyActivator")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteAbstractOsgiContextActivator")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Configure your Ignite instance as you would normally do, \n     * and return it.\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" IgniteConfiguration "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("igniteConfiguration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        IgniteConfiguration config "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IgniteConfiguration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGridName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testGrid"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Choose the classloading strategy for Ignite to use.\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" OsgiClassLoadingStrategyType "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("classLoadingStrategy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" OsgiClassLoadingStrategyType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BUNDLE_DELEGATING"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ul",[n("li",[n("code",[t._v("BUNDLE_DELEGATING")]),t._v("：优先使用包含Activator的组件的类加载器，"),n("code",[t._v("ignite-core")]),t._v("的类加载器作为备选；")]),t._v(" "),n("li",[n("code",[t._v("CONTAINER_SWEEP")]),t._v("：与"),n("code",[t._v("BUNDLE_DELEGATING")]),t._v("一样，但是在类仍然找不到时最终会搜索所有的组件。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[a("strong",[this._v("未来的OSGi类加载策略")]),this._v("\n我们可能会考虑在以后的版本中增加其他的类加载策略，比如使用Service Locator机制来定位通过一个文件自发地希望向Ignite的编组器暴露包的组件，类似于JAXB规范中的jaxb.index。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("确保将"),a("code",[this._v("Bundle-Activator")]),this._v("OSGi清单头加入组件，这样才能使OSGi容器在组件启动时调用Activator。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("Bundle-SymbolicName: test-bundle\nBundle-Activator: org.apache.ignite.osgi.examples.MyActivator\nImport-Package: ...\n[...]\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("要生成这个组件，需要包含"),a("code",[this._v("Bundle-Activator")]),this._v("OSGi头，建议在Maven构建中增加"),a("code",[this._v("maven-bundle-plugin")]),this._v("插件，下面是对应的配置：")])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.felix"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("maven-bundle-plugin"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${maven.bundle.plugin.version}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Bundle-SymbolicName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("..."),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Bundle-SymbolicName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Bundle-Activator")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.ignite.osgi.examples.MyActivator"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Bundle-Activator")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    [...]\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="OSGiSupport.md";a.default=e.exports}}]);