<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>13.插件</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.b473d3ab.css" as="style"><link rel="preload" href="/assets/js/app.53dd0248.js" as="script"><link rel="preload" href="/assets/js/74.0b17fabc.js" as="script"><link rel="prefetch" href="/assets/js/10.629160f8.js"><link rel="prefetch" href="/assets/js/100.8dd41c82.js"><link rel="prefetch" href="/assets/js/11.3ae3899e.js"><link rel="prefetch" href="/assets/js/12.5eea5fa7.js"><link rel="prefetch" href="/assets/js/13.814cf144.js"><link rel="prefetch" href="/assets/js/14.27bf9273.js"><link rel="prefetch" href="/assets/js/15.eb64c1d5.js"><link rel="prefetch" href="/assets/js/16.b8fd3ac5.js"><link rel="prefetch" href="/assets/js/17.6d72ceaa.js"><link rel="prefetch" href="/assets/js/18.ded6af2d.js"><link rel="prefetch" href="/assets/js/19.7dc3ecdc.js"><link rel="prefetch" href="/assets/js/2.82c623fb.js"><link rel="prefetch" href="/assets/js/20.13a8ea33.js"><link rel="prefetch" href="/assets/js/21.2d8f264c.js"><link rel="prefetch" href="/assets/js/22.a3e293d9.js"><link rel="prefetch" href="/assets/js/23.bf9aba6e.js"><link rel="prefetch" href="/assets/js/24.26ebce5a.js"><link rel="prefetch" href="/assets/js/25.b41b81b0.js"><link rel="prefetch" href="/assets/js/26.45147931.js"><link rel="prefetch" href="/assets/js/27.e25bc550.js"><link rel="prefetch" href="/assets/js/28.29be7cc5.js"><link rel="prefetch" href="/assets/js/29.7db78037.js"><link rel="prefetch" href="/assets/js/3.16a62f01.js"><link rel="prefetch" href="/assets/js/30.3223c2eb.js"><link rel="prefetch" href="/assets/js/31.1d38e4bb.js"><link rel="prefetch" href="/assets/js/32.95bcb255.js"><link rel="prefetch" href="/assets/js/33.fe204e0d.js"><link rel="prefetch" href="/assets/js/34.6a081c8a.js"><link rel="prefetch" href="/assets/js/35.e3f2095e.js"><link rel="prefetch" href="/assets/js/36.b15e9b49.js"><link rel="prefetch" href="/assets/js/37.238f3eb8.js"><link rel="prefetch" href="/assets/js/38.0a5e78b8.js"><link rel="prefetch" href="/assets/js/39.0fcea5ab.js"><link rel="prefetch" href="/assets/js/4.09795317.js"><link rel="prefetch" href="/assets/js/40.9d3805de.js"><link rel="prefetch" href="/assets/js/41.241989d7.js"><link rel="prefetch" href="/assets/js/42.f81cd3e4.js"><link rel="prefetch" href="/assets/js/43.44b41407.js"><link rel="prefetch" href="/assets/js/44.d2b58ee5.js"><link rel="prefetch" href="/assets/js/45.84e6dc48.js"><link rel="prefetch" href="/assets/js/46.121b15a3.js"><link rel="prefetch" href="/assets/js/47.d26a7115.js"><link rel="prefetch" href="/assets/js/48.8e1168fc.js"><link rel="prefetch" href="/assets/js/49.99b7227e.js"><link rel="prefetch" href="/assets/js/5.83f9a4bc.js"><link rel="prefetch" href="/assets/js/50.3e4ea217.js"><link rel="prefetch" href="/assets/js/51.5b29294d.js"><link rel="prefetch" href="/assets/js/52.b88a3b5d.js"><link rel="prefetch" href="/assets/js/53.1b185c21.js"><link rel="prefetch" href="/assets/js/54.58426c6e.js"><link rel="prefetch" href="/assets/js/55.7ab1c65d.js"><link rel="prefetch" href="/assets/js/56.12afb1ea.js"><link rel="prefetch" href="/assets/js/57.c73d6313.js"><link rel="prefetch" href="/assets/js/58.60ff3bef.js"><link rel="prefetch" href="/assets/js/59.c0f33441.js"><link rel="prefetch" href="/assets/js/6.9557d6ac.js"><link rel="prefetch" href="/assets/js/60.c20ede71.js"><link rel="prefetch" href="/assets/js/61.87c33cdc.js"><link rel="prefetch" href="/assets/js/62.5bfe9f57.js"><link rel="prefetch" href="/assets/js/63.43ce1725.js"><link rel="prefetch" href="/assets/js/64.40e55d8a.js"><link rel="prefetch" href="/assets/js/65.0ef2261c.js"><link rel="prefetch" href="/assets/js/66.2d2385c6.js"><link rel="prefetch" href="/assets/js/67.ab14fb75.js"><link rel="prefetch" href="/assets/js/68.bfe208fb.js"><link rel="prefetch" href="/assets/js/69.84ea4b5c.js"><link rel="prefetch" href="/assets/js/7.f4c076d8.js"><link rel="prefetch" href="/assets/js/70.ce385281.js"><link rel="prefetch" href="/assets/js/71.15058880.js"><link rel="prefetch" href="/assets/js/72.362628d3.js"><link rel="prefetch" href="/assets/js/73.5049f712.js"><link rel="prefetch" href="/assets/js/75.e80e5cd9.js"><link rel="prefetch" href="/assets/js/76.e55635e8.js"><link rel="prefetch" href="/assets/js/77.74e0006a.js"><link rel="prefetch" href="/assets/js/78.c45b8b13.js"><link rel="prefetch" href="/assets/js/79.3bac2928.js"><link rel="prefetch" href="/assets/js/8.ce6bd56a.js"><link rel="prefetch" href="/assets/js/80.54dc2d57.js"><link rel="prefetch" href="/assets/js/81.ae36540a.js"><link rel="prefetch" href="/assets/js/82.82b6f620.js"><link rel="prefetch" href="/assets/js/83.a48b249e.js"><link rel="prefetch" href="/assets/js/84.0db96720.js"><link rel="prefetch" href="/assets/js/85.d6c6f40e.js"><link rel="prefetch" href="/assets/js/86.ed566c04.js"><link rel="prefetch" href="/assets/js/87.ea8bb864.js"><link rel="prefetch" href="/assets/js/88.0002226c.js"><link rel="prefetch" href="/assets/js/89.ed9dd008.js"><link rel="prefetch" href="/assets/js/9.cf32c538.js"><link rel="prefetch" href="/assets/js/90.da0276d6.js"><link rel="prefetch" href="/assets/js/91.18376f61.js"><link rel="prefetch" href="/assets/js/92.bf23c8b6.js"><link rel="prefetch" href="/assets/js/93.a4737653.js"><link rel="prefetch" href="/assets/js/94.7127c03e.js"><link rel="prefetch" href="/assets/js/95.7eef57a8.js"><link rel="prefetch" href="/assets/js/96.3fa99fdb.js"><link rel="prefetch" href="/assets/js/97.968f6f05.js"><link rel="prefetch" href="/assets/js/98.52358adc.js"><link rel="prefetch" href="/assets/js/99.4ad86e2e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b473d3ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="_13-插件"><a href="#_13-插件" aria-hidden="true" class="header-anchor">#</a> 13.插件</h1> <h2 id="_13-1-插件"><a href="#_13-1-插件" aria-hidden="true" class="header-anchor">#</a> 13.1.插件</h2> <h3 id="_13-1-1-摘要"><a href="#_13-1-1-摘要" aria-hidden="true" class="header-anchor">#</a> 13.1.1.摘要</h3> <p>Ignite的插件系统可以使第三方扩展Ignite的核心功能，理解Ignite插件工作方式的最佳途径是去看一下Ignite的生命周期插件。</p> <h3 id="_13-1-2-插件的配置"><a href="#_13-1-2-插件的配置" aria-hidden="true" class="header-anchor">#</a> 13.1.2.插件的配置</h3> <p>每个插件都需要一个<code>PluginConfiguration</code>，然后在<code>IgniteConfiguration.pluginConfigurations</code>属性中注册，如下所示：</p> <p>XML：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ignite.cfg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.apache.ignite.configuration.IgniteConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- Plugin Configuration --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pluginConfigurations<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ignite.myexamples.MyPluginConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--Other Ignite configurations --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Java：</p> <div class="language-java extra-class"><pre class="language-java"><code>IgniteConfiguration cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IgniteConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

MyPluginConfiguration mpc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPluginConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cfg<span class="token punctuation">.</span><span class="token function">setPluginConfigurations</span><span class="token punctuation">(</span>mpc<span class="token punctuation">)</span><span class="token punctuation">;</span>

Ignition<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Start Ignite node.</span>
Ignite ignite <span class="token operator">=</span> Ignition<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一个<code>PluginConfiguration</code>的实现，如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPluginConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">PluginConfiguration</span> <span class="token punctuation">{</span>

    <span class="token comment">// Get and Set some plugin related properties</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个类可以为空，也可以包括部分插件特有的属性，但是它<strong>必须存在</strong>。</p> <h3 id="_13-1-3-插件提供者"><a href="#_13-1-3-插件提供者" aria-hidden="true" class="header-anchor">#</a> 13.1.3.插件提供者</h3> <p><code>PluginProvider&lt;PluginConfiguration&gt;</code>实现是新添加的插件的构造器，它在节点启动时创建了插件。这个接口有很多的方法，根据需要可以实现或者置空，但是，<code>name()</code>和<code>plugin()</code>方法<strong>不能为空</strong>。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPluginProvider</span> <span class="token keyword">implements</span> <span class="token class-name">PluginProvider</span><span class="token generics function"><span class="token punctuation">&lt;</span>MyPluginConfiguration<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;IGNITE&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">IgnitePlugin</span><span class="token operator">&gt;</span> T <span class="token function">plugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">MyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> T <span class="token function">createComponent</span><span class="token punctuation">(</span>PluginContext pluginContext<span class="token punctuation">,</span> Class<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> aClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> null<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Other methods can be no-op</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>PluginProvider&lt;PluginConfiguration&gt;</code>接口有三个重要的方法：</p> <ul><li><code>name()</code>：插件的名字；</li> <li><code>plugin()</code>：创建插件；</li> <li><code>createComponent()</code>：这个方法用于创建Ignite中的已有组件，比如数据快照、网格安全、节点发现、以及第三方Java API的跨平台支持等。</li></ul> <h4 id="_13-1-3-1-加载插件提供者"><a href="#_13-1-3-1-加载插件提供者" aria-hidden="true" class="header-anchor">#</a> 13.1.3.1.加载插件提供者</h4> <p>Ignite的插件使用JDK的<code>ServiceLoader</code>类进行加载，对于要加载的插件构造器，需要在META-INF文件夹中创建一个名为<code>org.apache.ignite.plugin.PluginProvider</code>的文件:</p> <p><img src="https://files.readme.io/21c53e4-plugin-provider.png" alt></p> <p>然后在该文件中提供插件构造器的实现类：</p> <p><img src="https://files.readme.io/5d1ed7f-plugin-provider-2.png" alt></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.53dd0248.js" defer></script><script src="/assets/js/74.0b17fabc.js" defer></script>
  </body>
</html>
