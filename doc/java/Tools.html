<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工具 | Apache Ignite技术服务</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/css/plugin.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <script src="https://hm.baidu.com/hm.js?76e2d8c51e8068e025053bc59d51045b"></script>
    <meta name="description" content="apache ignite,ignite中文,ignite官网,内存数据库,分布式数据库">
    <meta name="keywords" content="apache ignite,ignite中文,ignite官网,内存数据库,分布式数据库">
    <meta http-equiv="cache-control" content="no-store,no-cache,must-revalidate">
    <meta http-equiv="expires" content="0">
    
    <link rel="preload" href="/assets/css/0.styles.cb5acd6d.css" as="style"><link rel="preload" href="/assets/js/app.264f4941.js" as="script"><link rel="preload" href="/assets/js/3.b95bc49f.js" as="script"><link rel="preload" href="/assets/js/1.5c509afc.js" as="script"><link rel="preload" href="/assets/js/291.b4053cdc.js" as="script"><link rel="preload" href="/assets/js/11.2830eec0.js" as="script"><link rel="preload" href="/assets/js/10.41a5f603.js" as="script"><link rel="preload" href="/assets/js/8.6b57c8fe.js" as="script"><link rel="prefetch" href="/assets/js/100.a171744a.js"><link rel="prefetch" href="/assets/js/101.ff9dca2e.js"><link rel="prefetch" href="/assets/js/102.d184e2e5.js"><link rel="prefetch" href="/assets/js/103.517248cd.js"><link rel="prefetch" href="/assets/js/104.2d8722e2.js"><link rel="prefetch" href="/assets/js/105.ed393f31.js"><link rel="prefetch" href="/assets/js/106.c83204cd.js"><link rel="prefetch" href="/assets/js/107.f50929d2.js"><link rel="prefetch" href="/assets/js/108.af945b99.js"><link rel="prefetch" href="/assets/js/109.342d16a9.js"><link rel="prefetch" href="/assets/js/110.d9ad9f20.js"><link rel="prefetch" href="/assets/js/111.95a1c8a9.js"><link rel="prefetch" href="/assets/js/112.53cd9060.js"><link rel="prefetch" href="/assets/js/113.1af74e4f.js"><link rel="prefetch" href="/assets/js/114.39aeb19c.js"><link rel="prefetch" href="/assets/js/115.79f0dcf4.js"><link rel="prefetch" href="/assets/js/116.9bdfa957.js"><link rel="prefetch" href="/assets/js/117.198334b5.js"><link rel="prefetch" href="/assets/js/118.fde5922b.js"><link rel="prefetch" href="/assets/js/119.ec5f8340.js"><link rel="prefetch" href="/assets/js/12.3d2f4947.js"><link rel="prefetch" href="/assets/js/120.7800adfb.js"><link rel="prefetch" href="/assets/js/121.dd2873f5.js"><link rel="prefetch" href="/assets/js/122.4c8bca61.js"><link rel="prefetch" href="/assets/js/123.a44f5c84.js"><link rel="prefetch" href="/assets/js/124.dd7f9103.js"><link rel="prefetch" href="/assets/js/125.51220de0.js"><link rel="prefetch" href="/assets/js/126.4097380b.js"><link rel="prefetch" href="/assets/js/127.52ec7689.js"><link rel="prefetch" href="/assets/js/128.16b91a56.js"><link rel="prefetch" href="/assets/js/129.b6d9c72f.js"><link rel="prefetch" href="/assets/js/13.1af33d82.js"><link rel="prefetch" href="/assets/js/130.59d0e920.js"><link rel="prefetch" href="/assets/js/131.54318a09.js"><link rel="prefetch" href="/assets/js/132.a8453dbd.js"><link rel="prefetch" href="/assets/js/133.fe3fe717.js"><link rel="prefetch" href="/assets/js/134.2cfde59a.js"><link rel="prefetch" href="/assets/js/135.33086b21.js"><link rel="prefetch" href="/assets/js/136.9008469e.js"><link rel="prefetch" href="/assets/js/137.9634ebea.js"><link rel="prefetch" href="/assets/js/138.037626e6.js"><link rel="prefetch" href="/assets/js/139.a9cfc5d7.js"><link rel="prefetch" href="/assets/js/14.1dc71b94.js"><link rel="prefetch" href="/assets/js/140.7db27260.js"><link rel="prefetch" href="/assets/js/141.4273f161.js"><link rel="prefetch" href="/assets/js/142.7941ca41.js"><link rel="prefetch" href="/assets/js/143.0665f716.js"><link rel="prefetch" href="/assets/js/144.f4f5e178.js"><link rel="prefetch" href="/assets/js/145.1ae0ceb8.js"><link rel="prefetch" href="/assets/js/146.0f695b3a.js"><link rel="prefetch" href="/assets/js/147.3a5a0c1e.js"><link rel="prefetch" href="/assets/js/148.7b50379e.js"><link rel="prefetch" href="/assets/js/149.4b47b1d8.js"><link rel="prefetch" href="/assets/js/15.7df0b63f.js"><link rel="prefetch" href="/assets/js/150.c2c820b2.js"><link rel="prefetch" href="/assets/js/151.a4decbf6.js"><link rel="prefetch" href="/assets/js/152.d13d95e5.js"><link rel="prefetch" href="/assets/js/153.7efd6f73.js"><link rel="prefetch" href="/assets/js/154.f604aeb3.js"><link rel="prefetch" href="/assets/js/155.18ef925f.js"><link rel="prefetch" href="/assets/js/156.da0af49c.js"><link rel="prefetch" href="/assets/js/157.b6d5dc0f.js"><link rel="prefetch" href="/assets/js/158.25948f55.js"><link rel="prefetch" href="/assets/js/159.b035a6e3.js"><link rel="prefetch" href="/assets/js/16.14c9b590.js"><link rel="prefetch" href="/assets/js/160.b34057f7.js"><link rel="prefetch" href="/assets/js/161.b441753a.js"><link rel="prefetch" href="/assets/js/162.a2d6ddb5.js"><link rel="prefetch" href="/assets/js/163.417d5be2.js"><link rel="prefetch" href="/assets/js/164.36ade9de.js"><link rel="prefetch" href="/assets/js/165.7633b3a4.js"><link rel="prefetch" href="/assets/js/166.89c13b2d.js"><link rel="prefetch" href="/assets/js/167.31d3e0db.js"><link rel="prefetch" href="/assets/js/168.6fec639a.js"><link rel="prefetch" href="/assets/js/169.11d38c5f.js"><link rel="prefetch" href="/assets/js/17.25a2bd2e.js"><link rel="prefetch" href="/assets/js/170.5cfb4727.js"><link rel="prefetch" href="/assets/js/171.ce2f29b3.js"><link rel="prefetch" href="/assets/js/172.073a5096.js"><link rel="prefetch" href="/assets/js/173.ee7a0176.js"><link rel="prefetch" href="/assets/js/174.c90cc69c.js"><link rel="prefetch" href="/assets/js/175.2a4281a5.js"><link rel="prefetch" href="/assets/js/176.a330d4b7.js"><link rel="prefetch" href="/assets/js/177.57fef2c6.js"><link rel="prefetch" href="/assets/js/178.34762b99.js"><link rel="prefetch" href="/assets/js/179.16a96ace.js"><link rel="prefetch" href="/assets/js/18.c43a3e2d.js"><link rel="prefetch" href="/assets/js/180.17e02e51.js"><link rel="prefetch" href="/assets/js/181.63a9440e.js"><link rel="prefetch" href="/assets/js/182.202bdcd9.js"><link rel="prefetch" href="/assets/js/183.a75100c7.js"><link rel="prefetch" href="/assets/js/184.60d1db45.js"><link rel="prefetch" href="/assets/js/185.b5190968.js"><link rel="prefetch" href="/assets/js/186.39273304.js"><link rel="prefetch" href="/assets/js/187.896ee339.js"><link rel="prefetch" href="/assets/js/188.829cedd7.js"><link rel="prefetch" href="/assets/js/189.905542fd.js"><link rel="prefetch" href="/assets/js/19.439b7581.js"><link rel="prefetch" href="/assets/js/190.ee776c74.js"><link rel="prefetch" href="/assets/js/191.3085204f.js"><link rel="prefetch" href="/assets/js/192.2964246c.js"><link rel="prefetch" href="/assets/js/193.2b671ac5.js"><link rel="prefetch" href="/assets/js/194.bcb4b2ca.js"><link rel="prefetch" href="/assets/js/195.b7701933.js"><link rel="prefetch" href="/assets/js/196.c46576e8.js"><link rel="prefetch" href="/assets/js/197.5f557681.js"><link rel="prefetch" href="/assets/js/198.1e89f134.js"><link rel="prefetch" href="/assets/js/199.fc3a3c6c.js"><link rel="prefetch" href="/assets/js/20.1d900c8d.js"><link rel="prefetch" href="/assets/js/200.edc5937c.js"><link rel="prefetch" href="/assets/js/201.3598772b.js"><link rel="prefetch" href="/assets/js/202.2af299e0.js"><link rel="prefetch" href="/assets/js/203.ff8e8eb7.js"><link rel="prefetch" href="/assets/js/204.05ae9f6f.js"><link rel="prefetch" href="/assets/js/205.c444b35f.js"><link rel="prefetch" href="/assets/js/206.49174d6a.js"><link rel="prefetch" href="/assets/js/207.60662bbf.js"><link rel="prefetch" href="/assets/js/208.33cd493d.js"><link rel="prefetch" href="/assets/js/209.1c61726e.js"><link rel="prefetch" href="/assets/js/21.e545d595.js"><link rel="prefetch" href="/assets/js/210.7c4ac60e.js"><link rel="prefetch" href="/assets/js/211.9cd992bc.js"><link rel="prefetch" href="/assets/js/212.a93805d6.js"><link rel="prefetch" href="/assets/js/213.c14ad741.js"><link rel="prefetch" href="/assets/js/214.a410b70d.js"><link rel="prefetch" href="/assets/js/215.688a1937.js"><link rel="prefetch" href="/assets/js/216.6d0b3d44.js"><link rel="prefetch" href="/assets/js/217.55cf55da.js"><link rel="prefetch" href="/assets/js/218.2d4304b5.js"><link rel="prefetch" href="/assets/js/219.f06321dc.js"><link rel="prefetch" href="/assets/js/22.e1ae2ebc.js"><link rel="prefetch" href="/assets/js/220.81da06b9.js"><link rel="prefetch" href="/assets/js/221.73424581.js"><link rel="prefetch" href="/assets/js/222.00b432e8.js"><link rel="prefetch" href="/assets/js/223.be11916c.js"><link rel="prefetch" href="/assets/js/224.87898b28.js"><link rel="prefetch" href="/assets/js/225.89cce153.js"><link rel="prefetch" href="/assets/js/226.084af005.js"><link rel="prefetch" href="/assets/js/227.89a8090e.js"><link rel="prefetch" href="/assets/js/228.7ab726e0.js"><link rel="prefetch" href="/assets/js/229.dab9a950.js"><link rel="prefetch" href="/assets/js/23.208f00a1.js"><link rel="prefetch" href="/assets/js/230.16703feb.js"><link rel="prefetch" href="/assets/js/231.8c4f9061.js"><link rel="prefetch" href="/assets/js/232.3abb8973.js"><link rel="prefetch" href="/assets/js/233.7541de87.js"><link rel="prefetch" href="/assets/js/234.0ac56c13.js"><link rel="prefetch" href="/assets/js/235.3046b7a1.js"><link rel="prefetch" href="/assets/js/236.972eeb66.js"><link rel="prefetch" href="/assets/js/237.db67551c.js"><link rel="prefetch" href="/assets/js/238.c63261e7.js"><link rel="prefetch" href="/assets/js/239.16f7d9b5.js"><link rel="prefetch" href="/assets/js/24.b06822a9.js"><link rel="prefetch" href="/assets/js/240.26e6dbf7.js"><link rel="prefetch" href="/assets/js/241.d389295c.js"><link rel="prefetch" href="/assets/js/242.0393fc9a.js"><link rel="prefetch" href="/assets/js/243.a899649a.js"><link rel="prefetch" href="/assets/js/244.ea9614d4.js"><link rel="prefetch" href="/assets/js/245.86f6a9df.js"><link rel="prefetch" href="/assets/js/246.976be3a8.js"><link rel="prefetch" href="/assets/js/247.ff939a6f.js"><link rel="prefetch" href="/assets/js/248.8c30a5c0.js"><link rel="prefetch" href="/assets/js/249.0be32375.js"><link rel="prefetch" href="/assets/js/25.5d32942a.js"><link rel="prefetch" href="/assets/js/250.43176ce7.js"><link rel="prefetch" href="/assets/js/251.9b0b29d5.js"><link rel="prefetch" href="/assets/js/252.d63e7357.js"><link rel="prefetch" href="/assets/js/253.8277f2f3.js"><link rel="prefetch" href="/assets/js/254.4007d9bf.js"><link rel="prefetch" href="/assets/js/255.72c5640c.js"><link rel="prefetch" href="/assets/js/256.1e162c0e.js"><link rel="prefetch" href="/assets/js/257.8d8179ba.js"><link rel="prefetch" href="/assets/js/258.58823ab5.js"><link rel="prefetch" href="/assets/js/259.6e544184.js"><link rel="prefetch" href="/assets/js/26.863f7e60.js"><link rel="prefetch" href="/assets/js/260.0bccb717.js"><link rel="prefetch" href="/assets/js/261.fe834fea.js"><link rel="prefetch" href="/assets/js/262.bfc961d7.js"><link rel="prefetch" href="/assets/js/263.3c585b44.js"><link rel="prefetch" href="/assets/js/264.3be55fee.js"><link rel="prefetch" href="/assets/js/265.88eac1d6.js"><link rel="prefetch" href="/assets/js/266.a4007560.js"><link rel="prefetch" href="/assets/js/267.4632ce34.js"><link rel="prefetch" href="/assets/js/268.74cc2201.js"><link rel="prefetch" href="/assets/js/269.475d8378.js"><link rel="prefetch" href="/assets/js/27.a023f451.js"><link rel="prefetch" href="/assets/js/270.8a6f7abc.js"><link rel="prefetch" href="/assets/js/271.07d4c1fd.js"><link rel="prefetch" href="/assets/js/272.bbeb18e9.js"><link rel="prefetch" href="/assets/js/273.74980d47.js"><link rel="prefetch" href="/assets/js/274.792c9dc0.js"><link rel="prefetch" href="/assets/js/275.36db08e6.js"><link rel="prefetch" href="/assets/js/276.f8ec4114.js"><link rel="prefetch" href="/assets/js/277.ca966325.js"><link rel="prefetch" href="/assets/js/278.914a70c5.js"><link rel="prefetch" href="/assets/js/279.b398be35.js"><link rel="prefetch" href="/assets/js/28.61eabbbb.js"><link rel="prefetch" href="/assets/js/280.2e35164b.js"><link rel="prefetch" href="/assets/js/281.0b0fafa2.js"><link rel="prefetch" href="/assets/js/282.ca60cf6b.js"><link rel="prefetch" href="/assets/js/283.8e33df1e.js"><link rel="prefetch" href="/assets/js/284.b2c33b92.js"><link rel="prefetch" href="/assets/js/285.ec7d2c52.js"><link rel="prefetch" href="/assets/js/286.54e246c6.js"><link rel="prefetch" href="/assets/js/287.615d01c0.js"><link rel="prefetch" href="/assets/js/288.944c2ab4.js"><link rel="prefetch" href="/assets/js/289.db4f077f.js"><link rel="prefetch" href="/assets/js/29.f0f4d791.js"><link rel="prefetch" href="/assets/js/290.5e5af2e6.js"><link rel="prefetch" href="/assets/js/292.986c668a.js"><link rel="prefetch" href="/assets/js/293.a659e882.js"><link rel="prefetch" href="/assets/js/294.3598da41.js"><link rel="prefetch" href="/assets/js/295.939f6d0d.js"><link rel="prefetch" href="/assets/js/30.ed97af1f.js"><link rel="prefetch" href="/assets/js/31.f464b981.js"><link rel="prefetch" href="/assets/js/32.81d53af7.js"><link rel="prefetch" href="/assets/js/33.1abe3576.js"><link rel="prefetch" href="/assets/js/34.e3c43a9e.js"><link rel="prefetch" href="/assets/js/35.3bd76755.js"><link rel="prefetch" href="/assets/js/36.0f0aeea1.js"><link rel="prefetch" href="/assets/js/37.c246691f.js"><link rel="prefetch" href="/assets/js/38.89242a75.js"><link rel="prefetch" href="/assets/js/39.129ba990.js"><link rel="prefetch" href="/assets/js/4.03c84a3c.js"><link rel="prefetch" href="/assets/js/40.52d4257b.js"><link rel="prefetch" href="/assets/js/41.c45513c7.js"><link rel="prefetch" href="/assets/js/42.b42542e4.js"><link rel="prefetch" href="/assets/js/43.5fcfe760.js"><link rel="prefetch" href="/assets/js/44.2165b121.js"><link rel="prefetch" href="/assets/js/45.f011e76a.js"><link rel="prefetch" href="/assets/js/46.b190d321.js"><link rel="prefetch" href="/assets/js/47.66e391b9.js"><link rel="prefetch" href="/assets/js/48.6668dba4.js"><link rel="prefetch" href="/assets/js/49.8dca8b6e.js"><link rel="prefetch" href="/assets/js/5.dc64067c.js"><link rel="prefetch" href="/assets/js/50.05a55da7.js"><link rel="prefetch" href="/assets/js/51.18753c7f.js"><link rel="prefetch" href="/assets/js/52.d6e778fa.js"><link rel="prefetch" href="/assets/js/53.4bd5b1e2.js"><link rel="prefetch" href="/assets/js/54.a78aaa0b.js"><link rel="prefetch" href="/assets/js/55.e42ca7af.js"><link rel="prefetch" href="/assets/js/56.a4a50c46.js"><link rel="prefetch" href="/assets/js/57.6eec316c.js"><link rel="prefetch" href="/assets/js/58.7cfb4255.js"><link rel="prefetch" href="/assets/js/59.dbc333cc.js"><link rel="prefetch" href="/assets/js/6.a365e315.js"><link rel="prefetch" href="/assets/js/60.2fa2afd7.js"><link rel="prefetch" href="/assets/js/61.a12986d6.js"><link rel="prefetch" href="/assets/js/62.968f58b9.js"><link rel="prefetch" href="/assets/js/63.bee6b498.js"><link rel="prefetch" href="/assets/js/64.8c0607a1.js"><link rel="prefetch" href="/assets/js/65.63c58056.js"><link rel="prefetch" href="/assets/js/66.e7a6a465.js"><link rel="prefetch" href="/assets/js/67.82e8c6f5.js"><link rel="prefetch" href="/assets/js/68.e62e6234.js"><link rel="prefetch" href="/assets/js/69.250ca4fe.js"><link rel="prefetch" href="/assets/js/7.bdfa8241.js"><link rel="prefetch" href="/assets/js/70.08dacaaf.js"><link rel="prefetch" href="/assets/js/71.2ad91bd3.js"><link rel="prefetch" href="/assets/js/72.d81dcb2e.js"><link rel="prefetch" href="/assets/js/73.db7b4053.js"><link rel="prefetch" href="/assets/js/74.ed28d1ce.js"><link rel="prefetch" href="/assets/js/75.6daa5ea4.js"><link rel="prefetch" href="/assets/js/76.3f083d88.js"><link rel="prefetch" href="/assets/js/77.50cf9b57.js"><link rel="prefetch" href="/assets/js/78.cfc14aca.js"><link rel="prefetch" href="/assets/js/79.fa535173.js"><link rel="prefetch" href="/assets/js/80.04b4372a.js"><link rel="prefetch" href="/assets/js/81.442378a1.js"><link rel="prefetch" href="/assets/js/82.28992137.js"><link rel="prefetch" href="/assets/js/83.b1733d5b.js"><link rel="prefetch" href="/assets/js/84.c84fe8b2.js"><link rel="prefetch" href="/assets/js/85.3df73729.js"><link rel="prefetch" href="/assets/js/86.28abe836.js"><link rel="prefetch" href="/assets/js/87.adc38596.js"><link rel="prefetch" href="/assets/js/88.f57d467f.js"><link rel="prefetch" href="/assets/js/89.1bdf828f.js"><link rel="prefetch" href="/assets/js/9.ac032f9d.js"><link rel="prefetch" href="/assets/js/90.1007c7a2.js"><link rel="prefetch" href="/assets/js/91.be7512e6.js"><link rel="prefetch" href="/assets/js/92.dc3df5c8.js"><link rel="prefetch" href="/assets/js/93.0b63c74e.js"><link rel="prefetch" href="/assets/js/94.31d25b70.js"><link rel="prefetch" href="/assets/js/95.c0389214.js"><link rel="prefetch" href="/assets/js/96.70c50255.js"><link rel="prefetch" href="/assets/js/97.8f8e0dcb.js"><link rel="prefetch" href="/assets/js/98.390f8d37.js"><link rel="prefetch" href="/assets/js/99.1d8aaf36.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb5acd6d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Apache Ignite技术服务</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/Service.html" class="nav-link">
  服务&amp;报价
</a></div><div class="nav-item"><a href="/doc/java/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="https://my.oschina.net/liyuj" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/confluent/" class="nav-link">
  Confluent平台
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">最新版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">最新版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/java/Tools.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  2.10.0
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.9.1/" class="nav-link">
  2.9.1
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.8.0/" class="nav-link">
  2.8.0
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.7.0/" class="nav-link">
  2.7.0
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.6.0/" class="nav-link">
  2.6.0
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/Service.html" class="nav-link">
  服务&amp;报价
</a></div><div class="nav-item"><a href="/doc/java/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="https://my.oschina.net/liyuj" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/confluent/" class="nav-link">
  Confluent平台
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">最新版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">最新版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/java/Tools.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  2.10.0
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.9.1/" class="nav-link">
  2.9.1
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.8.0/" class="nav-link">
  2.8.0
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.7.0/" class="nav-link">
  2.7.0
</a></li><li class="dropdown-item"><!----> <a href="/doc/2.6.0/" class="nav-link">
  2.6.0
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/doc/java/" aria-current="page" class="sidebar-link">前言</a></li><li><a href="/doc/java/QuickStartGuide.html" class="sidebar-link">快速入门</a></li><li><a href="/doc/java/Installation.html" class="sidebar-link">安装</a></li><li><a href="/doc/java/SettingUp.html" class="sidebar-link">Ignite配置入门</a></li><li><a href="/doc/java/StartingNodes.html" class="sidebar-link">启动和停止节点</a></li><li><a href="/doc/java/Clustering.html" class="sidebar-link">集群化</a></li><li><a href="/doc/java/ThinClients.html" class="sidebar-link">瘦客户端</a></li><li><a href="/doc/java/DataModeling.html" class="sidebar-link">数据建模</a></li><li><a href="/doc/java/ConfiguringMemory.html" class="sidebar-link">配置内存</a></li><li><a href="/doc/java/Persistence.html" class="sidebar-link">配置持久化</a></li><li><a href="/doc/java/ConfiguringCaches.html" class="sidebar-link">配置缓存</a></li><li><a href="/doc/java/DataRebalancing.html" class="sidebar-link">数据再平衡</a></li><li><a href="/doc/java/DataStreaming.html" class="sidebar-link">数据流处理</a></li><li><a href="/doc/java/UsingKeyValueApi.html" class="sidebar-link">键-值API</a></li><li><a href="/doc/java/Transactions.html" class="sidebar-link">Ignite事务</a></li><li><a href="/doc/java/WorkingwithSQL.html" class="sidebar-link">处理SQL</a></li><li><a href="/doc/java/SQLReference.html" class="sidebar-link">SQL参考</a></li><li><a href="/doc/java/DistributedComputing.html" class="sidebar-link">分布式计算</a></li><li><a href="/doc/java/CodeDeployment.html" class="sidebar-link">代码部署</a></li><li><a href="/doc/java/MachineLearning.html" class="sidebar-link">机器学习</a></li><li><a href="/doc/java/ContinuousQueries.html" class="sidebar-link">Ignite持续查询</a></li><li><a href="/doc/java/Service.html" class="sidebar-link">Ignite服务</a></li><li><a href="/doc/java/Messaging.html" class="sidebar-link">Ignite消息</a></li><li><a href="/doc/java/DataStructures.html" class="sidebar-link">Ignite分布式数据结构</a></li><li><a href="/doc/java/DistributedLocks.html" class="sidebar-link">Ignite分布式锁</a></li><li><a href="/doc/java/RESTAPI.html" class="sidebar-link">REST API</a></li><li><a href="/doc/java/DotnetSpecific.html" class="sidebar-link">Ignite.NET</a></li><li><a href="/doc/java/CppSpecific.html" class="sidebar-link">Ignite C++</a></li><li><a href="/doc/java/Monitoring.html" class="sidebar-link">监控</a></li><li><a href="/doc/java/WorkingwithEvents.html" class="sidebar-link">处理事件</a></li><li><a href="/doc/java/Tools.html" aria-current="page" class="active sidebar-link">工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-控制脚本" class="sidebar-link">1.控制脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-1-接入集群" class="sidebar-link">1.1.接入集群</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-2-激活、冻结和拓扑管理" class="sidebar-link">1.2.激活、冻结和拓扑管理</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-3-事务管理" class="sidebar-link">1.3.事务管理</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-4-事务竞争检测" class="sidebar-link">1.4.事务竞争检测</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-5-缓存状态监控" class="sidebar-link">1.5.缓存状态监控</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-6-丢失分区重置" class="sidebar-link">1.6.丢失分区重置</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-7-一致性检查命令" class="sidebar-link">1.7.一致性检查命令</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-8-追踪配置" class="sidebar-link">1.8.追踪配置</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-9-集群id和标签" class="sidebar-link">1.9.集群ID和标签</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-10-指标命令" class="sidebar-link">1.10.指标命令</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-11-索引管理" class="sidebar-link">1.11.索引管理</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_1-12-系统视图命令" class="sidebar-link">1.12.系统视图命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_2-visor终端" class="sidebar-link">2.Visor终端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_2-1-摘要" class="sidebar-link">2.1.摘要</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_2-2-使用" class="sidebar-link">2.2.使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_3-sqlline" class="sidebar-link">3.SQLLine</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_3-1-概述" class="sidebar-link">3.1.概述</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_3-2-接入集群" class="sidebar-link">3.2.接入集群</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_3-3-命令" class="sidebar-link">3.3.命令</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_3-4-示例" class="sidebar-link">3.4.示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_4-tableau" class="sidebar-link">4.Tableau</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_4-1-概述" class="sidebar-link">4.1.概述</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_4-2-安装和配置" class="sidebar-link">4.2.安装和配置</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_4-3-接入集群" class="sidebar-link">4.3.接入集群</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_4-4-数据查询和分析" class="sidebar-link">4.4.数据查询和分析</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_5-informatica" class="sidebar-link">5.Informatica</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_5-1-概述" class="sidebar-link">5.1.概述</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_5-2-从informatica-powercenter-designer接入" class="sidebar-link">5.2.从Informatica PowerCenter Designer接入</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_5-3-在informatica服务节点上安装ignite-odbc" class="sidebar-link">5.3.在Informatica服务节点上安装Ignite ODBC</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_5-4-配置相关的连接" class="sidebar-link">5.4.配置相关的连接</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_5-5-在suse-11-4中安装ignite-odbc" class="sidebar-link">5.5.在Suse 11.4中安装Ignite ODBC</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_6-pentaho" class="sidebar-link">6.Pentaho</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_6-1-概述" class="sidebar-link">6.1.概述</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_6-2-安装和配置" class="sidebar-link">6.2.安装和配置</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_6-3-jdbc驱动配置" class="sidebar-link">6.3.JDBC驱动配置</a></li><li class="sidebar-sub-header"><a href="/doc/java/Tools.html#_6-4-数据的查询和分析" class="sidebar-link">6.4.数据的查询和分析</a></li></ul></li></ul></li><li><a href="/doc/java/Security.html" class="sidebar-link">安全</a></li><li><a href="/doc/java/ExtensionsIntegrations.html" class="sidebar-link">扩展和集成</a></li><li><a href="/doc/java/Plugins.html" class="sidebar-link">插件</a></li><li><a href="/doc/java/PerformanceTroubleshooting.html" class="sidebar-link">性能和故障排除</a></li><li><a href="/doc/java/Legal.html" class="sidebar-link">法律条款</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="工具"><a href="#工具" class="header-anchor">#</a> 工具</h1> <h2 id="_1-控制脚本"><a href="#_1-控制脚本" class="header-anchor">#</a> 1.控制脚本</h2> <p>Ignite提供了一个命令行脚本<code>control.sh|bat</code>，可以用它来对集群进行监控和管理，该脚本位于安装目录的<code>/bin/</code>文件夹。</p> <p>控制脚本的语法如下：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh <span class="token operator">&lt;</span>connection parameters<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>arguments<span class="token operator">&gt;</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat &lt;connection parameters&gt; &lt;command&gt; &lt;arguments&gt;</span>
</code></pre></div></section></div></div> <h3 id="_1-1-接入集群"><a href="#_1-1-接入集群" class="header-anchor">#</a> 1.1.接入集群</h3> <p>如果执行脚本时没有连接参数，控制脚本会尝试连接运行在本机的节点（<code>localhost:11211</code>），如果希望接入运行在远程主机上的节点，需要指定连接参数：</p> <table><thead><tr><th>参数</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td>--host HOST_OR_IP</td> <td>节点的主机名或者IP地址</td> <td><code>localhost</code></td></tr> <tr><td>--port PORT</td> <td>连接端口</td> <td><code>11211</code></td></tr> <tr><td>--user USER</td> <td>用户名</td> <td></td></tr> <tr><td>--password PASSWORD</td> <td>密码</td> <td></td></tr> <tr><td>--ping-interval PING_INTERVAL</td> <td>ping操作间隔</td> <td><code>5000</code></td></tr> <tr><td>--ping-timeout PING_TIMEOUT</td> <td>ping操作响应超时</td> <td><code>30000</code></td></tr> <tr><td>--ssl-protocol PROTOCOL1, PROTOCOL2…​</td> <td>接入集群时尝试的SSL协议列表，支持的协议在<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSE_Protocols" target="_self" rel="noopener noreferrer">这里</a>。</td> <td><code>TLS</code></td></tr> <tr><td>--ssl-cipher-suites CIPHER1,CIPHER2…​</td> <td>SSL密码列表，支持的密码在<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SupportedCipherSuites" target="_self" rel="noopener noreferrer">这里</a>。</td> <td></td></tr> <tr><td>--ssl-key-algorithm ALG</td> <td>SSL密钥算法</td> <td><code>SunX509</code></td></tr> <tr><td>--keystore-type KEYSTORE_TYPE</td> <td>密钥库类型</td> <td><code>JKS</code></td></tr> <tr><td>--keystore KEYSTORE_PATH</td> <td>密钥库路径，为控制脚本指定密钥库来开启SSL</td> <td></td></tr> <tr><td>--keystore-password KEYSTORE_PWD</td> <td>密钥库密码</td> <td></td></tr> <tr><td>--truststore-type TRUSTSTORE_TYPE</td> <td>信任库类型</td> <td><code>JKS</code></td></tr> <tr><td>--truststore TRUSTSTORE_PATH</td> <td>信任库路径</td> <td></td></tr> <tr><td>--truststore-password TRUSTSTORE_PWD</td> <td></td> <td>信任库密码</td></tr></tbody></table> <h3 id="_1-2-激活、冻结和拓扑管理"><a href="#_1-2-激活、冻结和拓扑管理" class="header-anchor">#</a> 1.2.激活、冻结和拓扑管理</h3> <p>可以使用控制脚本来激活/冻结集群，以及管理<a href="/doc/java/Clustering.html#_7-基线拓扑">基线拓扑</a>。</p> <h4 id="_1-2-1-获取集群状态"><a href="#_1-2-1-获取集群状态" class="header-anchor">#</a> 1.2.1.获取集群状态</h4> <p>集群可以有3个状态：激活、只读和非激活，具体可以参见<a href="/doc/java/Monitoring.html#_3-集群状态">集群状态</a>章节的介绍。</p> <p>执行下面的命令，可以获得集群的状态：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --state
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--state</span></span>
</code></pre></div></section></div></div> <h4 id="_1-2-2-激活集群"><a href="#_1-2-2-激活集群" class="header-anchor">#</a> 1.2.2.激活集群</h4> <p>激活是将当前可用的服务端节点集配置为基线拓扑，只有使用<a href="/doc/java/Persistence.html#_1-ignite持久化">原生持久化</a>时才需要激活。</p> <p>使用下面的命令可以激活集群。</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --set-state ACTIVE
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--set-state</span> ACTIVE</span>
</code></pre></div></section></div></div> <h4 id="_1-2-3-冻结集群"><a href="#_1-2-3-冻结集群" class="header-anchor">#</a> 1.2.3.冻结集群</h4> <div class="custom-block danger"><p class="custom-block-title">警告</p> <p>冻结会释放所有节点的内存资源，包括应用的数据，并禁用公开的集群API。如果内存中的缓存没有备份到持久化存储（不管是<a href="/doc/java/Persistence.html#_1-ignite持久化">原生持久化</a>还是<a href="/doc/java/Persistence.html#_2-外部存储">外部存储</a>），会丢失所有的数据，然后需要重新注入缓存数据。</p></div> <p>执行下面的命令可以冻结集群：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --set-state INACTIVE <span class="token punctuation">[</span>--yes<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--set-state</span> INACTIVE [<span class="token parameter attr-name">--yes</span>]</span>
</code></pre></div></section></div></div> <h4 id="_1-2-4-获取基线中注册的节点"><a href="#_1-2-4-获取基线中注册的节点" class="header-anchor">#</a> 1.2.4.获取基线中注册的节点</h4> <p>执行下面的命令可以获得基线中注册的节点列表：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span></span>
</code></pre></div></section></div></div> <p>输出中包含了当前的拓扑版本，基线中节点的唯一性ID列表，以及加入集群但是还没有添加到基线的节点列表。</p> <div class="language- extra-class"><pre class="language-text"><code>Command [BASELINE] started
Arguments: --baseline
--------------------------------------------------------------------------------
Cluster state: active
Current topology version: 3

Current topology version: 3 (Coordinator: ConsistentId=dd3d3959-4fd6-4dc2-8199-bee213b34ff1, Order=1)

Baseline nodes:
    ConsistentId=7d79a1b5-cbbd-4ab5-9665-e8af0454f178, State=ONLINE, Order=2
    ConsistentId=dd3d3959-4fd6-4dc2-8199-bee213b34ff1, State=ONLINE, Order=1
--------------------------------------------------------------------------------
Number of baseline nodes: 2

Other nodes:
    ConsistentId=30e16660-49f8-4225-9122-c1b684723e97, Order=3
Number of other nodes: 1
Command [BASELINE] finished with code: 0
Control utility has completed execution at: 2019-12-24T16:53:08.392865
Execution time: 333 ms
</code></pre></div><h4 id="_1-2-5-往基线拓扑中添加节点"><a href="#_1-2-5-往基线拓扑中添加节点" class="header-anchor">#</a> 1.2.5.往基线拓扑中添加节点</h4> <p>使用下面的命令可以往基线拓扑中添加节点。节点加入之后，会开启<a href="/doc/java/DataRebalancing.html">再平衡过程</a>。</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline <span class="token function">add</span> consistentId1,consistentId2,<span class="token punctuation">..</span>. <span class="token punctuation">[</span>--yes<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span> add consistentId1,consistentId2,... [<span class="token parameter attr-name">--yes</span>]</span>
</code></pre></div></section></div></div> <h4 id="_1-2-6-从基线拓扑中删除节点"><a href="#_1-2-6-从基线拓扑中删除节点" class="header-anchor">#</a> 1.2.6.从基线拓扑中删除节点</h4> <p>使用下面的命令可以从基线拓扑中删除节点。只有离线的节点才能从基线拓扑中删除，需要先停止该节点然后才能执行<code>remove</code>命令。这个操作会开启再平衡过程，会在基线拓扑的剩余节点中重新分布数据。</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline remove consistentId1,consistentId2,<span class="token punctuation">..</span>. <span class="token punctuation">[</span>--yes<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span> remove consistentId1,consistentId2,... [<span class="token parameter attr-name">--yes</span>]</span>
</code></pre></div></section></div></div> <h4 id="_1-2-7-配置基线拓扑"><a href="#_1-2-7-配置基线拓扑" class="header-anchor">#</a> 1.2.7.配置基线拓扑</h4> <p>可以通过提供节点的唯一性ID列表，或者通过指定基线拓扑版本来配置基线拓扑。</p> <p>要将一组节点配置为基线，可以使用下面的命令：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline <span class="token builtin class-name">set</span> consistentId1,consistentId2,<span class="token punctuation">..</span>. <span class="token punctuation">[</span>--yes<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span> set consistentId1,consistentId2,... [<span class="token parameter attr-name">--yes</span>]</span>
</code></pre></div></section></div></div> <p>要恢复指定版本的基线，可以使用下面的命令：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline version topologyVersion <span class="token punctuation">[</span>--yes<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span> version topologyVersion [<span class="token parameter attr-name">--yes</span>]</span>
</code></pre></div></section></div></div> <h4 id="_1-2-8-启用基线拓扑自动调整"><a href="#_1-2-8-启用基线拓扑自动调整" class="header-anchor">#</a> 1.2.8.启用基线拓扑自动调整</h4> <p><a href="/doc/java/Clustering.html#_7-3-基线拓扑自动调整">基线拓扑自动调整</a>是指在拓扑稳定特定时间后自动更新基线拓扑。</p> <p>对于纯内存集群，自动调整是默认启用的，并且超时设置为0。这意味着基线拓扑在服务端节点加入或离开集群后立即更改。对于开启持久化的集群，自动调整默认是警用的，使用以下命令可以开启：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline auto_adjust <span class="token builtin class-name">enable</span> <span class="token function">timeout</span> <span class="token number">30000</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span> auto_adjust enable timeout <span class="token number">30000</span></span>
</code></pre></div></section></div></div> <p>超时时间以毫秒计，在上一次JOIN/LEFT/FAIL事件之后经过给定的毫秒数时，会将基线设置为当前拓扑。每个新的JOIN/LEFT/FAIL事件都会重新启动超时倒计时。</p> <p>使用以下命令可以禁用基线自动调整：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --baseline auto_adjust disable
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--baseline</span> auto_adjust disable</span>
</code></pre></div></section></div></div> <h3 id="_1-3-事务管理"><a href="#_1-3-事务管理" class="header-anchor">#</a> 1.3.事务管理</h3> <p>控制脚本可以拿到集群中正在执行的事务的信息，也可以取消特定的事务。</p> <p>下面的命令可以返回匹配过滤条件的事务列表（或者没有过滤条件返回所有的事务）：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tx <span class="token operator">&lt;</span>transaction filter<span class="token operator">&gt;</span> --info
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--tx</span> &lt;transaction filter&gt; <span class="token parameter attr-name">--info</span></span>
</code></pre></div></section></div></div> <p>事务过滤器参数在下表列出：</p> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td>--xid XID</td> <td>事务ID</td></tr> <tr><td>--min-duration SECONDS</td> <td>事务已执行的最小秒数</td></tr> <tr><td>--min-size SIZE</td> <td>事务大小最小值</td></tr> <tr><td>--label LABEL</td> <td>事务的标签，可以使用正则表达式</td></tr> <tr><td>--servers</td> <td>--clients</td></tr> <tr><td>--nodes nodeId1,nodeId2…​</td> <td>希望获得事务信息的节点唯一性ID列表</td></tr> <tr><td>--limit NUMBER</td> <td>将事务数限制为指定值</td></tr> <tr><td>--order DURATION</td> <td>SIZE</td></tr></tbody></table> <p>使用下面的命令可以取消事务：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tx <span class="token operator">&lt;</span>transaction filter<span class="token operator">&gt;</span> --kill
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--tx</span> &lt;transaction filter&gt; <span class="token parameter attr-name">--kill</span></span>
</code></pre></div></section></div></div> <p>要取消已运行超过100秒的事务，请执行以下命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tx --min-duration <span class="token number">100</span> --kill
</code></pre></div><h3 id="_1-4-事务竞争检测"><a href="#_1-4-事务竞争检测" class="header-anchor">#</a> 1.4.事务竞争检测</h3> <p><code>contention</code>命令可用于检测多个事务在相同键上竞争创建锁的情况，当有事务长期运行或者挂起时，该命令很有用。</p> <p>示例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Reports all keys that are point of contention for at least 5 transactions on all cluster nodes.</span>
control.sh<span class="token operator">|</span>bat --cache contention <span class="token number">5</span>

<span class="token comment"># Reports all keys that are point of contention for at least 5 transactions on specific server node.</span>
control.sh<span class="token operator">|</span>bat --cache contention <span class="token number">5</span> f2ea-5f56-11e8-9c2d-fa7a
</code></pre></div><p>如果存在任何竞争激烈的键，该工具将转储大量信息，包括发生争用的键、事务和节点。</p> <p>示例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>node<span class="token operator">=</span>TcpDiscoveryNode <span class="token punctuation">[</span>id<span class="token operator">=</span>d9620450-eefa-4ab6-a821-644098f00001, <span class="token assign-left variable">addrs</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">127.0</span>.0.1<span class="token punctuation">]</span>, <span class="token assign-left variable">sockAddrs</span><span class="token operator">=</span><span class="token punctuation">[</span>/127.0.0.1:47501<span class="token punctuation">]</span>, <span class="token assign-left variable">discPort</span><span class="token operator">=</span><span class="token number">47501</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">intOrder</span><span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">lastExchangeTime</span><span class="token operator">=</span><span class="token number">1527169443913</span>, <span class="token assign-left variable">loc</span><span class="token operator">=</span>false, <span class="token assign-left variable">ver</span><span class="token operator">=</span><span class="token number">2.5</span>.0<span class="token comment">#20180518-sha1:02c9b2de, isClient=false]]</span>

// No contention on node d9620450-eefa-4ab6-a821-644098f00001.

<span class="token punctuation">[</span>node<span class="token operator">=</span>TcpDiscoveryNode <span class="token punctuation">[</span>id<span class="token operator">=</span>03379796-df31-4dbd-80e5-09cef5000000, <span class="token assign-left variable">addrs</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">127.0</span>.0.1<span class="token punctuation">]</span>, <span class="token assign-left variable">sockAddrs</span><span class="token operator">=</span><span class="token punctuation">[</span>/127.0.0.1:47500<span class="token punctuation">]</span>, <span class="token assign-left variable">discPort</span><span class="token operator">=</span><span class="token number">47500</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">intOrder</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">lastExchangeTime</span><span class="token operator">=</span><span class="token number">1527169443913</span>, <span class="token assign-left variable">loc</span><span class="token operator">=</span>false, <span class="token assign-left variable">ver</span><span class="token operator">=</span><span class="token number">2.5</span>.0<span class="token comment">#20180518-sha1:02c9b2de, isClient=false]]</span>
    TxEntry <span class="token punctuation">[</span>cacheId<span class="token operator">=</span><span class="token number">1544803905</span>, <span class="token assign-left variable">key</span><span class="token operator">=</span>KeyCacheObjectImpl <span class="token punctuation">[</span>part<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>, <span class="token assign-left variable">queue</span><span class="token operator">=</span><span class="token number">10</span>, <span class="token assign-left variable">op</span><span class="token operator">=</span>CREATE, <span class="token assign-left variable">val</span><span class="token operator">=</span>UserCacheObjectImpl <span class="token punctuation">[</span>val<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>, <span class="token assign-left variable">tx</span><span class="token operator">=</span>GridNearTxLocal<span class="token punctuation">[</span>xid<span class="token operator">=</span>e9754629361-00000000-0843-9f61-0000-000000000001, <span class="token assign-left variable">xidVersion</span><span class="token operator">=</span>GridCacheVersion <span class="token punctuation">[</span>topVer<span class="token operator">=</span><span class="token number">138649441</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">1527169439646</span>, <span class="token assign-left variable">nodeOrder</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>, <span class="token assign-left variable">concurrency</span><span class="token operator">=</span>PESSIMISTIC, <span class="token assign-left variable">isolation</span><span class="token operator">=</span>REPEATABLE_READ, <span class="token assign-left variable">state</span><span class="token operator">=</span>ACTIVE, <span class="token assign-left variable">invalidate</span><span class="token operator">=</span>false, <span class="token assign-left variable">rollbackOnly</span><span class="token operator">=</span>false, <span class="token assign-left variable">nodeId</span><span class="token operator">=</span>03379796-df31-4dbd-80e5-09cef5000000, <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">1247</span><span class="token punctuation">]</span>, <span class="token assign-left variable">other</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    TxEntry <span class="token punctuation">[</span>cacheId<span class="token operator">=</span><span class="token number">1544803905</span>, <span class="token assign-left variable">key</span><span class="token operator">=</span>KeyCacheObjectImpl <span class="token punctuation">[</span>part<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>, <span class="token assign-left variable">queue</span><span class="token operator">=</span><span class="token number">10</span>, <span class="token assign-left variable">op</span><span class="token operator">=</span>READ, <span class="token assign-left variable">val</span><span class="token operator">=</span>null, <span class="token assign-left variable">tx</span><span class="token operator">=</span>GridNearTxLocal<span class="token punctuation">[</span>xid<span class="token operator">=</span>8a754629361-00000000-0843-9f61-0000-000000000001, <span class="token assign-left variable">xidVersion</span><span class="token operator">=</span>GridCacheVersion <span class="token punctuation">[</span>topVer<span class="token operator">=</span><span class="token number">138649441</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">1527169439656</span>, <span class="token assign-left variable">nodeOrder</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>, <span class="token assign-left variable">concurrency</span><span class="token operator">=</span>PESSIMISTIC, <span class="token assign-left variable">isolation</span><span class="token operator">=</span>REPEATABLE_READ, <span class="token assign-left variable">state</span><span class="token operator">=</span>ACTIVE, <span class="token assign-left variable">invalidate</span><span class="token operator">=</span>false, <span class="token assign-left variable">rollbackOnly</span><span class="token operator">=</span>false, <span class="token assign-left variable">nodeId</span><span class="token operator">=</span>03379796-df31-4dbd-80e5-09cef5000000, <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">1175</span><span class="token punctuation">]</span>, <span class="token assign-left variable">other</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    TxEntry <span class="token punctuation">[</span>cacheId<span class="token operator">=</span><span class="token number">1544803905</span>, <span class="token assign-left variable">key</span><span class="token operator">=</span>KeyCacheObjectImpl <span class="token punctuation">[</span>part<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>, <span class="token assign-left variable">queue</span><span class="token operator">=</span><span class="token number">10</span>, <span class="token assign-left variable">op</span><span class="token operator">=</span>READ, <span class="token assign-left variable">val</span><span class="token operator">=</span>null, <span class="token assign-left variable">tx</span><span class="token operator">=</span>GridNearTxLocal<span class="token punctuation">[</span>xid<span class="token operator">=</span>6a754629361-00000000-0843-9f61-0000-000000000001, <span class="token assign-left variable">xidVersion</span><span class="token operator">=</span>GridCacheVersion <span class="token punctuation">[</span>topVer<span class="token operator">=</span><span class="token number">138649441</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">1527169439654</span>, <span class="token assign-left variable">nodeOrder</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>, <span class="token assign-left variable">concurrency</span><span class="token operator">=</span>PESSIMISTIC, <span class="token assign-left variable">isolation</span><span class="token operator">=</span>REPEATABLE_READ, <span class="token assign-left variable">state</span><span class="token operator">=</span>ACTIVE, <span class="token assign-left variable">invalidate</span><span class="token operator">=</span>false, <span class="token assign-left variable">rollbackOnly</span><span class="token operator">=</span>false, <span class="token assign-left variable">nodeId</span><span class="token operator">=</span>03379796-df31-4dbd-80e5-09cef5000000, <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">1175</span><span class="token punctuation">]</span>, <span class="token assign-left variable">other</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    TxEntry <span class="token punctuation">[</span>cacheId<span class="token operator">=</span><span class="token number">1544803905</span>, <span class="token assign-left variable">key</span><span class="token operator">=</span>KeyCacheObjectImpl <span class="token punctuation">[</span>part<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>, <span class="token assign-left variable">queue</span><span class="token operator">=</span><span class="token number">10</span>, <span class="token assign-left variable">op</span><span class="token operator">=</span>READ, <span class="token assign-left variable">val</span><span class="token operator">=</span>null, <span class="token assign-left variable">tx</span><span class="token operator">=</span>GridNearTxLocal<span class="token punctuation">[</span>xid<span class="token operator">=</span>7a754629361-00000000-0843-9f61-0000-000000000001, <span class="token assign-left variable">xidVersion</span><span class="token operator">=</span>GridCacheVersion <span class="token punctuation">[</span>topVer<span class="token operator">=</span><span class="token number">138649441</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">1527169439655</span>, <span class="token assign-left variable">nodeOrder</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>, <span class="token assign-left variable">concurrency</span><span class="token operator">=</span>PESSIMISTIC, <span class="token assign-left variable">isolation</span><span class="token operator">=</span>REPEATABLE_READ, <span class="token assign-left variable">state</span><span class="token operator">=</span>ACTIVE, <span class="token assign-left variable">invalidate</span><span class="token operator">=</span>false, <span class="token assign-left variable">rollbackOnly</span><span class="token operator">=</span>false, <span class="token assign-left variable">nodeId</span><span class="token operator">=</span>03379796-df31-4dbd-80e5-09cef5000000, <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">1175</span><span class="token punctuation">]</span>, <span class="token assign-left variable">other</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    TxEntry <span class="token punctuation">[</span>cacheId<span class="token operator">=</span><span class="token number">1544803905</span>, <span class="token assign-left variable">key</span><span class="token operator">=</span>KeyCacheObjectImpl <span class="token punctuation">[</span>part<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>, <span class="token assign-left variable">queue</span><span class="token operator">=</span><span class="token number">10</span>, <span class="token assign-left variable">op</span><span class="token operator">=</span>READ, <span class="token assign-left variable">val</span><span class="token operator">=</span>null, <span class="token assign-left variable">tx</span><span class="token operator">=</span>GridNearTxLocal<span class="token punctuation">[</span>xid<span class="token operator">=</span>4a754629361-00000000-0843-9f61-0000-000000000001, <span class="token assign-left variable">xidVersion</span><span class="token operator">=</span>GridCacheVersion <span class="token punctuation">[</span>topVer<span class="token operator">=</span><span class="token number">138649441</span>, <span class="token assign-left variable">order</span><span class="token operator">=</span><span class="token number">1527169439652</span>, <span class="token assign-left variable">nodeOrder</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span>, <span class="token assign-left variable">concurrency</span><span class="token operator">=</span>PESSIMISTIC, <span class="token assign-left variable">isolation</span><span class="token operator">=</span>REPEATABLE_READ, <span class="token assign-left variable">state</span><span class="token operator">=</span>ACTIVE, <span class="token assign-left variable">invalidate</span><span class="token operator">=</span>false, <span class="token assign-left variable">rollbackOnly</span><span class="token operator">=</span>false, <span class="token assign-left variable">nodeId</span><span class="token operator">=</span>03379796-df31-4dbd-80e5-09cef5000000, <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">1175</span><span class="token punctuation">]</span>, <span class="token assign-left variable">other</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

// Node 03379796-df31-4dbd-80e5-09cef5000000 is place <span class="token keyword">for</span> contention on key KeyCacheObjectImpl <span class="token punctuation">[</span>part<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">hasValBytes</span><span class="token operator">=</span>false<span class="token punctuation">]</span>.
</code></pre></div><h3 id="_1-5-缓存状态监控"><a href="#_1-5-缓存状态监控" class="header-anchor">#</a> 1.5.缓存状态监控</h3> <p>控制脚本的另一个重要命令是<code>--cache list</code>，其用于缓存的监控。该命令可以提供已部署缓存的列表及其关联/分布参数，还有在缓存组内的分布，另外还有一个命令用于查看已有的原子序列。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Displays a list of all caches</span>
control.sh<span class="token operator">|</span>bat --cache list <span class="token builtin class-name">.</span>

<span class="token comment"># Displays a list of caches whose names start with &quot;account-&quot;.</span>
control.sh<span class="token operator">|</span>bat --cache list account-.*

<span class="token comment"># Displays info about cache group distribution for all caches.</span>
control.sh<span class="token operator">|</span>bat --cache list <span class="token builtin class-name">.</span> --groups

<span class="token comment"># Displays info about cache group distribution for the caches whose names start with &quot;account-&quot;.</span>
control.sh<span class="token operator">|</span>bat --cache list account-.* --groups

<span class="token comment"># Displays info about all atomic sequences.</span>
control.sh<span class="token operator">|</span>bat --cache list <span class="token builtin class-name">.</span> --seq

<span class="token comment"># Displays info about the atomic sequnces whose names start with &quot;counter-&quot;.</span>
control.sh<span class="token operator">|</span>bat --cache list counter-.* --seq
</code></pre></div><h3 id="_1-6-丢失分区重置"><a href="#_1-6-丢失分区重置" class="header-anchor">#</a> 1.6.丢失分区重置</h3> <p>可以使用控制脚本重置某个缓存丢失的分区，具体请参见<a href="/doc/java/ConfiguringCaches.html#_3-分区丢失策略">分区丢失策略</a>。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --cache reset_lost_partitions cacheName1,cacheName2,<span class="token punctuation">..</span>.
</code></pre></div><h3 id="_1-7-一致性检查命令"><a href="#_1-7-一致性检查命令" class="header-anchor">#</a> 1.7.一致性检查命令</h3> <p><code>control.sh|bat</code>包括一组一致性检查命令，可用于验证内部数据的一致性。</p> <p>首先，这些命令可用于调试和故障排除场景，尤其是在开发高峰期。</p> <p>其次，如果怀疑查询（例如SQL查询等）返回的结果集不完整或错误，则这些命令可以验证数据中是否存在不一致。</p> <p>最后，一致性检查命令可以用作常规集群运行状况检测的一部分。</p> <p>下面看下更具体的使用场景：</p> <h4 id="_1-7-1-验证分区校验和"><a href="#_1-7-1-验证分区校验和" class="header-anchor">#</a> 1.7.1.验证分区校验和</h4> <p><code>idle_verify</code>命令将主分区的哈希与备份分区的哈希进行比较，并报告差异。差异可能是更新操作期间节点故障或非正常关闭导致。如果检测到任何不一致之处，建议删除不正确的分区。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Checks partitions of all caches that their partitions actually contain same data.</span>
control.sh<span class="token operator">|</span>bat --cache idle_verify

<span class="token comment"># Checks partitions of specific caches that their partitions actually contain same data.</span>
control.sh<span class="token operator">|</span>bat --cache idle_verify cache1,cache2,cache3
</code></pre></div><p>如果有分区出现偏离，则会输出冲突的分区列表，如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>idle_verify check has finished, found 2 conflict partitions.

Conflict partition: PartitionKey [grpId=1544803905, grpName=default, partId=5]
Partition instances: [PartitionHashRecord [isPrimary=true, partHash=97506054, updateCntr=3, size=3, consistentId=bltTest1], PartitionHashRecord [isPrimary=false, partHash=65957380, updateCntr=3, size=2, consistentId=bltTest0]]
Conflict partition: PartitionKey [grpId=1544803905, grpName=default, partId=6]
Partition instances: [PartitionHashRecord [isPrimary=true, partHash=97595430, updateCntr=3, size=3, consistentId=bltTest1], PartitionHashRecord [isPrimary=false, partHash=66016964, updateCntr=3, size=2, consistentId=bltTest0]]
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">idle_verify检查期间集群应处于空闲状态</p> <p>当<code>idle_verify</code>计算哈希时，所有的更新应停止，否则可能显示错误的结果。如果正在不停地更新，比较一个分布式系统的大规模数据集是不可能的。</p></div> <h4 id="_1-7-2-验证sql索引一致性"><a href="#_1-7-2-验证sql索引一致性" class="header-anchor">#</a> 1.7.2.验证SQL索引一致性</h4> <p><code>validate_indexes</code>命令将验证所有集群节点上给定缓存的索引。</p> <p>验证过程将检查以下内容：</p> <ol><li>二级SQL索引可以访问主索引引用的所有键-值条目；</li> <li>主索引引用的所有键-值条目都必须是可访问的，主索引的引用不应指向空值；</li> <li>主索引可以访问二级SQL索引引用的所有键-值条目。</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Checks indexes of all caches on all cluster nodes.</span>
control.sh<span class="token operator">|</span>bat --cache validate_indexes

<span class="token comment"># Checks indexes of specific caches on all cluster nodes.</span>
control.sh<span class="token operator">|</span>bat --cache validate_indexes cache1,cache2

<span class="token comment"># Checks indexes of specific caches on node with given node ID.</span>
control.sh<span class="token operator">|</span>bat --cache validate_indexes cache1,cache2 f2ea-5f56-11e8-9c2d-fa7a
</code></pre></div><p>如果索引引用了不存在的条目（或部分条目未被索引），会输出错误，如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>PartitionKey [grpId=-528791027, grpName=persons-cache-vi, partId=0] ValidateIndexesPartitionResult [updateCntr=313, size=313, isPrimary=true, consistentId=bltTest0]
IndexValidationIssue [key=0, cacheName=persons-cache-vi, idxName=_key_PK], class org.apache.ignite.IgniteCheckedException: Key is present in CacheDataTree, but can't be found in SQL index.
IndexValidationIssue [key=0, cacheName=persons-cache-vi, idxName=PERSON_ORGID_ASC_IDX], class org.apache.ignite.IgniteCheckedException: Key is present in CacheDataTree, but can't be found in SQL index.
validate_indexes has finished with errors (listed above).
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">validate_indexes检查期间集群应处于空闲状态</p> <p>与<code>idle_verify</code>一样，索引验证工具仅在停止更新后才能正常工作。否则检查程序线程与更新条目/索引的线程之间可能会出现竞争，这可能导致错误的检测结果。</p></div> <h4 id="_1-7-3-检查sql索引内联值"><a href="#_1-7-3-检查sql索引内联值" class="header-anchor">#</a> 1.7.3.检查SQL索引内联值</h4> <p>运行中的Ignite集群在各个节点上可能有不同的SQL索引内联值，例如各个节点上<code>IGNITE_MAX_INDEX_PAYLOAD_SIZE</code>的属性值不同等。索引内联值之间的差异可能导致性能下降。</p> <p><code>check_index_inline_sizes</code>命令会验证所有节点上给定缓存的索引内联值。在节点加入时会始终检查二级索引的内联值，如有不同，则会在日志中输出警告信息。</p> <p>使用以下命令可以检查各个节点上二级索引内联值是否相同：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh<span class="token operator">|</span>bat --cache check_index_inline_sizes
</code></pre></div><p>如果内联值不同，控制台输出如下所示：</p> <div class="language- extra-class"><pre class="language-text"><code>Control utility [ver. 2.10.0]
2021 Copyright(C) Apache Software Foundation
User: test
Time: 2021-04-27T16:13:21.213
Command [CACHE] started
Arguments: --cache check_index_inline_sizes --yes

Found 4 secondary indexes.
3 index(es) have different effective inline size on nodes. It can lead to
performance degradation in SQL queries.
Index(es):
  Full index name: PUBLIC#TEST_TABLE#L_IDX nodes:
[ca1d23ae-89d4-4e8d-ae12-6c68f3900000] inline size: 1, nodes:
[8327bbd1-df08-4b97-8721-de95e363e745] inline size: 2
  Full index name: PUBLIC#TEST_TABLE#S1_IDX nodes:
[ca1d23ae-89d4-4e8d-ae12-6c68f3900000] inline size: 1, nodes:
[8327bbd1-df08-4b97-8721-de95e363e745] inline size: 2
  Full index name: PUBLIC#TEST_TABLE#I_IDX nodes:
[ca1d23ae-89d4-4e8d-ae12-6c68f3900000] inline size: 1, nodes:
[8327bbd1-df08-4b97-8721-de95e363e745] inline size: 2
</code></pre></div><h3 id="_1-8-追踪配置"><a href="#_1-8-追踪配置" class="header-anchor">#</a> 1.8.追踪配置</h3> <p>通过<code>--tracing-configuration</code>命令可以启用/禁用某个API的追踪采样，具体请参见<a href="/doc/java/Monitoring.html#_7-追踪">追踪</a>章节的介绍。</p> <p>使用该命令之前，需要开启控制脚本的试验性功能：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">IGNITE_ENABLE_EXPERIMENTAL_COMMAND</span><span class="token operator">=</span>true
</code></pre></div><p>执行下面的命令可以查看当前的追踪配置：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tracing-configuration
</code></pre></div><p>要启用某个API的追踪采样：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tracing-configuration <span class="token builtin class-name">set</span> --scope <span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span> --sampling-rate <span class="token operator">&lt;</span>rate<span class="token operator">&gt;</span> --label <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td><code>--scope</code></td> <td>要追踪的API：<br>1.<code>DISCOVERY</code>：发现事件；<br>2.<code>EXCHANGE</code>：交换事件；<br>3.<code>COMMUNICATION</code>：通信事件；<br>4.<code>TX</code>：事务</td></tr> <tr><td><code>--sampling-rate</code></td> <td>概率采样率，介于<code>0.0</code>和<code>1.0</code>之间的数字（包含），<code>0</code>表示不采样（默认），<code>1</code>表示始终采样。例如<code>0.5</code>表示每条追踪都以50％的概率采样</td></tr> <tr><td><code>--label</code></td> <td>仅适用于<code>TX</code>API范围。该参数定义具有给定标签的事务的采样率。当指定<code>--label</code>参数时，则Ignite将追踪指定标签的事务。可以为不同的标签配置不同的采样率。没有标签的事务追踪将以默认采样率采样，<code>TX</code>范围的默认采样率可以通过不带<code>--label</code>参数的命令进行配置</td></tr></tbody></table> <p>示例：</p> <ul><li><p>追踪所有的发现事件：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tracing-configuration <span class="token builtin class-name">set</span> --scope DISCOVER --sampling-rate <span class="token number">1</span>
</code></pre></div></li> <li><p>追踪所有的事务：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tracing-configuration <span class="token builtin class-name">set</span> --scope TX --sampling-rate <span class="token number">1</span>
</code></pre></div></li> <li><p>配置标签为<code>report</code>的事务的采样率为50%：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --tracing-configuration <span class="token builtin class-name">set</span> --scope TX --sampling-rate <span class="token number">0.5</span>
</code></pre></div></li></ul> <h3 id="_1-9-集群id和标签"><a href="#_1-9-集群id和标签" class="header-anchor">#</a> 1.9.集群ID和标签</h3> <p>集群ID可以唯一标识一个集群，其是在集群第一次启动时自动生成的，具体请参见<a href="/doc/java/Monitoring.html#_2-集群id和标签">集群ID和标签</a>章节的内容。</p> <p>使用<code>--state</code>命令可查看当前集群的ID：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --state
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--state</span></span>
</code></pre></div></section></div></div> <p>然后检查输出：</p> <div class="language- extra-class"><pre class="language-text"><code>Command [STATE] started
Arguments: --state
--------------------------------------------------------------------------------
Cluster  ID: bf9764ea-995e-4ea9-b35d-8c6d078b0234
Cluster tag: competent_black
--------------------------------------------------------------------------------
Cluster is active
Command [STATE] finished with code: 0
</code></pre></div><p>集群标签是可以分配给集群的用户友好名称，使用以下命令可以修改标签（标签不得超过280个字符）：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --change-tag <span class="token operator">&lt;</span>new-tag<span class="token operator">&gt;</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--change-tag</span> &lt;new-tag&gt;</span>
</code></pre></div></section></div></div> <h3 id="_1-10-指标命令"><a href="#_1-10-指标命令" class="header-anchor">#</a> 1.10.指标命令</h3> <p><code>metrics</code>命令会输出一个指标或者由参数列表提供的指标注册表的值。使用<code>--node-id</code>参数，可以拿到某个特定节点的指标，如果未指定该参数，Ignite会随机选择一个节点。</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --metric sys
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--metric</span> sys</span>
</code></pre></div></section></div></div> <p>指标输出示例：</p> <div class="language- extra-class"><pre class="language-text"><code>control.sh --metric sysCurrentThreadCpuTime
Command [METRIC] started
Arguments: --metric sys
--------------------------------------------------------------------------------
metric                          value
sys.CurrentThreadCpuTime        17270000
Command [METRIC] finished with code: 0
</code></pre></div><p>指标注册表输出示例：</p> <div class="language- extra-class"><pre class="language-text"><code>control.sh --metric io.dataregion.default
Command [METRIC] started
Arguments: --metric sys
--------------------------------------------------------------------------------
metric                          value
io.dataregion.default.TotalAllocatedSize          0
io.dataregion.default.LargeEntriesPagesCount      0
io.dataregion.default.PagesReplaced               0
io.dataregion.default.PhysicalMemorySize          0
io.dataregion.default.CheckpointBufferSize        0
io.dataregion.default.PagesReplaceRate            0
io.dataregion.default.InitialSize                 268435456
io.dataregion.default.PagesRead                   0
io.dataregion.default.AllocationRate              0
io.dataregion.default.OffHeapSize                 0
io.dataregion.default.UsedCheckpointBufferSize    0
io.dataregion.default.MaxSize                     6871947673
io.dataregion.default.OffheapUsedSize             0
io.dataregion.default.EmptyDataPages              0
io.dataregion.default.PagesFillFactor             0.0
io.dataregion.default.DirtyPages                  0
io.dataregion.default.TotalThrottlingTime         0
io.dataregion.default.EvictionRate                0
io.dataregion.default.PagesWritten                0
io.dataregion.default.TotalAllocatedPages         0
io.dataregion.default.PagesReplaceAge             0
io.dataregion.default.PhysicalMemoryPages         0
Command [METRIC] finished with code: 0
</code></pre></div><h3 id="_1-11-索引管理"><a href="#_1-11-索引管理" class="header-anchor">#</a> 1.11.索引管理</h3> <p>下面的命令可以获得索引的特定信息，然后触发索引的重建过程。</p> <p>要获取所有匹配过滤规则的索引列表，可使用下面的命令：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --cache indexes_list <span class="token punctuation">[</span>--node-id nodeId<span class="token punctuation">]</span> <span class="token punctuation">[</span>--group-name grpRegExp<span class="token punctuation">]</span> <span class="token punctuation">[</span>--cache-name cacheRegExp<span class="token punctuation">]</span> <span class="token punctuation">[</span>--index-name idxNameRegExp<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--cache</span> indexes_list [<span class="token parameter attr-name">--node-id</span> nodeId] [<span class="token parameter attr-name">--group-name</span> grpRegExp] [<span class="token parameter attr-name">--cache-name</span> cacheRegExp] [<span class="token parameter attr-name">--index-name</span> idxNameRegExp]</span>
</code></pre></div></section></div></div> <p>参数：</p> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td><code>--node-id nodeId</code></td> <td>作业执行的节点ID，如果ID未指定，集群会选择一个节点</td></tr> <tr><td><code>--group-name regExp</code></td> <td>启用按缓存组名筛选的正则表达式</td></tr> <tr><td><code>--cache-name regExp</code></td> <td>启用按缓存名筛选的正则表达式</td></tr> <tr><td><code>--index-name regExp</code></td> <td>启用按索引名筛选的正则表达式</td></tr></tbody></table> <p>要获取正在重建索引的所有缓存的列表，可使用以下命令：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --cache indexes_rebuild_status <span class="token punctuation">[</span>--node-id nodeId<span class="token punctuation">]</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--cache</span> indexes_rebuild_status [<span class="token parameter attr-name">--node-id</span> nodeId]</span>
</code></pre></div></section></div></div> <p>要触发指定缓存或缓存组的所有索引的重建过程，可使用以下命令：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --cache indexes_force_rebuild --node-id nodeId --cache-name cacheName1,<span class="token punctuation">..</span>.cacheNameN<span class="token operator">|</span>--group-name groupName1,<span class="token punctuation">..</span>.groupNameN
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--cache</span> indexes_force_rebuild <span class="token parameter attr-name">--node-id</span> nodeId <span class="token parameter attr-name">--cache-name</span> cacheName1,...cacheNameN|<span class="token parameter attr-name">--group-name</span> groupName1,...groupNameN</span>
</code></pre></div></section></div></div> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td><code>--node-id</code></td> <td>重建索引的节点ID</td></tr> <tr><td><code>--cache-names</code></td> <td>待重建索引的缓存名列表，逗号分割</td></tr> <tr><td><code>--group-names</code></td> <td>待重建索引的缓存组名列表，逗号分割</td></tr></tbody></table> <h3 id="_1-12-系统视图命令"><a href="#_1-12-系统视图命令" class="header-anchor">#</a> 1.12.系统视图命令</h3> <p>该命令会输出由参数列表指定的系统视图的内容，使用<code>--node-id</code>参数，可以拿到某个特定节点的指标，如果未指定该参数，Ignite会随机选择一个节点。</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-shell extra-class"><pre class="language-shell"><code>control.sh --system-view views
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">control</span>.bat <span class="token parameter attr-name">--system-view</span> views</span>
</code></pre></div></section></div></div> <p>输出示例：</p> <div class="language- extra-class"><pre class="language-text"><code>control.sh --system-view nodes
Command [SYSTEM-VIEW] started
Arguments: --system-view nodes
--------------------------------------------------------------------------------
nodeId                                  consistentId                                         version                          isClient    isDaemon    nodeOrder    addresses                                          hostnames          isLocal
a8a28869-cac6-4b17-946a-6f7f547b9f62    0:0:0:0:0:0:0:1%lo0,127.0.0.1,192.168.31.45:47500    2.10.0#20201230-sha1:00000000    false       false               1    [0:0:0:0:0:0:0:1%lo0, 127.0.0.1, 192.168.31.45]    [192.168.31.45]    true
d580433d-c621-45ff-a558-b4df82d09613    0:0:0:0:0:0:0:1%lo0,127.0.0.1,192.168.31.45:47501    2.10.0#20201230-sha1:00000000    false       false               2    [0:0:0:0:0:0:0:1%lo0, 127.0.0.1, 192.168.31.45]    [192.168.31.45]    false
Command [SYSTEM-VIEW] finished with code: 0
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>control.sh --system-view views
Command [SYSTEM-VIEW] started
Arguments: --system-view views
--------------------------------------------------------------------------------
name                           schema    description
NODES                          SYS       Cluster nodes
SQL_QUERIES_HISTORY            SYS       SQL queries history.
INDEXES                        SYS       SQL indexes
BASELINE_NODES                 SYS       Baseline topology nodes
STRIPED_THREADPOOL_QUEUE       SYS       Striped thread pool task queue
LOCAL_CACHE_GROUPS_IO          SYS       Local node IO statistics for cache groups
SCAN_QUERIES                   SYS       Scan queries
CLIENT_CONNECTIONS             SYS       Client connections
PARTITION_STATES               SYS       Distribution of cache group partitions across cluster nodes
VIEW_COLUMNS                   SYS       SQL view columns
SQL_QUERIES                    SYS       Running SQL queries.
CACHE_GROUP_PAGE_LISTS         SYS       Cache group page lists
METRICS                        SYS       Ignite metrics
CONTINUOUS_QUERIES             SYS       Continuous queries
TABLE_COLUMNS                  SYS       SQL table columns
TABLES                         SYS       SQL tables
DISTRIBUTED_METASTORAGE        SYS       Distributed metastorage data
SERVICES                       SYS       Services
DATASTREAM_THREADPOOL_QUEUE    SYS       Datastream thread pool task queue
NODE_METRICS                   SYS       Node metrics
BINARY_METADATA                SYS       Binary metadata
JOBS                           SYS       Running compute jobs, part of compute task started on remote host.
SCHEMAS                        SYS       SQL schemas
CACHE_GROUPS                   SYS       Cache groups
VIEWS                          SYS       SQL views
DATA_REGION_PAGE_LISTS         SYS       Data region page lists
NODE_ATTRIBUTES                SYS       Node attributes
TRANSACTIONS                   SYS       Running transactions
CACHES                         SYS       Caches
TASKS                          SYS       Running compute tasks
Command [SYSTEM-VIEW] finished with code: 0
</code></pre></div><h2 id="_2-visor终端"><a href="#_2-visor终端" class="header-anchor">#</a> 2.Visor终端</h2> <h3 id="_2-1-摘要"><a href="#_2-1-摘要" class="header-anchor">#</a> 2.1.摘要</h3> <p>Visor命令行接口（CMD）是一个用于Ignite集群监控的命令行工具，它提供有关集群节点、缓存和计算任务的基本统计信息，还可以通过启动或停止节点来管理集群的大小。</p> <p><img src="https://ignite.apache.org/docs/2.9.0/images/tools/visor-cmd.png" alt=""></p> <h3 id="_2-2-使用"><a href="#_2-2-使用" class="header-anchor">#</a> 2.2.使用</h3> <p>Ignite通过<code>IGNITE_HOME/bin/ignitevisorcmd.{sh|bat}</code>脚本来启动Visor终端，要将Visor接入集群，需要使用<code>open</code>命令。</p> <p>Visor支持下面的命令，要获得某个命令完整的信息，可以输入<code>help &quot;cmd&quot;</code>或者<code>? &quot;cmd&quot;</code>。</p> <table><thead><tr><th>命令</th> <th>别名</th> <th>描述</th></tr></thead> <tbody><tr><td>ack</td> <td></td> <td>所有远程节点的Ack参数</td></tr> <tr><td>alert</td> <td></td> <td>提示用户定义的事件</td></tr> <tr><td>cache</td> <td></td> <td>输出缓存的统计数据，清理缓存，从缓存输出所有条目的列表</td></tr> <tr><td>close</td> <td></td> <td>将visor从网格断开</td></tr> <tr><td>config</td> <td></td> <td>输出节点的配置</td></tr> <tr><td>deploy</td> <td></td> <td>将文件或者文件夹复制到远程主机</td></tr> <tr><td>disco</td> <td></td> <td>输出拓扑变更日志</td></tr> <tr><td>events</td> <td></td> <td>从一个节点输出事件</td></tr> <tr><td>gc</td> <td></td> <td>在远程节点运行GC</td></tr> <tr><td>help</td> <td>?</td> <td>输出Visor控制台帮助</td></tr> <tr><td>kill</td> <td></td> <td>杀掉或者重启节点</td></tr> <tr><td>log</td> <td></td> <td>启动或者停止网格范围的事件日志</td></tr> <tr><td>mclear</td> <td></td> <td>清除Visor控制台内存变量</td></tr> <tr><td>mget</td> <td></td> <td>获取Visor控制台内存变量</td></tr> <tr><td>mlist</td> <td></td> <td>输出Visor控制台内存变量</td></tr> <tr><td>node</td> <td></td> <td>输出节点统计数据</td></tr> <tr><td>open</td> <td></td> <td>将Visor接入网格</td></tr> <tr><td>ping</td> <td></td> <td>ping节点</td></tr> <tr><td>quit</td> <td></td> <td>退出Visor控制台</td></tr> <tr><td>start</td> <td></td> <td>在远程主机启动或者重启节点</td></tr> <tr><td>status</td> <td>!</td> <td>输出Visor控制台状态</td></tr> <tr><td>tasks</td> <td></td> <td>输出任务执行统计数据</td></tr> <tr><td>top</td> <td></td> <td>输出当前的拓扑</td></tr> <tr><td>vvm</td> <td></td> <td>打开节点的VisualVM</td></tr></tbody></table> <h2 id="_3-sqlline"><a href="#_3-sqlline" class="header-anchor">#</a> 3.SQLLine</h2> <h3 id="_3-1-概述"><a href="#_3-1-概述" class="header-anchor">#</a> 3.1.概述</h3> <p>Ignite提供了一个<a href="http://sqlline.sourceforge.net/" target="_self" rel="noopener noreferrer">SQLLine</a>工具，它是一个接入关系数据库然后执行SQL命令的基于命令行的工具，本章节会描述如何用SQLLine接入Ignite集群，以及Ignite支持的各种SQLLine命令。</p> <h3 id="_3-2-接入集群"><a href="#_3-2-接入集群" class="header-anchor">#</a> 3.2.接入集群</h3> <p>在<code>IGNITE_HOME/bin</code>目录中，执行<code>sqlline.sh -u jdbc:ignite:thin:[host]</code>命令就可以使用SQLLine接入集群，注意要将<code>[host]</code>替换为实际的值，比如：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-bash extra-class"><pre class="language-bash"><code>./sqlline.sh --verbose<span class="token operator">=</span>true -u jdbc:ignite:thin://127.0.0.1/
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">sqlline</span>.bat <span class="token parameter attr-name">--verbose</span>=true <span class="token parameter attr-name">-u</span> jdbc:ignite:thin://<span class="token number">127</span>.<span class="token number">0</span>.<span class="token number">0</span>.<span class="token number">1</span>/</span>
</code></pre></div></section></div></div> <p>输入<code>./sqlline.sh -h</code>或者<code>./sqlline.sh --help</code>可以看到可用的各种选项。</p> <h4 id="_3-2-1-认证"><a href="#_3-2-1-认证" class="header-anchor">#</a> 3.2.1.认证</h4> <p>如果集群打开了认证，那么在<code>IGNITE_HOME/bin</code>目录中，通过运行<code>jdbc:ignite:thin://[address]:[port];user=[username];password=[password]</code>命令SQLLine才可以接入集群。注意要将<code>[address]</code>，<code>[port]</code>，<code>[username]</code>和`[password]替换为实际值，比如：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="linux" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-bash extra-class"><pre class="language-bash"><code>./sqlline.sh --verbose<span class="token operator">=</span>true -u <span class="token string">&quot;jdbc:ignite:thin://127.0.0.1:10800;user=ignite;password=ignite&quot;</span>
</code></pre></div></section> <section aria-hidden="true" id="windows" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-batch extra-class"><pre class="language-batch"><code><span class="token command"><span class="token keyword">sqlline</span>.bat <span class="token parameter attr-name">--verbose</span>=true <span class="token parameter attr-name">-u</span> <span class="token string">&quot;jdbc:ignite:thin://127.0.0.1:10800;user=ignite;password=ignite&quot;</span></span>
</code></pre></div></section></div></div> <p>如果未开启认证，需要忽略<code>[username]</code>和<code>[password]</code>。</p> <div class="custom-block tip"><p class="custom-block-title">通过bash接入时JDBC URL要加引号</p> <p>当在bash环境中接入时连接的URL一定要加<code>&quot; &quot;</code>，比如：<code>&quot;jdbc:ignite:thin://[address]:[port];user=[username];password=[password]&quot;</code>。</p></div> <h3 id="_3-3-命令"><a href="#_3-3-命令" class="header-anchor">#</a> 3.3.命令</h3> <p>下面是Ignite支持的<a href="http://sqlline.sourceforge.net/#commands" target="_self" rel="noopener noreferrer">SQLLine命令</a>列表：</p> <table><thead><tr><th>命令</th> <th>描述</th></tr></thead> <tbody><tr><td><code>!all</code></td> <td>在当前的所有连接中执行指定的SQL</td></tr> <tr><td><code>!batch</code></td> <td>开始执行一批SQL语句</td></tr> <tr><td><code>!brief</code></td> <td>启动简易输出模式</td></tr> <tr><td><code>!closeall</code></td> <td>关闭所有目前已打开的连接</td></tr> <tr><td><code>!columns</code></td> <td>显示表中的列</td></tr> <tr><td><code>!connect</code></td> <td>接入数据库</td></tr> <tr><td><code>!dbinfo</code></td> <td>列出当前连接的元数据信息</td></tr> <tr><td><code>!dropall</code></td> <td>删除数据库中的所有表</td></tr> <tr><td><code>!go</code></td> <td>转换到另一个活动连接</td></tr> <tr><td><code>!help</code></td> <td>显示帮助信息</td></tr> <tr><td><code>!history</code></td> <td>显示命令历史</td></tr> <tr><td><code>!indexes</code></td> <td>显示表的索引</td></tr> <tr><td><code>!list</code></td> <td>显示所有的活动连接</td></tr> <tr><td><code>!manual</code></td> <td>显示SQLLine手册</td></tr> <tr><td><code>!metadata</code></td> <td>调用任意的元数据命令</td></tr> <tr><td><code>!nickname</code></td> <td>为连接命名（更新命令提示）</td></tr> <tr><td><code>!outputformat</code></td> <td>改变显示SQL结果的方法</td></tr> <tr><td><code>!primarykeys</code></td> <td>显示表的主键列</td></tr> <tr><td><code>!properties</code></td> <td>使用指定的属性文件接入数据库</td></tr> <tr><td><code>!quit</code></td> <td>退出SQLLine</td></tr> <tr><td><code>!reconnect</code></td> <td>重新连接当前的数据库</td></tr> <tr><td><code>!record</code></td> <td>开始记录SQL命令的所有输出</td></tr> <tr><td><code>!run</code></td> <td>执行一个命令脚本</td></tr> <tr><td><code>!script</code></td> <td>将已执行的命令保存到一个文件</td></tr> <tr><td><code>!sql</code></td> <td>在数据库上执行一个SQL</td></tr> <tr><td><code>!tables</code></td> <td>列出数据库中的所有表</td></tr> <tr><td><code>!verbose</code></td> <td>启动详细输出模式</td></tr></tbody></table> <p>上面的列表可能不完整，还可能添加支持其它的SQLLine命令。</p> <h3 id="_3-4-示例"><a href="#_3-4-示例" class="header-anchor">#</a> 3.4.示例</h3> <p>接入集群后，就可以执行SQL语句和SQLLine命令，比如：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="创建表" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token number">0</span>: jdbc:ignite:thin:<span class="token comment">//127.0.0.1/&gt; CREATE TABLE City (id LONG PRIMARY KEY, name VARCHAR) WITH &quot;template=replicated&quot;;</span>
<span class="token keyword">No</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.301</span> seconds<span class="token punctuation">)</span>

<span class="token number">0</span>: jdbc:ignite:thin:<span class="token comment">//127.0.0.1/&gt; CREATE TABLE Person (id LONG, name VARCHAR, city_id LONG, PRIMARY KEY (id, city_id))WITH &quot;backups=1, affinityKey=city_id&quot;;</span>
<span class="token keyword">No</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.078</span> seconds<span class="token punctuation">)</span>

<span class="token number">0</span>: jdbc:ignite:thin:<span class="token comment">//127.0.0.1/&gt; !tables</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+--------------+-------------+-------------+</span>
<span class="token operator">|</span> TABLE_CAT <span class="token operator">|</span> TABLE_SCHEM  <span class="token operator">|</span>  TABLE_NAME  <span class="token operator">|</span> TABLE_TYPE  <span class="token operator">|</span> REMARKS     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+--------------+-------------+-------------+</span>
<span class="token operator">|</span>           <span class="token operator">|</span> <span class="token keyword">PUBLIC</span>       <span class="token operator">|</span> CITY         <span class="token operator">|</span> <span class="token keyword">TABLE</span>       <span class="token operator">|</span>             <span class="token operator">|</span>
<span class="token operator">|</span>           <span class="token operator">|</span> <span class="token keyword">PUBLIC</span>       <span class="token operator">|</span> PERSON       <span class="token operator">|</span> <span class="token keyword">TABLE</span>       <span class="token operator">|</span>             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+--------------+-------------+-------------+</span>
</code></pre></div></section> <section aria-hidden="true" id="定义索引" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token number">0</span>: jdbc:ignite:thin:<span class="token comment">//127.0.0.1/&gt; CREATE INDEX idx_city_name ON City (name);</span>
<span class="token keyword">No</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.039</span> seconds<span class="token punctuation">)</span>

<span class="token number">0</span>: jdbc:ignite:thin:<span class="token comment">//127.0.0.1/&gt; CREATE INDEX idx_person_name ON Person (name);</span>
<span class="token keyword">No</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.013</span> seconds<span class="token punctuation">)</span>

<span class="token number">0</span>: jdbc:ignite:thin:<span class="token comment">//127.0.0.1/&gt; !indexes</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+--------------+-------------+-----------------+</span>
<span class="token operator">|</span> TABLE_CAT <span class="token operator">|</span> TABLE_SCHEM  <span class="token operator">|</span>  TABLE_NAME  <span class="token operator">|</span> NON_UNIQUE  <span class="token operator">|</span> INDEX_QUALIFIER <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+--------------+-------------+-----------------+</span>
<span class="token operator">|</span>           <span class="token operator">|</span> <span class="token keyword">PUBLIC</span>       <span class="token operator">|</span> CITY         <span class="token operator">|</span> <span class="token boolean">true</span>        <span class="token operator">|</span>                 <span class="token operator">|</span>
<span class="token operator">|</span>           <span class="token operator">|</span> <span class="token keyword">PUBLIC</span>       <span class="token operator">|</span> PERSON       <span class="token operator">|</span> <span class="token boolean">true</span>        <span class="token operator">|</span>                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+--------------+-------------+-----------------+</span>
</code></pre></div></section></div></div> <h2 id="_4-tableau"><a href="#_4-tableau" class="header-anchor">#</a> 4.Tableau</h2> <h3 id="_4-1-概述"><a href="#_4-1-概述" class="header-anchor">#</a> 4.1.概述</h3> <p><a href="http://www.tableau.com/" target="_self" rel="noopener noreferrer">Tableau</a>是一个聚焦于商务智能领域的交互式数据可视化工具。它使用ODBC API接入各种数据库和数据平台，然后分析里面的数据。</p> <p>Ignite有自己的ODBC实现，这样就使从Tableau端接入Ignite成为可能，并且可以分析存储于分布式Ignite集群中的数据。</p> <h3 id="_4-2-安装和配置"><a href="#_4-2-安装和配置" class="header-anchor">#</a> 4.2.安装和配置</h3> <p>要从Tableau接入Ignite，需要进行如下操作：</p> <ul><li>下载并且安转Tableau桌面版，可以在其<a href="http://www.tableau.com/" target="_self" rel="noopener noreferrer">产品主页</a>查看官方文档；</li> <li>在Windows或者基于Unix的操作系统上安装Ignite的ODBC驱动；</li> <li>最后，通过DSN配置驱动，Tableau会通过DSN配置接入；</li> <li>ODBC驱动通过一个叫做<code>ODBC processor</code>的协议与Ignite集群通信，一定要确保这个组件在集群端已经启用。</li></ul> <p>上述步骤完成后，就可以接入集群然后分析数据了。</p> <h3 id="_4-3-接入集群"><a href="#_4-3-接入集群" class="header-anchor">#</a> 4.3.接入集群</h3> <ol><li>启动Tableau应用，然后在<code>Connect</code> ⇒ <code>To a Server</code> ⇒ <code>More...</code>窗口中找到<code>Other Databases (ODBC)</code>配置；
<img src="https://ignite.apache.org/docs/2.9.0/images/tools/tableau-choosing_driver_01.png" alt=""></li> <li>点击<code>Edit connection</code>链接；
<img src="https://ignite.apache.org/docs/2.9.0/images/tools/tableau-edit_connection.png" alt=""></li> <li>配置之前设定的<code>DSN</code>属性值，下面的示例中为：<code>LocalApacheIgniteDSN</code>，做完之后，点击<code>Connect</code>按钮；
<img src="https://ignite.apache.org/docs/2.9.0/images/tools/tableau-choose_dsn_01.png" alt=""></li> <li>Tableau会试图验证这个连接，如果验证通过，<code>Sign In</code>按钮以及其它的与连接有关的字段就会变为可用状态，点击<code>Sign In</code>就会完成连接过程；
<img src="https://ignite.apache.org/docs/2.9.0/images/tools/tableau-choose_dsn_02.png" alt=""></li></ol> <h3 id="_4-4-数据查询和分析"><a href="#_4-4-数据查询和分析" class="header-anchor">#</a> 4.4.数据查询和分析</h3> <p>成功建立Ignite和Tableau之间的连接之后，就可以通过Tableau支持的各种方式对数据进行查询和分析，通过<a href="http://www.tableau.com/learn/training" target="_self" rel="noopener noreferrer">官方文档</a>可以了解更多的细节。</p> <p><img src="https://ignite.apache.org/docs/2.9.0/images/tools/tableau-creating_dataset.png" alt=""> <img src="https://ignite.apache.org/docs/2.9.0/images/tools/tableau-visualizing_data.png" alt=""></p> <h2 id="_5-informatica"><a href="#_5-informatica" class="header-anchor">#</a> 5.Informatica</h2> <h3 id="_5-1-概述"><a href="#_5-1-概述" class="header-anchor">#</a> 5.1.概述</h3> <p>Informatica是一个云数据管理和集成工具，可以通过ODBC连接将Informatica接入Ignite。</p> <h3 id="_5-2-从informatica-powercenter-designer接入"><a href="#_5-2-从informatica-powercenter-designer接入" class="header-anchor">#</a> 5.2.从Informatica PowerCenter Designer接入</h3> <p>在PowerCenter Designer中，必须安装32位的Ignite ODBC驱动才能接入Ignite，可以按照下面链接的内容安装ODBC驱动并且创建DSN：</p> <ul><li><a href="/doc/java/WorkingwithSQL.html#_10-1-6-1-在windows上安装">在Windows上安装</a>；</li> <li><a href="/doc/java/WorkingwithSQL.html#_10-2-4-配置dsn">配置DSN</a>。</li></ul> <p>然后：</p> <ol><li>如果要从Ignite中导入表，在<code>Sources</code>或者<code>Targets</code>菜单中选择<code>Import from Database...</code>；</li> <li>通过选择<code>Apache Ignite DSN</code>作为ODBC数据源接入集群。</li></ol> <p><img src="https://ignite.apache.org/docs/2.9.0/images/tools/informatica-import-tables.png" alt=""></p> <h3 id="_5-3-在informatica服务节点上安装ignite-odbc"><a href="#_5-3-在informatica服务节点上安装ignite-odbc" class="header-anchor">#</a> 5.3.在Informatica服务节点上安装Ignite ODBC</h3> <p>在<a href="/doc/java/WorkingwithSQL.html#_10-1-5-3-在linux上构建">在Linux上构建</a>和<a href="/doc/java/WorkingwithSQL.html#_10-1-6-2-在linux上安装">在Linux上安装</a>文档中，描述了如何在Ignite服务端节点上安装Ignite ODBC。</p> <p>Informatica会使用<code>$ODBCINI</code>和<code>$ODBCISTINI</code>环境变量指定的配置文件（<a href="https://kb.informatica.com/howto/6/Pages/19/499306.aspx" target="_self" rel="noopener noreferrer">为ODBC配置UNIX环境变量</a>）。配置Ignite ODBC驱动和创建新的DSN，如下所示：</p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="odbc.ini" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[ApacheIgnite]</span>
<span class="token constant">Driver</span>      <span class="token attr-value"><span class="token punctuation">=</span> /usr/local/lib/libignite-odbc.so</span>
<span class="token constant">Description</span> <span class="token attr-value"><span class="token punctuation">=</span> Apache Ignite ODBC</span>
<span class="token constant">Address</span> <span class="token attr-value"><span class="token punctuation">=</span> 192.168.0.105</span>
<span class="token constant">User</span> <span class="token attr-value"><span class="token punctuation">=</span> ignite</span>
<span class="token constant">Password</span> <span class="token attr-value"><span class="token punctuation">=</span> ignite</span>
<span class="token constant">Schema</span> <span class="token attr-value"><span class="token punctuation">=</span> PUBLIC</span>
</code></pre></div></section> <section aria-hidden="true" id="odbcinst.ini" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[ApacheIgnite]</span>
<span class="token constant">Driver</span>  <span class="token attr-value"><span class="token punctuation">=</span> /usr/local/lib/libignite-odbc.so</span>
</code></pre></div></section></div></div> <p>要验证ODBC连接，可以使用Informatica的<code>ssgodbc.linux64</code>工具，如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>INFORMATICA_HOME<span class="token operator">&gt;</span>/tools/debugtools/ssgodbc/linux64/ssgodbc.linux64 -d ApacheIgnite -u ignite -p ignite -v
</code></pre></div><p>如果<code>unixODBC</code>或者Ignite的ODBC库没有安装在默认的目录中-<code>/usr/local/lib</code>，则需要将其加入<code>LD_LIBRARY_PATH</code>然后再次测试，如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">UNIXODBC_LIB</span><span class="token operator">=</span>/opt/unixodbc/lib/
<span class="token assign-left variable">IGNITE_ODBC_LIB</span><span class="token operator">=</span>/opt/igniteodbc/lib
<span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span><span class="token operator">&lt;</span>UNIXODBC_LIB<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>IGNITE_ODBC_LIB<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>INFORMATICA_HOME<span class="token operator">&gt;</span>/tools/debugtools/ssgodbc/linux64/ssgodbc.linux64 -d ApacheIgnite -u ignite -p ignite -v
</code></pre></div><h3 id="_5-4-配置相关的连接"><a href="#_5-4-配置相关的连接" class="header-anchor">#</a> 5.4.配置相关的连接</h3> <p>选择<code>Connections</code>&gt;<code>Relational...</code>可以显示<code>Relational Connection Browser</code>。</p> <p>选中ODBC类型然后创建一个新的连接。
<img src="https://ignite.apache.org/docs/2.9.0/images/tools/informatica-rel-connection.png" alt=""></p> <h3 id="_5-5-在suse-11-4中安装ignite-odbc"><a href="#_5-5-在suse-11-4中安装ignite-odbc" class="header-anchor">#</a> 5.5.在Suse 11.4中安装Ignite ODBC</h3> <p>下面是在Suse 11.4环境中构建Ignite和Ignite ODBC驱动的步骤。</p> <ol><li>添加仓库 - <code>oss</code>，<code>non-oss</code>，<code>openSUSE_Factory</code>，<code>devel_gcc</code>；</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">zypper</span> ar http://download.opensuse.org/distribution/11.4/repo/oss/ oss
<span class="token function">sudo</span> <span class="token function">zypper</span> ar http://download.opensuse.org/distribution/11.4/repo/non-oss/ non-oss
<span class="token function">sudo</span> <span class="token function">zypper</span> ar https://download.opensuse.org/repositories/devel:/tools:/building/openSUSE_Factory/ openSUSE_Factory
<span class="token function">sudo</span> <span class="token function">zypper</span> ar http://download.opensuse.org/repositories/devel:/gcc/SLE-11/  devel_gcc
</code></pre></div><ol start="2"><li>安装<code>automake</code>和<code>autoconf</code>：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">zypper</span> <span class="token function">install</span> autoconf automake
</code></pre></div><ol start="3"><li>安装<code>libtool</code>：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">zypper</span> <span class="token function">install</span> libtool-2.4.6-7.1.x86_64

Loading repository data<span class="token punctuation">..</span>.
Reading installed packages<span class="token punctuation">..</span>.
Resolving package dependencies<span class="token punctuation">..</span>.

Problem: nothing provides m4 <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">1.4</span>.16 needed by libtool-2.4.6-7.1.x86_64
 Solution <span class="token number">1</span>: <span class="token keyword">do</span> not <span class="token function">install</span> libtool-2.4.6-7.1.x86_64
 Solution <span class="token number">2</span>: <span class="token builtin class-name">break</span> libtool-2.4.6-7.1.x86_64 by ignoring some of its dependencies

Choose from above solutions by number or cancel <span class="token punctuation">[</span><span class="token number">1</span>/2/c<span class="token punctuation">]</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span>: <span class="token number">2</span>
</code></pre></div><ol start="4"><li>安装<code>OpenSSL</code>：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">zypper</span> <span class="token function">install</span> openssl openssl-devel

Loading repository data<span class="token punctuation">..</span>.
Reading installed packages<span class="token punctuation">..</span>.
<span class="token string">'openssl-devel'</span> not found <span class="token keyword">in</span> package names. Trying capabilities.
Resolving package dependencies<span class="token punctuation">..</span>.

Problem: libopenssl-devel-1.0.0c-17.1.x86_64 requires zlib-devel, but this requirement cannot be provided
  uninstallable providers: zlib-devel-1.2.5-8.1.i586<span class="token punctuation">[</span>oss<span class="token punctuation">]</span>
                   zlib-devel-1.2.5-8.1.x86_64<span class="token punctuation">[</span>oss<span class="token punctuation">]</span>
 Solution <span class="token number">1</span>: downgrade of zlib-1.2.7-0.12.3.x86_64 to zlib-1.2.5-8.1.x86_64
 Solution <span class="token number">2</span>: <span class="token keyword">do</span> not ask to <span class="token function">install</span> a solvable providing openssl-devel
 Solution <span class="token number">3</span>: <span class="token keyword">do</span> not ask to <span class="token function">install</span> a solvable providing openssl-devel
 Solution <span class="token number">4</span>: <span class="token builtin class-name">break</span> libopenssl-devel-1.0.0c-17.1.x86_64 by ignoring some of its dependencies

Choose from above solutions by number or cancel <span class="token punctuation">[</span><span class="token number">1</span>/2/3/4/c<span class="token punctuation">]</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span>: <span class="token number">1</span>
</code></pre></div><ol start="5"><li>安装GCC编译器：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">zypper</span> <span class="token function">install</span> gcc5 gcc5-c++

Loading repository data<span class="token punctuation">..</span>.
Reading installed packages<span class="token punctuation">..</span>.
Resolving package dependencies<span class="token punctuation">..</span>.
<span class="token number">2</span> Problems:
Problem: gcc5-5.5.0+r253576-1.1.x86_64 requires libgcc_s1 <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">5.5</span>.0+r253576-1.1, but this requirement cannot be provided
Problem: gcc5-c++-5.5.0+r253576-1.1.x86_64 requires gcc5 <span class="token operator">=</span> <span class="token number">5.5</span>.0+r253576-1.1, but this requirement cannot be provided

Problem: gcc5-5.5.0+r253576-1.1.x86_64 requires libgcc_s1 <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">5.5</span>.0+r253576-1.1, but this requirement cannot be provided
  uninstallable providers: libgcc_s1-5.5.0+r253576-1.1.i586<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-5.5.0+r253576-1.1.x86_64<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-6.4.1+r251631-80.1.i586<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-6.4.1+r251631-80.1.x86_64<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-7.3.1+r258812-103.1.i586<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-7.3.1+r258812-103.1.x86_64<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-8.1.1+r260570-32.1.i586<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libgcc_s1-8.1.1+r260570-32.1.x86_64<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
 Solution <span class="token number">1</span>: <span class="token function">install</span> libgcc_s1-8.1.1+r260570-32.1.x86_64 <span class="token punctuation">(</span>with vendor change<span class="token punctuation">)</span>
  SUSE LINUX Products GmbH, Nuernberg, Germany  --<span class="token operator">&gt;</span>  obs://build.opensuse.org/devel:gcc
 Solution <span class="token number">2</span>: <span class="token keyword">do</span> not <span class="token function">install</span> gcc5-5.5.0+r253576-1.1.x86_64
 Solution <span class="token number">3</span>: <span class="token keyword">do</span> not <span class="token function">install</span> gcc5-5.5.0+r253576-1.1.x86_64
 Solution <span class="token number">4</span>: <span class="token builtin class-name">break</span> gcc5-5.5.0+r253576-1.1.x86_64 by ignoring some of its dependencies

Choose from above solutions by number or skip, retry or cancel <span class="token punctuation">[</span><span class="token number">1</span>/2/3/4/s/r/c<span class="token punctuation">]</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span>: <span class="token number">1</span>

Problem: gcc5-c++-5.5.0+r253576-1.1.x86_64 requires gcc5 <span class="token operator">=</span> <span class="token number">5.5</span>.0+r253576-1.1, but this requirement cannot be provided
  uninstallable providers: gcc5-5.5.0+r253576-1.1.i586<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   gcc5-5.5.0+r253576-1.1.x86_64<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
 Solution <span class="token number">1</span>: <span class="token function">install</span> libgomp1-8.1.1+r260570-32.1.x86_64 <span class="token punctuation">(</span>with vendor change<span class="token punctuation">)</span>
  SUSE LINUX Products GmbH, Nuernberg, Germany  --<span class="token operator">&gt;</span>  obs://build.opensuse.org/devel:gcc
 Solution <span class="token number">2</span>: <span class="token keyword">do</span> not <span class="token function">install</span> gcc5-c++-5.5.0+r253576-1.1.x86_64
 Solution <span class="token number">3</span>: <span class="token keyword">do</span> not <span class="token function">install</span> gcc5-c++-5.5.0+r253576-1.1.x86_64
 Solution <span class="token number">4</span>: <span class="token builtin class-name">break</span> gcc5-c++-5.5.0+r253576-1.1.x86_64 by ignoring some of its dependencies

Choose from above solutions by number or skip, retry or cancel <span class="token punctuation">[</span><span class="token number">1</span>/2/3/4/s/r/c<span class="token punctuation">]</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span>: <span class="token number">1</span>
Resolving dependencies<span class="token punctuation">..</span>.
Resolving package dependencies<span class="token punctuation">..</span>.

Problem: gcc5-c++-5.5.0+r253576-1.1.x86_64 requires libstdc++6-devel-gcc5 <span class="token operator">=</span> <span class="token number">5.5</span>.0+r253576-1.1, but this requirement cannot be provided
  uninstallable providers: libstdc++6-devel-gcc5-5.5.0+r253576-1.1.i586<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
                   libstdc++6-devel-gcc5-5.5.0+r253576-1.1.x86_64<span class="token punctuation">[</span>devel_gcc<span class="token punctuation">]</span>
 Solution <span class="token number">1</span>: <span class="token function">install</span> libstdc++6-8.1.1+r260570-32.1.x86_64 <span class="token punctuation">(</span>with vendor change<span class="token punctuation">)</span>
  SUSE LINUX Products GmbH, Nuernberg, Germany  --<span class="token operator">&gt;</span>  obs://build.opensuse.org/devel:gcc
 Solution <span class="token number">2</span>: <span class="token keyword">do</span> not <span class="token function">install</span> gcc5-c++-5.5.0+r253576-1.1.x86_64
 Solution <span class="token number">3</span>: <span class="token keyword">do</span> not <span class="token function">install</span> gcc5-c++-5.5.0+r253576-1.1.x86_64
 Solution <span class="token number">4</span>: <span class="token builtin class-name">break</span> gcc5-c++-5.5.0+r253576-1.1.x86_64 by ignoring some of its dependencies

Choose from above solutions by number or cancel <span class="token punctuation">[</span><span class="token number">1</span>/2/3/4/c<span class="token punctuation">]</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span>: <span class="token number">1</span>
</code></pre></div><ol start="6"><li>创建编译器执行文件的符号链接：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">rm</span> /usr/bin/gcc
<span class="token function">sudo</span> <span class="token function">rm</span> /usr/bin/g++

<span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/bin/g++-5 /usr/bin/g++
<span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/bin/gcc-5 /usr/bin/gcc
</code></pre></div><ol start="7"><li>通过源码安装unixODBC：从<a href="http://www.unixodbc.org/" target="_self" rel="noopener noreferrer">http://www.unixodbc.org/</a>下载并安装最新的unixODBC（2.3.6或更新的版本）；</li> <li>检查指定版本的所有依赖库和工具都已经成功安装：</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>. libtool --version
libtool <span class="token punctuation">(</span>GNU libtool<span class="token punctuation">)</span> <span class="token number">2.4</span>.6
<span class="token number">2</span>. m4 --version
m4 <span class="token punctuation">(</span>GNU M4<span class="token punctuation">)</span> <span class="token number">1.4</span>.12
<span class="token number">3</span>. autoconf --version
autoconf <span class="token punctuation">(</span>GNU Autoconf<span class="token punctuation">)</span> <span class="token number">2.69</span>
<span class="token number">4</span>. automake --version
automake <span class="token punctuation">(</span>GNU automake<span class="token punctuation">)</span> <span class="token number">1.16</span>.1
<span class="token number">5</span>. openssl version
OpenSSL <span class="token number">1.0</span>.0c <span class="token number">2</span> Dec <span class="token number">2010</span>
<span class="token number">6</span>. g++ --version
g++ <span class="token punctuation">(</span>SUSE Linux<span class="token punctuation">)</span> <span class="token number">5.5</span>.0 <span class="token number">20171010</span> <span class="token punctuation">[</span>gcc-5-branch revision <span class="token number">253640</span><span class="token punctuation">]</span>
<span class="token number">7</span>. JDK <span class="token number">1.8</span>
</code></pre></div><ol start="9"><li>检查<code>JAVA_HOME</code>环境变量是否配置，然后执行下面的命令：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$IGNITE_HOME</span>/platforms/cpp
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LDFLAGS</span><span class="token operator">=</span>-lrt

libtoolize <span class="token operator">&amp;&amp;</span> aclocal <span class="token operator">&amp;&amp;</span> autoheader <span class="token operator">&amp;&amp;</span> automake --add-missing <span class="token operator">&amp;&amp;</span> autoreconf
./configure --enable-odbc
<span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><ol start="10"><li>成功之后，重启系统；</li> <li>安装ODBC驱动：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> odbcinst -i -d -f <span class="token variable">$IGNITE_HOME</span>/platforms/cpp/odbc/install/ignite-odbc-install.ini
</code></pre></div><h2 id="_6-pentaho"><a href="#_6-pentaho" class="header-anchor">#</a> 6.Pentaho</h2> <h3 id="_6-1-概述"><a href="#_6-1-概述" class="header-anchor">#</a> 6.1.概述</h3> <p><a href="http://www.pentaho.com/" target="_self" rel="noopener noreferrer">Pentaho</a>是一个全面的平台，它可以非常容易地对数据进行抽取、转换、可视化和分析。Pentaho数据集成采用Java数据库连接（JDBC）API接入数据库。</p> <p>Ignite有自己的JDBC驱动，这样就使得通过Pentaho平台接入Ignite成为可能，然后就可以分析分布式Ignite集群中的数据了。</p> <h3 id="_6-2-安装和配置"><a href="#_6-2-安装和配置" class="header-anchor">#</a> 6.2.安装和配置</h3> <ul><li>下载并安装Pentaho平台，具体可以参考官方的<a href="https://help.pentaho.com/Documentation/7.1/Installation" target="_self" rel="noopener noreferrer">Pentaho文档</a>;</li> <li>安装完成之后，需要使用相关的工具安装Ignite的JDBC驱动，怎么做呢，下载Ignite然后找到<code>{apache-ignite}/libs/ignite-core-{version}.jar</code>，然后将其复制到<code>{pentaho}/jdbc-distribution</code>目录；</li> <li>打开一个命令行工具，切换到<code>{pentaho}/jdbc-distribution</code>目录然后执行脚本：<code>./distribute-files.sh ignite-core-{version}.jar</code>。</li></ul> <h3 id="_6-3-jdbc驱动配置"><a href="#_6-3-jdbc驱动配置" class="header-anchor">#</a> 6.3.JDBC驱动配置</h3> <p>下一步是配置JDBC驱动然后接入集群，下面做的都是必要的，<a href="/doc/2.8.0/sql/JDBC.html#_1-1-jdbc-thin模式驱动">JDBC Thin模式驱动</a>有更多的细节信息。</p> <ul><li>打开命令行工具，切换到<code>{pentaho}/design-tools/data-integration</code>目录，然后使用<code>./spoon.sh</code>脚本启动Pentaho；</li> <li>出现下面的界面之后，点击<code>File</code>菜单然后创建一个新的转换：<code>New</code>-&gt;<code>Transformation</code>；</li></ul> <p><img src="https://ignite.apache.org/docs/2.9.0/images/tools/pentaho-new-transformation.png" alt=""></p> <ul><li>在Pentaho的界面中，填入下面的参数就可以创建一个新的数据库连接：</li></ul> <table><thead><tr><th>Pentaho属性名</th> <th>值</th></tr></thead> <tbody><tr><td><code>Connection Name</code></td> <td>比如<code>IgniteConnection</code>这样的自定义名字</td></tr> <tr><td><code>Connection Type</code></td> <td>选择<code>Generic database</code>选项</td></tr> <tr><td><code>Access</code></td> <td>选择<code>Native (JDBC)</code></td></tr> <tr><td><code>Custom Connection URL</code></td> <td><code>jdbc:ignite:thin://localhost:10800</code>，其中端口和地址可以根据实际进行调整</td></tr> <tr><td><code>Custom Driver Class Name</code></td> <td><code>org.apache.ignite.IgniteJdbcThinDriver</code></td></tr></tbody></table> <ul><li>点击<code>Test</code>按钮，对连接进行测试</li></ul> <p><img src="https://ignite.apache.org/docs/2.9.0/images/tools/pentaho-ignite-connection.png" alt=""></p> <h3 id="_6-4-数据的查询和分析"><a href="#_6-4-数据的查询和分析" class="header-anchor">#</a> 6.4.数据的查询和分析</h3> <p>Ignite和Pentaho之间建立连接之后，就可以通过Pentaho支持的各种方式对数据进行查询、转换和分析了，更多的细节，可以查看Pentaho的官方文档。</p> <p><img src="https://ignite.apache.org/docs/2.9.0/images/tools/pentaho-running-and-inspecting-data.png" alt=""></p> <div class="right-pale"><div class="right-content"><div class="bbox tell-box"><button class="btn btn-circle btn-success right-tell"><i class="fa fa-lg fa-phone"></i></button> <p class="tell-hide">
            18624049226
        </p></div> <div class="bbox weixin-box"><button class="btn btn-circle btn-success right-weixin"><i class="fa fa-weixin"></i></button> <p class="tell-hide" style="padding:5px;"><img src="/img/weixin.jpg"></p></div></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间：:</span> <span class="time">3/4/2021, 6:29:01 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/doc/java/WorkingwithEvents.html" class="prev">
        处理事件
      </a></span> <span class="next"><a href="/doc/java/Security.html">
        安全
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.264f4941.js" defer></script><script src="/assets/js/3.b95bc49f.js" defer></script><script src="/assets/js/1.5c509afc.js" defer></script><script src="/assets/js/291.b4053cdc.js" defer></script><script src="/assets/js/11.2830eec0.js" defer></script><script src="/assets/js/10.41a5f603.js" defer></script><script src="/assets/js/8.6b57c8fe.js" defer></script>
  </body>
</html>
