(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{143:function(n,s,a){"use strict";a.r(s);var e=a(0),i=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"_13-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-插件","aria-hidden":"true"}},[n._v("#")]),n._v(" 13.插件")]),n._v(" "),a("h2",{attrs:{id:"_13-1-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-插件","aria-hidden":"true"}},[n._v("#")]),n._v(" 13.1.插件")]),n._v(" "),a("h3",{attrs:{id:"_13-1-1-摘要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-1-摘要","aria-hidden":"true"}},[n._v("#")]),n._v(" 13.1.1.摘要")]),n._v(" "),a("p",[n._v("Ignite的插件系统可以使第三方扩展Ignite的核心功能，理解Ignite插件工作方式的最佳途径是去看一下Ignite的生命周期插件。")]),n._v(" "),a("h3",{attrs:{id:"_13-1-2-插件的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-2-插件的配置","aria-hidden":"true"}},[n._v("#")]),n._v(" 13.1.2.插件的配置")]),n._v(" "),a("p",[n._v("每个插件都需要一个"),a("code",[n._v("PluginConfiguration")]),n._v("，然后在"),a("code",[n._v("IgniteConfiguration.pluginConfigurations")]),n._v("属性中注册，如下所示：\nXML：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<bean id="ignite.cfg" class="org.apache.ignite.configuration.IgniteConfiguration">\n\t\x3c!-- Plugin Configuration --\x3e\n  <property name="pluginConfigurations">\n      <bean class="ignite.myexamples.MyPluginConfiguration"/>\n  </property>\n\n  \x3c!--Other Ignite configurations --\x3e\n</bean>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br")])]),a("p",[n._v("Java：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("IgniteConfiguration cfg = new IgniteConfiguration();\n\nMyPluginConfiguration mpc = new MyPluginConfiguration();\n\ncfg.setPluginConfigurations(mpc);\n\nIgnition.start(cfg);\n\n// Start Ignite node.\nIgnite ignite = Ignition.start(cfg);\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br")])]),a("p",[n._v("一个"),a("code",[n._v("PluginConfiguration")]),n._v("的实现，如下所示：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("public class MyPluginConfiguration implements PluginConfiguration {\n\n    // Get and Set some plugin related properties\n}\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("p",[n._v("这个类可以为空，也可以包括部分插件特有的属性，但是它"),a("strong",[n._v("必须存在")]),n._v("。")]),n._v(" "),a("h3",{attrs:{id:"_13-1-3-插件提供者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-3-插件提供者","aria-hidden":"true"}},[n._v("#")]),n._v(" 13.1.3.插件提供者")]),n._v(" "),a("p",[a("code",[n._v("PluginProvider<PluginConfiguration>")]),n._v("实现是新添加的插件的构造器，它在节点启动时创建了插件。这个接口有很多的方法，根据需要可以实现或者置空，但是，"),a("code",[n._v("name()")]),n._v("和"),a("code",[n._v("plugin()")]),n._v("方法"),a("strong",[n._v("不能为空")]),n._v("。")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('public class MyPluginProvider implements PluginProvider<MyPluginConfiguration> {\n    @Override\n    public String name() {\n        return "IGNITE";\n    }\n\n    @Override\n    public <T extends IgnitePlugin> T plugin() {\n        return (T)new MyPlugin();\n    }\n\n    @Nullable\n    @Override\n    public <T> T createComponent(PluginContext pluginContext, Class<T> aClass) {\n        return null;\n    }\n\n    // Other methods can be no-op\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br")])]),a("p",[a("code",[n._v("PluginProvider<PluginConfiguration>")]),n._v("接口有三个重要的方法：")]),n._v(" "),a("ul",[a("li",[a("code",[n._v("name()")]),n._v("：插件的名字；")]),n._v(" "),a("li",[a("code",[n._v("plugin()")]),n._v("：创建插件；")]),n._v(" "),a("li",[a("code",[n._v("createComponent()")]),n._v("：这个方法用于创建Ignite中的已有组件，比如数据快照、网格安全、节点发现、以及第三方Java API的跨平台支持等。")])]),n._v(" "),a("h4",{attrs:{id:"_13-1-3-1-加载插件提供者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-1-3-1-加载插件提供者","aria-hidden":"true"}},[n._v("#")]),n._v(" 13.1.3.1.加载插件提供者")]),n._v(" "),a("p",[n._v("Ignite的插件使用JDK的"),a("code",[n._v("ServiceLoader")]),n._v("类进行加载，对于要加载的插件构造器，需要在META-INF文件夹中创建一个名为"),a("code",[n._v("org.apache.ignite.plugin.PluginProvider")]),n._v("的文件:\n"),a("img",{attrs:{src:"https://files.readme.io/21c53e4-plugin-provider.png",alt:""}}),n._v("\n然后在该文件中提供插件构造器的实现类：\n"),a("img",{attrs:{src:"https://files.readme.io/5d1ed7f-plugin-provider-2.png",alt:""}})])])}],!1,null,null,null);i.options.__file="Plugins.md";s.default=i.exports}}]);