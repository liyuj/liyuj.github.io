(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{80:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),s("h2",{attrs:{id:"_1-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.部署")]),t._v(" "),s("p",[t._v("Ignite对部署没有要求，可以非常容易地部署到私有主机或者任意的云环境，比如，Ignite可以独立部署，也可以部署在Kubernetes或者Docker容器中，还有Apache Mesos以及Hadoop Yarn。它可以运行在物理主机中，也可以部署在虚拟机中。\n"),s("img",{attrs:{src:"https://files.readme.io/8a65d4a-ignite-deploy.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_2-docker部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.Docker部署")]),t._v(" "),s("p",[t._v("Docker可以将Ignite应用及其所有的依赖打包进一个标准的容器，Docker会自动下载Ignite发布版，将代码部署进Ignite以及配置节点，它还可以自动启动配置好的Ignite节点，这样的集成方式，使得通过简单地重启Ignite的Docker容器就可以部署新的代码。")]),t._v(" "),s("h3",{attrs:{id:"_2-1-启动ignite-docker容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-启动ignite-docker容器","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.启动Ignite Docker容器")]),t._v(" "),s("p",[t._v("要运行Docker容器，需要拉取然后启动一个Docker镜像，默认会下载最新的版本，但是在"),s("a",{attrs:{href:"https://hub.docker.com/r/apacheignite/ignite/tags",target:"_self",rel:"noopener noreferrer"}},[t._v("这里")]),t._v("可以看到一个完整的清单。\n可以使用如下的命令拉取Ignite docker镜像：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pull latest version.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker pull apacheignite/ignite\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pull ignite version {ignite-version}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker pull apacheignite/ignite:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("可以使用"),s("code",[t._v("docker run")]),t._v("来运行Ignite docker容器：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run latest version.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -it --net"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("host\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONFIG_URI='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CONFIG_URI")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OPTION_LIBS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$OPTION_LIBS")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JVM_OPTS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JVM_OPTS")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\napacheignite/ignite\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Run ignite version {ignite-version}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -it --net"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("host\n-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONFIG_URI='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CONFIG_URI")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OPTION_LIBS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$OPTION_LIBS")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JVM_OPTS='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JVM_OPTS")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\napacheignite/ignite:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("下面的配置参数在docker容器中可以通过环境变量进行传递：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("CONFIG_URI")])]),t._v(" "),s("td",[t._v("Ignite配置文件的URL（也可以相对于类路径的META-INF文件夹），下载的配置文件会保存于./ignite-config.xml")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://raw.githubusercontent.com/apache/ignite/ master/examples/config/example-cache.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("OPTION_LIBS")])]),t._v(" "),s("td",[t._v("会被包含在类路径中的可选库")]),t._v(" "),s("td",[s("code",[t._v("ignite-log4j, ignite-spring,ignite-indexing")])]),t._v(" "),s("td",[s("code",[t._v("ignite-aws,ignite-aop")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("JVM_OPTS")])]),t._v(" "),s("td",[t._v("通过docker命令传递给ignite实例的环境变量。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("-Xms1g -Xmx1g -server -XX:+AggressiveOpts -XX:MaxPermSize=256m")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EXTERNAL_LIBS")])]),t._v(" "),s("td",[t._v("库文件URL列表")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("http://central.maven.org/maven2/io/undertow/undertow-servlet/1.3.10.Final/undertow-servlet-1.3.10.Final.jar,http://central.maven.org/maven2/io/undertow/undertow-build-config/1.0.0.Beta24/undertow-build-config-1.0.0.Beta24.jar")])])])])]),t._v(" "),s("h3",{attrs:{id:"_2-2-示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-示例","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.2.示例")]),t._v(" "),s("p",[t._v("要启动Ignite的docker容器，可以使用如下的命令：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -it --net"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("host -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONFIG_URI=https://raw.githubusercontent.com/apache/ignite/master/examples/config/example-cache.xml"')]),t._v(" apacheignite/ignite\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("之后应该看到如下的输出日志：\n"),s("img",{attrs:{src:"https://files.readme.io/ryYtMcSCuGiyVcXN1GCw_dock_git_repo.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_3-aws部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-aws部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.AWS部署")]),t._v(" "),s("p",[t._v("Ignite的AMI（Amazon机器镜像）可以通过AWS的EC2管理控制台配置一个简单的Ignite集群，通过AMI进行安装，可以快速地部署一个Ignite集群。")]),t._v(" "),s("h3",{attrs:{id:"_3-1-amazon-ec2部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-amazon-ec2部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.1.Amazon EC2部署")]),t._v(" "),s("ul",[s("li",[t._v("点击下表的链接选择必要的区域：\n"),s("table",[s("tr",[s("td",[t._v("\n区域\n")]),t._v(" "),s("td",[t._v("\n镜像\n")])]),t._v(" "),s("tr",[s("td",[t._v("\nUS-WEST\n")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/home?region=us-west-1#launchAmi=ami-9cdbb3fc"}},[t._v("ami-9cdbb3fc")])])]),t._v(" "),s("tr",[s("td",[t._v("\nUS-EAST\n")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/home?region=us-east-1#launchAmi=ami-ce82caa4"}},[t._v("ami-ce82caa4")])])]),t._v(" "),s("tr",[s("td",[t._v("\nEU-CENTRAL\n")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://console.aws.amazon.com/ec2/home?region=eu-central-1#launchAmi=ami-191b0775"}},[t._v("ami-191b0775")])])])]),t._v("\n或者，也可以使用"),s("code",[t._v("Apache Ignite")]),t._v("关键字在"),s("code",[t._v("Community AMIs")]),t._v("中搜索镜像：\n"),s("img",{attrs:{src:"https://files.readme.io/faf5b14-search.png",alt:""}})]),t._v(" "),s("li",[t._v("选择一个"),s("code",[t._v("Instance Type")]),t._v(";")]),t._v(" "),s("li",[t._v("打开"),s("code",[t._v("Configure Instance")]),t._v("并且展开"),s("code",[t._v("Advanced Details")]),t._v(";")]),t._v(" "),s("li",[t._v("添加下面的任意配置参数；")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("CONFIG_URI")])]),t._v(" "),s("td",[t._v("Ignite配置文件的URL（也可以相对于类路径的META-INF文件夹），下载的配置文件会保存于./ignite-config.xml")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://raw.githubusercontent.com/apache/ignite/ master/examples/config/example-cache.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("OPTION_LIBS")])]),t._v(" "),s("td",[t._v("会被包含在类路径中的可选库")]),t._v(" "),s("td",[s("code",[t._v("ignite-log4j, ignite-spring,ignite-indexing")])]),t._v(" "),s("td",[s("code",[t._v("ignite-aws,ignite-aop")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("JVM_OPTS")])]),t._v(" "),s("td",[t._v("通过docker命令传递给ignite实例的环境变量。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("-Xms1g -Xmx1g -server -XX:+AggressiveOpts -XX:MaxPermSize=256m")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("EXTERNAL_LIBS")])]),t._v(" "),s("td",[t._v("库文件URL列表")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[s("code",[t._v("http://central.maven.org/maven2/io/undertow/undertow-servlet/1.3.10.Final/undertow-servlet-1.3.10.Final.jar,http://central.maven.org/maven2/io/undertow/undertow-build-config/1.0.0.Beta24/undertow-build-config-1.0.0.Beta24.jar")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("Ignite的版本")]),t._v(" "),s("td",[s("code",[t._v("latest")])]),t._v(" "),s("td",[t._v("2.1.0")])])])]),t._v(" "),s("p",[t._v("如下图所示：\n"),s("img",{attrs:{src:"https://files.readme.io/0c08e64-advance_details.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("首选Ignite版本")]),t._v("\nIGNITE_VERSION属性可以视具体情况而定。")])]),t._v(" "),s("ul",[s("li",[t._v("在"),s("code",[t._v("Tag Instance")]),t._v("，设置"),s("code",[t._v("name")]),t._v("标签，比如"),s("code",[t._v("ignite-node")]),t._v(";")]),t._v(" "),s("li",[t._v("复查然后运行实例；")]),t._v(" "),s("li",[t._v("连接实例："),s("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html",target:"_self",rel:"noopener noreferrer"}},[t._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide")]),t._v(";")]),t._v(" "),s("li",[t._v("要查看执行的过程，需要知道容器的id，可以使用如下命令：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("显示日志：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker logs -f CONTAINER_ID\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("进入docker容器：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it container_id /bin/bash\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"_4-google计算部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-google计算部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.Google计算部署")]),t._v(" "),s("p",[t._v("Ignite的镜像可以通过Google计算控制台配置一个简单的Ignite集群，通过镜像进行安装，可以快速地部署一个Ignite集群。")]),t._v(" "),s("h3",{attrs:{id:"_4-1-google计算部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-google计算部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 4.1.Google计算部署")]),t._v(" "),s("ul",[s("li",[t._v("要导入"),s("a",{attrs:{href:"https://storage.googleapis.com/ignite-media/ignite-google-image.tar.gz",target:"_self",rel:"noopener noreferrer"}},[t._v("Ignite镜像")]),t._v("，执行如下的命令：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("gcloud compute images create ignite-image "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n   --source-uri gs://ignite-media/ignite-google-image.tar.gz\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("要了解更多信息，可以参照"),s("a",{attrs:{href:"https://cloud.google.com/compute/docs/images#import_an_image",target:"_self",rel:"noopener noreferrer"}},[t._v("cloud.google.com")]),t._v("。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("打开"),s("code",[t._v("Google Compute Console")]),t._v("；")])]),t._v(" "),s("li",[s("p",[t._v("打开"),s("code",[t._v("Compute->Compute Engine->VM")]),t._v("实例，然后点击"),s("code",[t._v("New instance")]),t._v("；")])]),t._v(" "),s("li",[s("p",[t._v("点击"),s("code",[t._v("Boot disk")]),t._v("的"),s("code",[t._v("Change")]),t._v("按钮；")])]),t._v(" "),s("li",[s("p",[t._v("打开"),s("code",[t._v("Custom images")]),t._v("，然后选择已导入的镜像，在下面的截图中，可以看到名为"),s("code",[t._v("ignite-name")]),t._v("的镜像；\n"),s("img",{attrs:{src:"https://files.readme.io/e02e235-choose_image.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("点击"),s("code",[t._v("Management, disk, networking, access & security options")]),t._v("，然后可以添加任意的配置参数：\n|名称|描述|默认|示例|\n|---|---|---|---|\n|"),s("code",[t._v("CONFIG_URI")]),t._v("|Ignite配置文件的URL（也可以相对于类路径的META-INF文件夹），下载的配置文件会保存于./ignite-config.xml|无|https://raw.githubusercontent.com/apache/ignite/ master/examples/config/example-cache.xml|\n|"),s("code",[t._v("OPTION_LIBS")]),t._v("|会被包含在类路径中的可选库|"),s("code",[t._v("ignite-log4j, ignite-spring,ignite-indexing")]),t._v("|"),s("code",[t._v("ignite-aws,ignite-aop")]),t._v("|\n|"),s("code",[t._v("JVM_OPTS")]),t._v("|通过docker命令传递给ignite实例的环境变量。|无|"),s("code",[t._v("-Xms1g -Xmx1g -server -XX:+AggressiveOpts -XX:MaxPermSize=256m")]),t._v("|\n|"),s("code",[t._v("EXTERNAL_LIBS")]),t._v("|库文件URL列表|无|"),s("code",[t._v("http://central.maven.org/maven2/io/undertow/undertow-servlet/1.3.10.Final/undertow-servlet-1.3.10.Final.jar,http://central.maven.org/maven2/io/undertow/undertow-build-config/1.0.0.Beta24/undertow-build-config-1.0.0.Beta24.jar")]),t._v("|\n|"),s("code",[t._v("IGNITE_VERSION")]),t._v("|Ignite的版本|"),s("code",[t._v("latest")]),t._v("|1.7.0|")])])]),t._v(" "),s("p",[t._v("如下图所示：\n"),s("img",{attrs:{src:"https://files.readme.io/1945104-metadata.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("首选Ignite版本")]),t._v("\nIGNITE_VERSION属性可以视具体情况而定。")])]),t._v(" "),s("ul",[s("li",[t._v("填写必要的属性然后运行实例；")]),t._v(" "),s("li",[t._v("连接实例;")]),t._v(" "),s("li",[t._v("要查看执行的过程，需要知道容器的id，可以使用如下命令：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("下面的命令会显示日志：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker logs -f CONTAINER_ID\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("使用下面的命令可以进入docker容器：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it container_id /bin/bash\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"_5-mesos部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-mesos部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.Mesos部署")]),t._v(" "),s("h3",{attrs:{id:"_5-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-概述","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.1.概述")]),t._v(" "),s("p",[t._v("Apache Ignite支持在Mesos集群上调度和运行Ignite节点。\nApache Mesos是一个集群管理器，它提供了一个通用运行环境以及所有的必要资源来部署、运行和管理分布式应用。它对资源的管理和隔离有助于充分利用服务器资源。\n要了解Apache Mesos的更多信息，请参照："),s("a",{attrs:{href:"http://mesos.apache.org/",target:"_self",rel:"noopener noreferrer"}},[t._v("http://mesos.apache.org/")])]),t._v(" "),s("h3",{attrs:{id:"_5-2-ignite-mesos框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-ignite-mesos框架","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.2.Ignite Mesos框架")]),t._v(" "),s("p",[t._v("常规部署Apache Ignite集群需要下载Apache Ignite发行版，修改配置参数以及启动节点。Apache Ignite Mesos框架由"),s("code",[t._v("调度器")]),t._v("和"),s("code",[t._v("任务")]),t._v("组成，可以极大地简化集群的部署。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("调度器")]),t._v("：调度器启动时将自己在Mesos主节点上注册，注册成功之后调度器就会开始处理从Mesos主节点到使用资源的Ignite节点的资源请求，调度器会维护Ignite集群所需（并且可用）的所有资源水平（CPU，内存等）；")]),t._v(" "),s("li",[s("code",[t._v("任务")]),t._v("：在Mesos从节点上启动Ignite节点。")])]),t._v(" "),s("h3",{attrs:{id:"_5-3-运行ignite-mesos框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-运行ignite-mesos框架","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.3.运行Ignite Mesos框架")]),t._v(" "),s("p",[t._v("要运行Ignite Mesos框架需要配置好的正在运行的Apache Mesos集群，如果需要如何Apache Mesos集群的信息，请参照："),s("a",{attrs:{href:"https://docs.mesosphere.com/getting-started/datacenter/install/",target:"_self",rel:"noopener noreferrer"}},[t._v("https://docs.mesosphere.com/getting-started/datacenter/install/")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("确保主节点和从节点监听正确的IP地址，否则无法保证Mesos集群能正常工作。")])]),t._v(" "),s("p",[s("strong",[t._v("通过Marathon运行框架")]),t._v("\n目前，建议的做法是通过Marathon运行框架。")]),t._v(" "),s("ul",[s("li",[t._v("安装Marathon，参照："),s("a",{attrs:{href:"https://docs.mesosphere.com/getting-started/datacenter/install/",target:"_self",rel:"noopener noreferrer"}},[t._v("https://docs.mesosphere.com/getting-started/datacenter/install/")]),t._v("marathon章节；")]),t._v(" "),s("li",[t._v("下载Apache Ignite然后将"),s("code",[t._v("libs\\optional\\ignite-mesos\\ignite-mesos-<ignite-version>-jar-with-dependencies.jar")]),t._v("上传到任意一个云存储（比如Amazon S3yun）；")]),t._v(" "),s("li",[t._v("拷贝下面的应用定义（JSON格式）然后保存成"),s("code",[t._v("marathon.json")]),t._v("文件，然后对参数做必要的修改；")])]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ignition"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"instances"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cpus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mem"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ports"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uris"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://host/ignite-mesos-<ignite-version>-jar-with-dependencies.jar"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"env"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_NODE_COUNT"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"MESOS_MASTER_URL"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zk://localhost:2181/mesos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_RUN_CPU_PER_NODE"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_MEMORY_PER_NODE"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2048"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IGNITE_VERSION"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"MESOS_USER"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userAAAAA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"MESOS_ROLE"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"role1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cmd"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java -jar ignite-mesos-<ignite-version>-jar-with-dependencies.jar"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("角色名必须是有效的目录名，因此如下的格式非法：")]),t._v(" "),s("p",[t._v("1.为空串；\n2.为.或者..;\n3.由"),s("code",[t._v("-")]),t._v("开始；\n4.包含斜杠、退格键以及空白符等。")]),t._v(" "),s("p",[t._v("如果集群没有额外的约束，框架会试图占用Mesos集群的所有资源。")]),t._v(" "),s("ul",[s("li",[t._v("通过curl等工具发送应用定义的POST请求给Marathon：")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-type: application/json"')]),t._v(" --data-binary @marathon.json http://"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("marathon-ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":8080/v2/apps/\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("为了确保Apache Mesos框架正确部署，可以这么做，打开Marathon界面"),s("code",[t._v("http://<marathon-ip>:8080")]),t._v("，确保有一个名为"),s("code",[t._v("ignition")]),t._v("的应用，而且状态是"),s("code",[t._v("Running")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/sTIbAfcdScKoDCSAJ6Q5_marathon.png",alt:""}})]),t._v(" "),s("li",[t._v("打开Mesos控制台"),s("code",[t._v("http://<master-ip>:5050")]),t._v("，如果一切正常那么任务的名字类似"),s("code",[t._v("Ignite node N")]),t._v("，状态是"),s("code",[t._v("RUNNING")]),t._v("。在本示例中，N=4，可以看示例中的"),s("code",[t._v("marathon.json")]),t._v('文件-"IGNITE_NODE_COUNT": "4"；\n'),s("img",{attrs:{src:"https://files.readme.io/WSZ5mvnqQzy0dsUeq9WQ_mesos.png",alt:""}})]),t._v(" "),s("li",[t._v("Mesos允许通过浏览器获得任务的日志，要查看Ignition的日志可以点击"),s("code",[t._v("Active Tasks")]),t._v("表格中的"),s("code",[t._v("Sandbox")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/qUqG485tRtKS50JCp7yn_mesos_sandbox.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("stdout")]),t._v("获取标准输出日志，"),s("code",[t._v("stderr")]),t._v("获取标准错误日志；\n"),s("img",{attrs:{src:"https://files.readme.io/Ch5VkVm1Q5qGvrGEYF4k_mesos_sandbox_stdout.png",alt:""}}),t._v(" "),s("strong",[t._v("通过jar文件运行框架")])]),t._v(" "),s("li",[t._v("下载Ignite包然后打开"),s("code",[t._v("libs\\optional\\ignite-mesos\\")]),t._v("文件夹；")]),t._v(" "),s("li",[t._v("使用如下命令运行框架：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -jar ignite-mesos-<ignite-version>-jar-with-dependencies.jar\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("或者：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -jar ignite-mesos-<ignite-version>-jar-with-dependencies.jar properties.prop\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("其中"),s("code",[t._v("properties.prop")]),t._v("是一个属性文件，如果不提供配置文件那么框架会试图占用Mesos集群的所有资源，下面是一个例子：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# The number of nodes in the cluster.\nIGNITE_NODE_COUNT=1\n# Mesos ZooKeeper URL to locate leading master.\nMESOS_MASTER_URL=zk://localhost:2181/mesos\n# The number of CPU Cores for each Apache Ignite node.\nIGNITE_RUN_CPU_PER_NODE=4\n# The number of Megabytes of RAM for each Apache Ignite node.\nIGNITE_MEMORY_PER_NODE=4096\n# The version ignite which will be run on nodes.\nIGNITE_VERSION=1.7.0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("ul",[s("li",[t._v("为了确保Apache Mesos框架部署正确，可以这么做-打开Mesos控制台"),s("code",[t._v("http://<marathon-ip>:5050")]),t._v("，如果一切正常，名字类似"),s("code",[t._v("Ignite node N")]),t._v("的任务状态应该是"),s("code",[t._v("Running")]),t._v("。在本示例中N=1，可以看示例中的"),s("code",[t._v("properties.prop")]),t._v('文件-"IGNITE_NODE_COUNT": "1"；\n'),s("img",{attrs:{src:"https://files.readme.io/eEmfch9cQcSQiM27gSqT_Mesos_console.png",alt:""}})]),t._v(" "),s("li",[t._v("Mesos可以通过浏览器获得任务的日志，要查看Ignition的日志，可以点击"),s("code",[t._v("Sandbox")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/s6fvlxNcQz66nhq8e9zH_Sandbox.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("stdout")]),t._v("获取标准输出日志，"),s("code",[t._v("stderr")]),t._v("获取标准错误日志；\n"),s("img",{attrs:{src:"https://files.readme.io/MEksCWXBTRq5WpUyp4CJ_stdout.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"_5-4-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.4.配置")]),t._v(" "),s("p",[t._v("所有配置都是通过环境变量或者配置文件处理的（这非常适用于简化marathon的配置以运行框架），下面的配置参数可以根据需要进行配置：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认值")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("IGNITE_RUN_CPU_PER_NODE")])]),t._v(" "),s("td",[t._v("每个Ignite节点的CPU核数")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("2")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MEMORY_PER_NODE")])]),t._v(" "),s("td",[t._v("每个节点的内存数量（M）")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("1024")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_DISK_SPACE_PER_NODE")])]),t._v(" "),s("td",[t._v("每个节点占用的磁盘容量（M）")]),t._v(" "),s("td",[t._v("1024")]),t._v(" "),s("td",[t._v("2048")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_NODE_COUNT")])]),t._v(" "),s("td",[t._v("集群内的节点数量")]),t._v(" "),s("td",[t._v("5")]),t._v(" "),s("td",[t._v("10")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_TOTAL_CPU")])]),t._v(" "),s("td",[t._v("Ignite集群的CPU核数")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("5")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_TOTAL_MEMORY")])]),t._v(" "),s("td",[t._v("Ignite集群占用的内存（M）")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_TOTAL_DISK_SPACE")])]),t._v(" "),s("td",[t._v("Ignite集群占用的磁盘空间（M）")]),t._v(" "),s("td",[t._v("没有限制")]),t._v(" "),s("td",[t._v("5120")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MIN_CPU_PER_NODE")])]),t._v(" "),s("td",[t._v("要运行Ignite节点所需的CPU核数的最小值")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("4")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MIN_MEMORY_PER_NODE")])]),t._v(" "),s("td",[t._v("要运行Ignite节点所需的内存的最小值（M）")]),t._v(" "),s("td",[t._v("256")]),t._v(" "),s("td",[t._v("1024")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("节点要运行的Ignite的版本")]),t._v(" "),s("td",[t._v("latest")]),t._v(" "),s("td",[t._v("1.6.0")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_WORK_DIR")])]),t._v(" "),s("td",[t._v("保存Ignite发行版的")]),t._v(" "),s("td",[t._v("ignite-release")]),t._v(" "),s("td",[t._v("/opt/ignite/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_XML_CONFIG")])]),t._v(" "),s("td",[t._v("Apache Ignite配置文件的路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/ignite/ignite-config.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_CONFIG_XML_URL")])]),t._v(" "),s("td",[t._v("Apache Ignite配置文件的URL")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://example.com/default-config.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_USERS_LIBS")])]),t._v(" "),s("td",[t._v("要添加到类路径的库文件的路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/libs/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_USERS_LIBS_URL")])]),t._v(" "),s("td",[t._v("要添加到类路径的库文件的URL列表，逗号分割")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("https://example.com/lib.zip,https://example.com/lib1.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("MESOS_MASTER_URL")])]),t._v(" "),s("td",[t._v("要定位主节点的Mesos Zookeeper的URL")]),t._v(" "),s("td",[t._v("zk://localhost:2181/mesos")]),t._v(" "),s("td",[t._v("zk://176.0.1.45:2181/mesos or 176.0.1.45:2181")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_PACKAGE_URL")])]),t._v(" "),s("td",[t._v("Ignite的压缩包URL，这个参数可以用于替换IGNITE_VERSION参数。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("http://apache-mirror.rbc.ru/pub/apache//ignite/1.7.0/apache-ignite-1.7.0-src.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_PACKAGE_PATH")])]),t._v(" "),s("td",[t._v("Ignite的压缩包路径，这个参数在访问因特网受限时是有用的。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/ignite/apache-ignite-fabric-1.6.0-bin.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_HTTP_SERVER_IDLE_TIMEOUT")])]),t._v(" "),s("td",[t._v("设置一个HTTP连接的最大空闲时间（毫秒），jetty服务器会使用，服务器提供了ignite的mesos框架所需的资源，比如ignite压缩包，用户的库文件，配置等。")]),t._v(" "),s("td",[t._v("30000")]),t._v(" "),s("td",[t._v("30000")])])])]),t._v(" "),s("h2",{attrs:{id:"_6-yarn部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-yarn部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 6.Yarn部署")]),t._v(" "),s("h3",{attrs:{id:"_6-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-概述","aria-hidden":"true"}},[t._v("#")]),t._v(" 6.1.概述")]),t._v(" "),s("p",[t._v("与Yarn的集成可以支持在Yarn集群上调度和运行Apache Ignite节点。\nYarn是一个资源管理器，它提供了一个包括所有必要资源的通用的运行环境来进行分布式应用的部署，运行和管理，它对资源的管理和隔离有助于充分利用服务器资源。\n要了解Yarn的信息，请参照"),s("a",{attrs:{href:"http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html",target:"_self",rel:"noopener noreferrer"}},[t._v("http://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_6-2-ignite-yarn应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-ignite-yarn应用","aria-hidden":"true"}},[t._v("#")]),t._v(" 6.2.Ignite Yarn应用")]),t._v(" "),s("p",[t._v("部署Apache Ignite集群的典型步骤是下载Ignite的发行版，修改配置文件以及启动节点。与Yarn的集成可以避免这些操作，Ignite Yarn应用可以极大的简化集群的部署，它由如下组件组成：")]),t._v(" "),s("ul",[s("li",[t._v("下载Ignite发行版，将必要的资源放入HDFS，创建启动任务的必要的上下文，启动"),s("code",[t._v("ApplicationMaster")]),t._v("进程；")]),t._v(" "),s("li",[s("code",[t._v("Application master")]),t._v("：注册成功之后组件就会开始处理从资源管理器到使用资源的Ignite节点的资源请求，"),s("code",[t._v("Application master")]),t._v("会维护Ignite集群所需的所有资源水平（CPU，内存等）；")]),t._v(" "),s("li",[s("code",[t._v("Container")]),t._v("：在从节点上运行Ignite节点的实体；")])]),t._v(" "),s("h3",{attrs:{id:"_6-3-运行ignite-yarn应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-运行ignite-yarn应用","aria-hidden":"true"}},[t._v("#")]),t._v(" 6.3.运行Ignite Yarn应用")]),t._v(" "),s("p",[t._v("要运行Ignite应用，需要配置和运行Yarn和Hadoop集群，要了解如何配置集群的信息，可以参照："),s("a",{attrs:{href:"http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html",target:"_self",rel:"noopener noreferrer"}},[t._v(" http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/ClusterSetup.html")]),t._v(".")]),t._v(" "),s("ul",[s("li",[t._v("下载Ignite；")]),t._v(" "),s("li",[t._v("配置属性文件，修改必要的参数，可以参照下面的"),s("code",[t._v("配置")]),t._v("章节：")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# The number of nodes in the cluster.\nIGNITE_NODE_COUNT=2\n\n# The number of CPU Cores for each Apache Ignite node.\nIGNITE_RUN_CPU_PER_NODE=1\n\n# The number of Megabytes of RAM for each Apache Ignite node.\nIGNITE_MEMORY_PER_NODE=2048\n\n# The version of Ignite which will be run on nodes.\nIGNITE_VERSION=2.3.0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("ul",[s("li",[t._v("运行应用；")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" jar ignite-yarn-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".jar ./ignite-yarn-"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ignite-version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".jar cluster.properties\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("为了确保应用正确部署，可以这样做：打开Yarn控制台"),s("code",[t._v("http://<hostname>:8088/cluster")]),t._v("，看名字为"),s("code",[t._v("Ignition")]),t._v("的应用是否工作正常；\n"),s("img",{attrs:{src:"https://files.readme.io/ISnxYZaaSyWC3Z6VP54H_AllApp.png",alt:""}})]),t._v(" "),s("li",[t._v("可以从浏览器获得日志，要查看日志可以点击任意容器的"),s("code",[t._v("Logs")]),t._v("；\n"),s("img",{attrs:{src:"https://files.readme.io/y0U5GlGoTUeSl3qc8iMQ_ContainerLogs.png",alt:""}})]),t._v(" "),s("li",[t._v("点击"),s("code",[t._v("stdout")]),t._v("获取标准输出日志，"),s("code",[t._v("stderr")]),t._v("获取标准错误日志；\n"),s("img",{attrs:{src:"https://files.readme.io/a3e8yeROWckIihHTWTwp_ContainerStdout.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"_6-4-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 6.4.配置")]),t._v(" "),s("p",[t._v("所有的配置都是通过环境变量和属性文件进行的，下面的配置参数可以根据需要进行配置：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("默认值")]),t._v(" "),s("th",[t._v("示例")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("IGNITE_XML_CONFIG")])]),t._v(" "),s("td",[t._v("指向Apache Ignite配置文件的HDFS路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/ignite/ignite-config.xml")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_WORK_DIR")])]),t._v(" "),s("td",[t._v("用于保存Ignition发行版的目录")]),t._v(" "),s("td",[t._v("./ignite-release")]),t._v(" "),s("td",[t._v("/opt/ignite/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_RELEASES_DIR")])]),t._v(" "),s("td",[t._v("保存Ignite发行版的HDFS路径")]),t._v(" "),s("td",[t._v("/ignite/releases/")]),t._v(" "),s("td",[t._v("/ignite-rel/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_USERS_LIBS")])]),t._v(" "),s("td",[t._v("要添加到CLASSPATH的库文件的HDFS路径")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/opt/libs/")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MEMORY_PER_NODE")])]),t._v(" "),s("td",[t._v("每个Ignite节点占用的内存的大小（M），这个是Java堆的大小，包括了堆内缓存（如果使用了堆内缓存）。")]),t._v(" "),s("td",[t._v("2048")]),t._v(" "),s("td",[t._v("1024")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_MEMORY_OVERHEAD_PER_NODE")])]),t._v(" "),s("td",[t._v("所有数据区必要的内存量，包括用于处理JVM本身的负载、用于存储数据的节点，都需要调整，不仅仅是计算。YARN用于容器运行Ignite节点的必要内存量是IGNITE_MEMORY_PER_NODE和IGNITE_MEMORY_OVERHEAD_PER_NODE之和。")]),t._v(" "),s("td",[t._v("IGNITE_MEMORY_PER_NODE * 0.10，最小值384")]),t._v(" "),s("td",[t._v("17408")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_HOSTNAME_CONSTRAINT")])]),t._v(" "),s("td",[t._v("从节点约束")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("192.168.0.[1-100]")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_NODE_COUNT")])]),t._v(" "),s("td",[t._v("集群节点的数量")]),t._v(" "),s("td",[t._v("3")]),t._v(" "),s("td",[t._v("10")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_RUN_CPU_PER_NODE")])]),t._v(" "),s("td",[t._v("每个Ignite节点的CPU核数")]),t._v(" "),s("td",[t._v("2")]),t._v(" "),s("td",[t._v("4")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_VERSION")])]),t._v(" "),s("td",[t._v("节点上运行的Ignite版本")]),t._v(" "),s("td",[t._v("latest")]),t._v(" "),s("td",[t._v("1.0.5")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_PATH")])]),t._v(" "),s("td",[t._v("到Ignite构建的hdfs路径，当yarn集群运行在内网无法访问互联网时，这个属性很有用。")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("/ignite/apache-ignite-fabric-1.7.0-bin.zip")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IGNITE_JVM_OPTS")])]),t._v(" "),s("td",[t._v("JVM参数")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("-XX:+PrintGC")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);