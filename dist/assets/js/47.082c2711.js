(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{75:function(s,e,t){"use strict";t.r(e);var a=t(0),n=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"_1-ignite-web控制台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ignite-web控制台","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.Ignite Web控制台")]),s._v(" "),t("h2",{attrs:{id:"_1-1-ignite-web控制台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ignite-web控制台","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.1.Ignite Web控制台")]),s._v(" "),t("p",[t("code",[s._v("Ignite Web控制台")]),s._v("是一个交互式的配置向导、管理和监控工具。它可以：")]),s._v(" "),t("ul",[t("li",[s._v("创建和下载Ignite集群使用的各种配置：\n"),t("img",{attrs:{src:"https://files.readme.io/f5eeab2-cluster.png",alt:""}})]),s._v(" "),t("li",[s._v("从任意RDBMS的模式中自动化构造Ignite的SQL元数据：\n"),t("img",{attrs:{src:"https://files.readme.io/16d8b74-model.png",alt:""}})]),s._v(" "),t("li",[s._v("在内存缓存中执行SQL查询，以及查看执行计划。\n"),t("img",{attrs:{src:"https://files.readme.io/0383009-Screen_Shot_2017-02-02_at_12.47.09_PM.png",alt:""}})])]),s._v(" "),t("p",[s._v("Ignite的"),t("strong",[s._v("Web控制台")]),s._v("，是一个可以部署在系统环境中的Web应用。它可以配置所有的集群属性，从数据库中导入模式用于与持久化存储集成。它可以接入特定的数据库然后生成所有必要的OR映射配置（XML以及纯Java）以及Java领域模型POJOs。Web控制台还有集群监控的功能（使用GridGain单独的插件实现），它会显示各种缓存以及节点的指标数据，比如CPU和堆的使用情况等。")]),s._v(" "),t("h2",{attrs:{id:"_1-2-入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-入门","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.2.入门")]),s._v(" "),t("h3",{attrs:{id:"_1-2-1-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.2.1.安装")]),s._v(" "),t("p",[s._v("Ignite的Web控制台是一个WEB应用，需要构建、打包然后部署在自己的环境上。另外，它需要安装NodeJS，MongoDB以及Ignite的Web代理。\n参照"),t("code",[s._v("构建和部署")]),s._v("章节的文档，然后按照步骤操作即可。")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("一个免费已部署的Ignite Web控制台实例")]),s._v("\n在构建和部署自己的本地Ignite Web控制台实例之前，可以看一下一个免费已部署的"),t("a",{attrs:{href:"https://console.gridgain.com/",target:"_self",rel:"noopener noreferrer"}},[s._v("Web控制台实例")]),s._v("，利用这个站点，花几分钟就可以大概了解控制台的已有功能。")])]),s._v(" "),t("p",[s._v("Ignite的Web控制台启动运行之后，需要按照下面章节的步骤配置并且启动Web代理，代理是Ignite的Web控制台和Ignite集群之间的媒介。")]),s._v(" "),t("h3",{attrs:{id:"_1-2-2-ignite-web代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-ignite-web代理","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.2.2.Ignite Web代理")]),s._v(" "),t("p",[s._v("Ignite的Web代理是一个独立的Java应用，它可以建立Ignite集群与Web控制台之间的连接。Web Agent与集群节点间采用REST接口进行通信，而与Web控制台之间采用WebSocket进行通信。\n"),t("img",{attrs:{src:"https://files.readme.io/924bc44-Apache-Ignite-Cluster.png",alt:""}}),s._v("\n举例来说，Ignite的Web Agent功能如下：")]),s._v(" "),t("ul",[t("li",[s._v("Web控制台与Ignite集群之间执行SQL查询的代理；")]),s._v(" "),t("li",[s._v("Web控制台与RDBMS之间的代理。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://files.readme.io/7affb9b-ignite-web-console-schema-import.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("使用")])]),s._v(" "),t("p",[s._v("Ignite Web代理的zip压缩包中的"),t("code",[s._v("ignite-web-agent.{sh|bat}")]),s._v("脚本可用于启动这个代理。一定要满足下面的必要条件，使得代理可以在Ignite集群和Ignite Web控制台之间建立连接。")]),s._v(" "),t("p",[s._v("1.为了与Web代理通信，Ignite节点需要开启REST服务模式（将"),t("code",[s._v("ignite-rest-http")]),s._v("文件夹从"),t("code",[s._v("lib/optional/")]),s._v("移动到"),t("code",[s._v("lib/")]),s._v("中）。如果是从IDE启动节点，那么需要将下面的依赖加入pom.xml文件；")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.ignite"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("ignite-rest-http"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("{ignite.version}"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("2.配置Web代理的"),t("code",[s._v("serverURI")]),s._v("属性，将其指向Ignite节点的REST服务的URL，代理默认会连接"),t("code",[s._v("http://localhost:8080")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("配置")])]),s._v(" "),t("p",[t("em",[s._v("配置文件")]),s._v("\nIgnite的Web代理默认会试图从"),t("code",[s._v("default.properties")]),s._v("文件中加载配置。这个文件的内容需要遵循一个简单的基于行的格式。\n可用的属性名包括："),t("code",[s._v("tokens")]),s._v("，"),t("code",[s._v("server-uri")]),s._v("，"),t("code",[s._v("node-uri")]),s._v("，"),t("code",[s._v("driver-folder")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tokens=1a2b3c4d5f,2j1s134d12\nserverURI=https://console.example.com:3001\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("em",[s._v("命令行参数")]),s._v("\n要获得帮助，可以在终端中执行"),t("code",[s._v("ignite-web-agent.{sh|bat} -h")]),s._v("或者"),t("code",[s._v("ignite-web-agent.{sh|bat} --help")]),s._v("。\n可用的属性如下：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("-h")]),s._v(","),t("code",[s._v("--help")]),s._v("：输出帮助信息；")]),s._v(" "),t("li",[t("code",[s._v("-c")]),s._v(","),t("code",[s._v("--config")]),s._v("：配置文件路径；")]),s._v(" "),t("li",[t("code",[s._v("-d")]),s._v(","),t("code",[s._v("--driver-folder")]),s._v("：JDBC驱动所在文件夹路径，默认值是"),t("code",[s._v("./jdbc-drivers")]),s._v("；")]),s._v(" "),t("li",[t("code",[s._v("-n")]),s._v(","),t("code",[s._v("--node-uri")]),s._v("：要接入的Ignite REST服务端的URI，默认值是"),t("code",[s._v("http://localhost:8080")]),s._v("；")]),s._v(" "),t("li",[t("code",[s._v("-s")]),s._v(","),t("code",[s._v("--server-uri")]),s._v("：要接入的Ignite Web控制台的URI，默认值是"),t("code",[s._v("http://localhost:3001")]),s._v(";")]),s._v(" "),t("li",[t("code",[s._v("-t")]),s._v(","),t("code",[s._v("--tokens")]),s._v("：用户的安全令牌。")])]),s._v(" "),t("p",[t("strong",[s._v("代理配置")])]),s._v(" "),t("p",[s._v("代理可以通过将系统属性、"),t("code",[s._v("JVM_OPTS")]),s._v("环境变量的方式传给Web代理。\n在如下文档中可以找到详细的描述：\n"),t("a",{attrs:{href:"http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html",target:"_self",rel:"noopener noreferrer"}},[s._v("http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html")]),s._v("。")]),s._v(" "),t("p",[t("em",[s._v("HTTP")]),s._v(" "),t("code",[s._v("http.proxyHost")]),s._v("：代理服务器的主机名或者地址；\n"),t("code",[s._v("http.proxyPort")]),s._v("：代理服务器的端口号。")]),s._v(" "),t("p",[s._v("如果代理需要认证的话，还需要提供如下的系统属性：\n"),t("code",[s._v("http.proxyUsername")]),s._v("：用户名；\n"),t("code",[s._v("http.proxyPassword")]),s._v("：密码。\nShell：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("JVM_OPTS"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token string"}},[s._v('"-Dhttp.proxyHost=<proxy-hostname> -Dhttp.proxyPort=<proxy-port> -Dhttp.proxyUsername=<proxy-username> -Dhttp.proxyPassword=<proxy-password>"')]),s._v(" ./ignite-web-agent.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("CMD：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" JVM_OPTS"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("-Dhttp.proxyHost"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-hostname"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Dhttp.proxyPort"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-port"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Dhttp.proxyUsername"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-username"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Dhttp.proxyPassword"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-password"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n./ignite-web-agent.bat\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("em",[s._v("HTTPS")]),s._v(" "),t("code",[s._v("https.proxyHost")]),s._v("：代理服务器的主机名或者地址；\n"),t("code",[s._v("https.proxyPort")]),s._v("：代理服务器的端口号。")]),s._v(" "),t("p",[s._v("如果代理需要认证的话，还需要提供如下的系统属性：\n"),t("code",[s._v("https.proxyUsername")]),s._v("：用户名；\n"),t("code",[s._v("https.proxyPassword")]),s._v("：密码。\nShell：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("JVM_OPTS"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token string"}},[s._v('"-Dhttps.proxyHost=<proxy-hostname> -Dhttps.proxyPort=<proxy-port> -Dhttps.proxyUsername=<proxy-username> -Dhttps.proxyPassword=<proxy-password>"')]),s._v(" ./ignite-web-agent.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("CMD：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" JVM_OPTS"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("-Dhttps.proxyHost"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-hostname"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Dhttps.proxyPort"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-port"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Dhttps.proxyUsername"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-username"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Dhttps.proxyPassword"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-password"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n./ignite-web-agent.bat\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("em",[s._v("SOCKS")]),s._v(" "),t("code",[s._v("socksProxyHost")]),s._v("：代理服务器的主机名或者地址；\n"),t("code",[s._v("socksProxyPort")]),s._v("：代理服务器的端口号。")]),s._v(" "),t("p",[s._v("如果代理需要认证的话，还需要提供如下的系统属性：\n"),t("code",[s._v("java.net.socks.username")]),s._v("：用户名；\n"),t("code",[s._v("java.net.socks.password")]),s._v("：密码。\nShell:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("JVM_OPTS"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token string"}},[s._v('"-DsocksProxyHost=<proxy-hostname> -DsocksProxyPort=<proxy-port> -Djava.net.socks.username=<proxy-username> -Djava.net.socks.password=<proxy-password>"')]),s._v(" ./ignite-web-agent.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("CMD:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" JVM_OPTS"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" -DsocksProxyHost"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-hostname"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -DsocksProxyPort"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-port"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Djava.net.socks.username"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-username"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" -Djava.net.socks.password"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("proxy-password"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n./ignite-web-agent.bat\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_1-3-构建和部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-构建和部署","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.3.构建和部署")]),s._v(" "),t("h3",{attrs:{id:"_1-3-1-先决条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-先决条件","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.3.1.先决条件")]),s._v(" "),t("p",[s._v("为了在本地部署Ignite的Web控制台，需要先安装：")]),s._v(" "),t("ul",[t("li",[s._v("MongoDB（3.2.0以上版本），具体可以参照"),t("a",{attrs:{href:"http://docs.mongodb.org/manual/installation",target:"_self",rel:"noopener noreferrer"}},[s._v("文档")]),s._v("；")]),s._v(" "),t("li",[s._v("NodeJS（6.5.X以上版本），可以从"),t("a",{attrs:{href:"https://nodejs.org/en/download/current",target:"_self",rel:"noopener noreferrer"}},[s._v("https://nodejs.org/en/download/current")]),s._v("针对具体的OS找到相对应的安装文件。")])]),s._v(" "),t("p",[s._v("开始之前需要下载依赖：")]),s._v(" "),t("ul",[t("li",[s._v("后台：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("$IGNITE_HOME")]),s._v("/modules/web-console/backend\n"),t("span",{attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" --no-optional\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("前台：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("$IGNITE_HOME")]),s._v("/modules/web-console/frontend\n"),t("span",{attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" --no-optional\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_1-3-2-构建ignite-web代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-构建ignite-web代理","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.3.2.构建Ignite Web代理")]),s._v(" "),t("p",[s._v("要从源代码构建Ignite的Web代理，需要在"),t("code",[s._v("$IGNITE_HOME")]),s._v("文件夹中执行如下的命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mvn clean package -pl :ignite-web-agent -am -P web-console -DskipTests"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("构建过程完成后，会在"),t("code",[s._v("$IGNITE_HOME/modules/web-console/web-agent/taget")]),s._v("中找到"),t("code",[s._v("ignite-web-agent-x.x.x.zip")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"_1-3-3-在开发模式中运行ignite的web控制台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-3-在开发模式中运行ignite的web控制台","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.3.3.在开发模式中运行Ignite的Web控制台")]),s._v(" "),t("p",[s._v("要在开发模式中运行Ignite的Web控制台，可以按照如下步骤操作：")]),s._v(" "),t("ul",[t("li",[s._v("配置MongoDB以服务的模式运行，或者在终端中执行"),t("code",[s._v("mongod")]),s._v("命令来启动MongoDB；")]),s._v(" "),t("li",[s._v("将"),t("code",[s._v("ignite-web-agent-x.x.x.zip")]),s._v("复制到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/backend/agent_dists")]),s._v("文件夹；")]),s._v(" "),t("li",[s._v("在终端中切换到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/backend")]),s._v("，如果需要，运行"),t("code",[s._v("npm install --no-optional")]),s._v("(如果依赖改变)，然后运行"),t("code",[s._v("npm start")]),s._v("启动后台；")]),s._v(" "),t("li",[s._v("在另一个终端中切换到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/frontend")]),s._v("，如果需要，运行"),t("code",[s._v("npm install --no-optional")]),s._v("(如果依赖改变)，然后运行"),t("code",[s._v("npm run dev")]),s._v("以开发模式启动webpack；")]),s._v(" "),t("li",[s._v("在浏览器中打开："),t("code",[s._v("http://localhost:9000")]),s._v("；")]),s._v(" "),t("li",[s._v("在"),t("code",[s._v("2.2.入门")]),s._v("章节中可以看到如何将部署的控制台接入一个远程集群，或者如何在远程主机上访问控制台。")])]),s._v(" "),t("h3",{attrs:{id:"_1-3-4-在生产模式中运行ignite的web控制台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-4-在生产模式中运行ignite的web控制台","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.3.4.在生产模式中运行Ignite的Web控制台")]),s._v(" "),t("p",[t("strong",[s._v("前提条件")])]),s._v(" "),t("ul",[t("li",[s._v("安装了Apache HTTP Server的2.2及更新的版本或者nginx；")]),s._v(" "),t("li",[s._v("为Ignite的Web控制台分配一个专用的主机名（可选）。")])]),s._v(" "),t("p",[t("strong",[s._v("启动后台")])]),s._v(" "),t("ul",[t("li",[s._v("配置MongoDB以服务的模式运行，或者在终端中执行"),t("code",[s._v("mongod")]),s._v("命令来启动MongoDB；")]),s._v(" "),t("li",[s._v("将"),t("code",[s._v("ignite-web-agent-x.x.x.zip")]),s._v("复制到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/backend/agent_dists")]),s._v("文件夹；")]),s._v(" "),t("li",[s._v("在终端中切换到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/backend")]),s._v("；")]),s._v(" "),t("li",[s._v("运行"),t("code",[s._v("npm start")]),s._v("启动后台。")])]),s._v(" "),t("blockquote",[t("p",[s._v("如果希望以守护进程模式运行后台，需要为NodeJS应用使用进程管理器：pm2，forever等。")])]),s._v(" "),t("p",[t("strong",[s._v("构建前台")])]),s._v(" "),t("ul",[t("li",[s._v("在另一个终端中切换到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/frontend")]),s._v(";")]),s._v(" "),t("li",[s._v("运行"),t("code",[s._v("npm run build")]),s._v("为Web服务器生成文件（html、js、css）；")]),s._v(" "),t("li",[s._v("生成的文件位于"),t("code",[s._v("$IGNITE_HOME/modules/web-console/frontend/build")]),s._v("。")])]),s._v(" "),t("p",[t("strong",[s._v("配置Apache HTTP Server")])]),s._v(" "),t("ul",[t("li",[s._v("将"),t("code",[s._v("$IGNITE_HOME/modules/web-console/frontend/build")]),s._v("文件夹的内容复制到"),t("code",[s._v("$IGNITE_HOME/modules/web-console/frontend/build")]),s._v(";")]),s._v(" "),t("li",[s._v("如果Apache HTTP Server为多个站点提供服务，那么需要将下面的虚拟主机添加到"),t("code",[s._v("/etc/httpd/conf/httpd.conf")]),s._v("：\nhttpd.conf:")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<VirtualHost *:80>\n  ServerName www.WEB_CONSOLE_HOSTNAME\n  ServerAlias WEB_CONSOLE_HOSTNAME\n\n  DocumentRoot "/var/www/web-console-static"\n\n  RewriteEngine on\n\n  <Directory "/var/www/web-console-static">\n  AllowOverride All\n  Allow from all\n  </Directory>\n\n  ProxyRequests off\n\n  <proxy *>\n  Order deny,allow\n  Allow from all\n  </proxy>\n\n  ProxyPreserveHost On\n  RequestHeader set Host "WEB_CONSOLE_HOSTNAME"\n\n  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f\n  RewriteRule ^ - [L]\n\n  RewriteCond %{HTTP:UPGRADE} ^WebSocket$ [NC]\n  RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]\n  RewriteRule .* ws://localhost:3000%{REQUEST_URI} [P,L]\n\n  RewriteCond %{REQUEST_URI} ^/agents/.* [OR]\n  RewriteCond %{REQUEST_URI} ^/socket.io/.*\n  RewriteRule ^ http://localhost:3000%{REQUEST_URI} [P,L]\n\n  RewriteCond %{REQUEST_URI} ^/api/v1/.*$\n  RewriteRule ^/api/v1/(.*)$ http://localhost:3000/$1 [P,L]\n\n  RewriteRule ^ /index.html [L]\n</VirtualHost>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("blockquote",[t("p",[s._v("上面文件中的"),t("strong",[s._v("WEB_CONSOLE_HOSTNAME")]),s._v("，需要替换为部署Web控制台实例的机器的主机名。")])]),s._v(" "),t("p",[s._v("如果Apache HTTP Server还用于部署的Web控制台，那么下面的配置也需要添加到"),t("code",[s._v("/etc/httpd/conf/httpd.conf")]),s._v(":\nhttpd.conf:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ServerName localhost\n\nDocumentRoot "/var/www/web-console-static"\n\nRewriteEngine on\n\n<Directory "/var/www/web-console-static">\nAllowOverride All\nAllow from all\n</Directory>\n\nProxyRequests off\n\n<proxy *>\nOrder deny,allow\nAllow from all\n</proxy>\n\nProxyPreserveHost On\nRequestHeader set Host "EXTERNAL_SERVER_IP"\n\nRewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f\nRewriteRule ^ - [L]\n\nRewriteCond %{REQUEST_URI} ^/agents/.* [OR]\nRewriteCond %{REQUEST_URI} ^/socket.io/.*\nRewriteRule ^ http://localhost:3000%{REQUEST_URI} [P,L]\n\nRewriteCond %{HTTP:UPGRADE} ^WebSocket$ [NC]\nRewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]\nRewriteRule .* ws://localhost:3000%{REQUEST_URI} [P,L]\n\nRewriteCond %{REQUEST_URI} ^/api/v1/.*$\nRewriteRule ^/api/v1/(.*)$ http://localhost:3000/$1 [P,L]\n\nRewriteRule ^ /index.html [L]  \n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br")])]),t("blockquote",[t("p",[s._v("上面的"),t("strong",[s._v("EXTERNAL_SERVER_IP")]),s._v("，需要替换为部署Web控制台实例的机器的主机名。")])]),s._v(" "),t("p",[s._v("执行"),t("code",[s._v("sudo apachectl restart")]),s._v("重启Apache HTTP Server以使配置生效。\n打开浏览器，根据部署类型打开下面的地址中的一个："),t("code",[s._v("http://WEB_CONSOLE_HOSTNAME")]),s._v("或"),t("code",[s._v("http://EXTERNAL_SERVER_IP")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("配置nginx HTTP Server")])]),s._v(" "),t("ul",[t("li",[s._v("将"),t("code",[s._v("$IGNITE_HOME/modules/web-console/frontend/build")]),s._v("文件夹中的内容复制到"),t("code",[s._v("/var/www/web-console-static")]),s._v(";")]),s._v(" "),t("li",[s._v("如果一个nginx HTTP Server为多个站点提供服务，需要为虚拟主机创建一个配置。比如创建一个配置文件"),t("code",[s._v("/etc/nginx/conf.d/web-console.conf")]),s._v("，内容如下：\n/etc/nginx/conf.d/web-console.conf：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('upstream backend-api {\n  server localhost:3000;\n}\n\nserver {\n  listen 80;\n  server_name EXTERNAL_SERVER_IP WEB_CONSOLE_HOSTNAME;\n\n  set $ignite_console_dir /var/www/web-console-static;\n\n  root $ignite_console_dir;\n\n  error_page 500 502 503 504 /50x.html;\n\n  location / {\n    try_files $uri /index.html = 404;\n  }\n\n  location /api/v1 {\n    rewrite /api/v1/(.*) /$1 break;\n    proxy_set_header Host $http_host;\n    proxy_pass http://backend-api;\n  }\n\n  location /socket.io {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n    proxy_http_version 1.1;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $host;\n    proxy_pass http://backend-api;\n  }\n\n  location /agents {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n    proxy_http_version 1.1;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $host;\n    proxy_pass http://backend-api;\n  }\n\n  location = /50x.html {\n    root $ignite_console_dir/error_page;\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br")])]),t("blockquote",[t("p",[s._v("上面的"),t("strong",[s._v("EXTERNAL_SERVER_IP")]),s._v("，需要替换为部署Web控制台实例的机器的主机名。\n"),t("strong",[s._v("WEB_CONSOLE_HOSTNAME")]),s._v("，需要替换为部署Web控制台实例的机器的主机名。")])]),s._v(" "),t("p",[s._v("执行"),t("code",[s._v("sudo service nginx restart")]),s._v("重启Nginx HTTP Server以使配置生效。\n打开浏览器，根据部署类型打开下面的地址中的一个："),t("code",[s._v("http://WEB_CONSOLE_HOSTNAME")]),s._v("或"),t("code",[s._v("http://EXTERNAL_SERVER_IP")]),s._v("。")]),s._v(" "),t("p",[t("strong",[s._v("问题解决")])]),s._v(" "),t("p",[s._v("如果在浏览器中出现了"),t("code",[s._v("Forbidden")]),s._v("这样的错误，那么需要检查操作系统中所有的安全策略都配置正确了。")]),s._v(" "),t("h2",{attrs:{id:"_1-4-演示模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-演示模式","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.4.演示模式")]),s._v(" "),t("h3",{attrs:{id:"_1-4-1-摘要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-摘要","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.4.1.摘要")]),s._v(" "),t("p",[s._v("可以使用Web控制台的演示模式来研究和评估它有关配置和管理集群的各种功能，这个模式中，可以检查预定义的集群、缓存以及领域模型，它还启动了一个内置的H2数据库实例，可以执行各种SQL查询以及查看数据报表，还可以监控各种缓存和节点的指标，比如集群的CPU和堆使用量等。")]),s._v(" "),t("h3",{attrs:{id:"_1-4-2-启动演示模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-启动演示模式","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.4.2.启动演示模式")]),s._v(" "),t("p",[s._v("要开启演示模式，需要点击控制台顶部菜单的"),t("code",[s._v("Start demo")]),s._v("按钮。")]),s._v(" "),t("ul",[t("li",[s._v("下载然后解压Ignite的Web代理；\n"),t("img",{attrs:{src:"https://files.readme.io/037ccba-download-web-agent.png",alt:""}})]),s._v(" "),t("li",[s._v("打开命令行终端，假定当前在"),t("code",[s._v("ignite-web-agent")]),s._v("目录，运行如下的命令：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./ignite-web-agent.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://files.readme.io/ca768c5-start-ignite-web-agent.png",alt:""}}),s._v("\n启动Web代理之后，回到浏览器中就可以：")]),s._v(" "),t("p",[t("strong",[s._v("配置集群和缓存")])]),s._v(" "),t("p",[s._v("点击控制台侧边栏上的"),t("code",[s._v("Clusters")]),s._v("和"),t("code",[s._v("Caches")]),s._v("，可以查看和设定Ignite的配置参数，点击"),t("code",[s._v("Summary")]),s._v("可以下载这些配置的XML和Java格式文件，这个页面还可以下载一个可用的基于Maven的工程。\n"),t("img",{attrs:{src:"https://files.readme.io/857edc8-summary.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("导入领域模型")])]),s._v(" "),t("p",[s._v("演示模式中，已连接的Web代理中已经启动了H2数据库实例，如下方法可以验证：")]),s._v(" "),t("ul",[t("li",[s._v("打开控制台的"),t("code",[s._v("Domain model")]),s._v("界面；")]),s._v(" "),t("li",[s._v("点击"),t("code",[s._v("Import from database")]),s._v("，可以看到一个描述Demo的模态窗口；")]),s._v(" "),t("li",[s._v("点击"),t("code",[s._v("Next")]),s._v("会看到一个可用模式的列表；")]),s._v(" "),t("li",[s._v("点击"),t("code",[s._v("Next")]),s._v("会看到一个可用表的列表；")]),s._v(" "),t("li",[s._v("点击"),t("code",[s._v("Next")]),s._v("会看到导入的选项；")]),s._v(" "),t("li",[s._v("选择之后点击"),t("code",[s._v("Save")]),s._v("。\n"),t("img",{attrs:{src:"https://files.readme.io/fbf02ed-domain-model.png",alt:""}})])]),s._v(" "),t("p",[t("strong",[s._v("执行SQL查询")])]),s._v(" "),t("p",[s._v("该模式中，会启动一个客户端和三个服务端节点，会创建一些缓存并且注入了数据，如下方法可以验证：")]),s._v(" "),t("ul",[t("li",[s._v("点击Web控制台顶层菜单的"),t("code",[s._v("Queries")]),s._v("选项卡；")]),s._v(" "),t("li",[s._v("会打开预配置"),t("code",[s._v("SQL Demo")]),s._v("查询的笔记本；")]),s._v(" "),t("li",[s._v("在demo数据库中，可以执行SQL查询，其中有表："),t("code",[s._v("Country, Department, Employee, Parking, Car")]),s._v("；")])]),s._v(" "),t("p",[s._v("比如输入如下的SQL：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" p"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("count")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" cnt "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"ParkingCache"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Parking p"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token keyword"}},[s._v("INNER")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"CarCache"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Car c "),t("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parkingId"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" P"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NAME\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("点击"),t("code",[s._v("Execute")]),s._v("按钮，会获得表中的若干数据；")]),s._v(" "),t("li",[s._v("点击"),t("code",[s._v("charts")]),s._v("按钮，可以看到自动生成的图表。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://files.readme.io/5b5cdc8-sql-queries.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"_1-5-docker部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-docker部署","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.5.Docker部署")]),s._v(" "),t("p",[s._v("在本地环境中部署Ignite Web控制台的最简单方式是使用控制台的Docker映像，如果基于Docker的方式不可行，那么可以参照"),t("code",[s._v("2.3.构建和部署")]),s._v("章节的内容。")]),s._v(" "),t("h3",{attrs:{id:"_1-5-1-启动web代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-启动web代理","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.5.1.启动Web代理")]),s._v(" "),t("p",[s._v("如"),t("code",[s._v("2.2.入门")]),s._v("章节所说，要在Ignite集群和Web控制台之间建立连接，需要首先配置并且启动Ignite的Web代理，下面是步骤：")]),s._v(" "),t("ul",[t("li",[s._v("启动开启REST服务的Ignite节点，将"),t("code",[s._v("ignite-rest-http")]),s._v("目录从"),t("code",[s._v("IGNITE_HOME/libs/optional/")]),s._v("移动到"),t("code",[s._v("IGNITE_HOME/lib/")]),s._v("，或者如果从IDE启动节点，则需要将下面的依赖加入pom.xml文件：")])]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.ignite"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("ignite-rest-http"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("{ignite.version}"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token tag"}},[t("span",{attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("在"),t("code",[s._v("ignite-web-agent-{version}")]),s._v("目录下的"),t("code",[s._v("default.properties")]),s._v("文件中，需要配置Web代理的"),t("code",[s._v("serverURI")]),s._v("属性，这样它就可以访问Ignite节点的REST服务。如果不配置，代理默认会连接"),t("code",[s._v("http://localhost:8080")]),s._v("。代理会尝试从"),t("code",[s._v("default.properties")]),s._v("文件中加载配置参数，该文件的内容格式比较简单，有效的属性名为："),t("code",[s._v("tokens")]),s._v("，"),t("code",[s._v("server-uri")]),s._v("，"),t("code",[s._v("node-uri")]),s._v("，"),t("code",[s._v("driver-folder")]),s._v("。")])]),s._v(" "),t("p",[s._v("default.properties：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tokens=1a2b3c4d5f,2j1s134d12\nserverURI=https://console.example.com:3001\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("在终端中，在Web代理的目录中使用"),t("code",[s._v("ignite-web-agent.{sh|bat}")]),s._v("脚本启动Web代理，如下：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ ./ignite-web-agent.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_1-5-2-部署web控制台"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-部署web控制台","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.5.2.部署Web控制台")]),s._v(" "),t("p",[s._v("下面是部署的完整步骤：")]),s._v(" "),t("ul",[t("li",[s._v("拉取Ignite Web控制台的Docker映像:"),t("code",[s._v("docker pull apacheignite/web-console-standalone")]),s._v(";")]),s._v(" "),t("li",[s._v("启动Web控制台："),t("code",[s._v("docker run -d -p 80:80 -v <host_absolute_path>:/var/lib/mongodb --name web-console-standalone apacheignite/web-console-standalone")]),s._v("。")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("注意")]),s._v("\n1.需要使用"),t("code",[s._v("sudo")]),s._v("来运行docker命令；\n2.如果"),t("code",[s._v("80")]),s._v("端口已被占用，那么容器端口需要映射到其他的可用端口。比如，下面的命令将容器的"),t("code",[s._v("80")]),s._v("端口绑定的宿主机的"),t("code",[s._v("8080")]),s._v("端口："),t("code",[s._v("sudo docker run -d -p 8080:80 -v <host_absolute_path>:/var/lib/mongodb --name web-console-standalone apacheignite/web-console-standalone")]),s._v(";\n3."),t("code",[s._v("<host_absolute_path>")]),s._v("：是宿主机中MongoDB创建数据库文件的路径。这个文件夹应该在docker运行前创建好，打开"),t("code",[s._v("Docker->Preferences->File Sharing")]),s._v("然后在那里创建目录，或者使用其他的方式也行；")])]),s._v(" "),t("ul",[t("li",[s._v("在浏览器中打开Web控制台："),t("code",[s._v("http://localhost")]),s._v("或者"),t("code",[s._v("http://host-ip-of-computer-with-docker-image")]),s._v("，如果默认端口有变，那么地址为："),t("code",[s._v("http://localhost:<host_port>")]),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"_1-5-3-更新到新版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-3-更新到新版","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.5.3.更新到新版")]),s._v(" "),t("p",[s._v("Docker更新容器的方式如下：\n"),t("code",[s._v("docker pull apacheignite/web-console-standalone")]),s._v(" "),t("code",[s._v("docker stop apacheignite/web-console-standalone")]),s._v(" "),t("code",[s._v("docker rm apacheignite/web-console-standalone")]),s._v(" "),t("code",[s._v("docker run -d -p 80:80 -v <host_absolute_path>:/var/lib/mongodb --name web-console-standalone apacheignite/web-console-standalone")])]),s._v(" "),t("h3",{attrs:{id:"_1-5-4-为web控制台添加https支持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-4-为web控制台添加https支持","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.5.4.为Web控制台添加HTTPS支持")]),s._v(" "),t("ul",[t("li",[s._v("创建"),t("code",[s._v("web-console.conf")]),s._v("文件，内容如下：")])]),s._v(" "),t("p",[s._v("web-console.conf：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('upstream backend-api {\n  server localhost:3000;\n}\n\n# redirect http to https\nserver {\n  listen 80 default_server;\n\n  return 301 https://<your-web-console-domain-name>$request_uri;\n}\n\n# https server settings\nserver {\n  listen 443 ssl;\n  server_name _;\n  ssl_certificate     server.crt;\n  ssl_certificate_key server.key;\n  ssl_protocols       SSLv3 TLSv1 TLSv1.1 TLSv1.2;\n  ssl_ciphers         HIGH:!aNULL:!MD5;\n\n  set $ignite_console_dir /opt/web-console/static;\n\n  root $ignite_console_dir;\n\n  error_page 500 502 503 504 /50x.html;\n\n  location / {\n    try_files $uri /index.html = 404;\n  }\n\n  location /api/v1 {\n    proxy_set_header Host $http_host;\n    proxy_pass http://backend-api;\n  }\n\n  location /socket.io {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n    proxy_http_version 1.1;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $host;\n    proxy_pass http://backend-api;\n  }\n\n  location /agents {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n    proxy_http_version 1.1;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $host;\n    proxy_pass http://backend-api;\n  }\n\n  location = /50x.html {\n    root $ignite_console_dir/error_page;\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br")])]),t("blockquote",[t("p",[s._v("将web-console.conf中的占位符"),t("code",[s._v("<your-web-console-domain-name>")]),s._v("替换为自己的域名，以便浏览器正确地从HTTP跳转到HTTPS。")])]),s._v(" "),t("ul",[t("li",[s._v("准备名为"),t("code",[s._v("server.crt")]),s._v("，"),t("code",[s._v("server.key")]),s._v("的证书文件；")]),s._v(" "),t("li",[s._v("启动Web控制台：")])]),s._v(" "),t("p",[t("code",[s._v("docker run -d -p 80:80 -p 443:443 -v <host_absolute_path>:/var/lib/mongodb -v <web-console.conf_absolute_path>:/etc/nginx/web-console.conf -v <server.crt_absolute_path>:/etc/nginx/server.crt -v < server.key_absolute_path>:/etc/nginx/server.key --name web-console-standalone apacheignite/web-console-standalone")])])])}],!1,null,null,null);n.options.__file="README.md";e.default=n.exports}}]);